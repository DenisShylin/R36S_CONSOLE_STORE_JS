(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?c.credentials="include":t.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(t){if(t.ep)return;t.ep=!0;const c=r(t);fetch(t.href,c)}})();function O(){console.log("Hero section initialized");const e=document.querySelector(".hero"),o=document.querySelector(".hero__console-img"),r=document.querySelector(".hero__content"),i=document.querySelector(".hero__description--desktop"),t=document.querySelector(".hero__description--mobile"),c=document.querySelector(".hero__pricing"),d=document.getElementById("buy-button"),a=document.getElementById("more-details-button");let l=null;function y(){if(!o){console.error("Hero image element not found");return}console.log("Setting up hero image"),o.onerror=()=>{console.error("Failed to load hero image:",o.src);try{const n=o.getAttribute("srcset");if(n){const s=n.split(",");if(s&&s.length>0){const f=s[0].split(" ")[0];console.log("Using fallback image:",f),o.src=f}}}catch(n){console.error("Error setting fallback image:",n)}e&&e.classList.add("hero--loaded")},o.onload=()=>{console.log("Hero image loaded successfully"),e&&e.classList.add("hero--loaded")},o.decoding="async",o.complete&&(console.log("Hero image already loaded (from cache)"),e&&e.classList.add("hero--loaded"))}function m(){const n=window.innerWidth>992;i&&t&&c&&(n?(i.style.display="block",t.style.display="none"):(i.style.display="none",t.style.display="block"))}function b(){if(r){l&&(l.disconnect(),l=null);try{l=new IntersectionObserver(n=>{try{n.forEach(s=>{s.isIntersecting&&s.target&&s.target.isConnected&&(s.target.classList.add("animate-in"),l&&l.unobserve(s.target))})}catch(s){console.warn("Error in IntersectionObserver callback:",s)}},{threshold:.1}),r&&r.isConnected&&l.observe(r)}catch(n){console.warn("Error setting up IntersectionObserver:",n)}}}function v(){d&&(d.removeEventListener("click",p),d.addEventListener("click",p)),a&&(a.removeEventListener("click",g),a.addEventListener("click",g))}function p(){try{window.open("https://www.aliexpress.com/item/1005007171465465.html","_blank","noopener,noreferrer")}catch(n){console.error("Error opening product link:",n)}}function g(n){n.preventDefault();const s=document.getElementById("features"),f=document.querySelector(".header");if(s&&f)try{const h=f.offsetHeight,E=s.getBoundingClientRect().top,L=window.scrollY||window.pageYOffset,S=E+L-h;window.scrollTo({top:S,behavior:"smooth"}),window.history.replaceState(null,"",`${window.location.pathname}#features`)}catch(h){console.error("Error scrolling to features:",h),window.location.hash="features"}}function u(){try{l&&(l.disconnect(),l=null),window.removeEventListener("resize",m),d&&d.removeEventListener("click",p),a&&a.removeEventListener("click",g),window.removeEventListener("unload",u),window.removeEventListener("beforeunload",u)}catch(n){console.warn("Error during cleanup:",n)}}return y(),m(),b(),v(),window.removeEventListener("resize",m),window.addEventListener("resize",m),typeof window<"u"&&(window.removeEventListener("beforeunload",u),window.addEventListener("beforeunload",u)),u}console.log("Main.js инициализирован");let w=[];function k(){const e="IntersectionObserver"in window,o=function(){const i=document.createElement("div");return i.style.display="flex",i.style.display==="flex"}(),r=function(){const i=document.createElement("div");return i.style.display="grid",i.style.display==="grid"}();return console.log("Поддержка браузера:"),console.log("- IntersectionObserver:",e),console.log("- Flexbox:",o),console.log("- CSS Grid:",r),e||document.body.classList.add("no-intersection-observer"),o||document.body.classList.add("no-flexbox"),r||document.body.classList.add("no-grid"),{hasIntersectionObserver:e,hasFlexbox:o,hasGrid:r}}function I(){try{w.forEach(e=>{typeof e=="function"&&e()}),w=[]}catch(e){console.warn("Error during global cleanup:",e)}}document.addEventListener("DOMContentLoaded",()=>{console.log("DOM загружен");try{const e=k(),o=O();typeof o=="function"&&w.push(o);const r=performance.now();console.log(`Страница загружена за ${r.toFixed(2)}ms`),window.addEventListener("beforeunload",I)}catch(e){console.error("Ошибка при инициализации страницы:",e)}});window.onerror=function(e,o,r,i,t){return console.error("Глобальная ошибка:",{message:e,source:o,lineno:r,colno:i,error:t}),!1};window.addEventListener("unhandledrejection",function(e){console.warn("Непойманное отклонение промиса (unhandled promise rejection):",e.reason)});window.appVersion={version:"1.0.0",buildDate:new Date().toISOString(),environment:"production",basePath:"/R36S_CONSOLE_STORE_JS/"};console.log("Main.js выполнение завершено");
//# sourceMappingURL=index.js.map
