{"version":3,"file":"index.js","sources":["../src/js/scroll-to-top.js","../src/js/i18n/languageDetector.js","../src/js/utils/urlManager.js","../src/js/i18n/i18n.js","../src/js/header.js","../src/js/mobilemenu.js","../src/js/utils/priceFormatter.js","../src/js/hero.js","../src/js/modalabout.js","../../../../../../video/about/video_1_.webp","../../../../../../video/about/video_2_.webp","../../../../../../img/about/Untitled_1_1x.jpg","../../../../../../img/about/Untitled_2_1x.jpg","../../../../../../img/about/Untitled_3_1x.jpg","../../../../../../img/about/Untitled_4_1x.jpg","../../../../../../video/about/video_3_batrey_.mp4","../../../../../../video/about/video_6_.mp4","../../../../../../video/about/video_4_.mp4","../src/js/about.js","../src/js/features.js","../src/js/categories.js","../src/js/accordion.js","../src/js/articles.js","../src/js/theme-toggle.js","../src/js/iconscontact.js","../src/js/contact.js","../src/js/reviews.js","../src/js/products.js","../src/js/footer.js","../src/main.js"],"sourcesContent":["/**\n * @fileoverview Модуль кнопки прокрутки вверх страницы и селектора языка\n * @description Создает и управляет кнопкой скролла вверх и селектором языка в правом нижнем углу\n */\n\n/**\n * Инициализирует функционал кнопки прокрутки вверх и селектора языка\n * @returns {Function} Функция очистки для удаления обработчиков событий\n */\nexport function initScrollToTop() {\n  console.log('Инициализация кнопки прокрутки вверх и селектора языка');\n\n  // Объект с SVG-кодом флагов для поддерживаемых языков\n  const flagsSVG = {\n    en: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"30\" fill=\"#012169\"/>\n          <path d=\"M0,0 L60,30 M60,0 L0,30\" stroke=\"#fff\" stroke-width=\"6\"/>\n          <path d=\"M0,0 L60,30 M60,0 L0,30\" stroke=\"#C8102E\" stroke-width=\"4\"/>\n          <path d=\"M30,0 v30 M0,15 h60\" stroke=\"#fff\" stroke-width=\"10\"/>\n          <path d=\"M30,0 v30 M0,15 h60\" stroke=\"#C8102E\" stroke-width=\"6\"/>\n        </svg>`,\n    ru: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"10\" fill=\"#fff\"/>\n          <rect width=\"60\" height=\"10\" y=\"10\" fill=\"#0039A6\"/>\n          <rect width=\"60\" height=\"10\" y=\"20\" fill=\"#D52B1E\"/>\n        </svg>`,\n    ar: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"10\" fill=\"#006C35\"/>\n          <rect width=\"60\" height=\"10\" y=\"10\" fill=\"#FFFFFF\"/>\n          <rect width=\"60\" height=\"10\" y=\"20\" fill=\"#000000\"/>\n        </svg>`,\n    be: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"20\" fill=\"#D22730\"/>\n          <rect width=\"60\" height=\"10\" y=\"20\" fill=\"#00840f\"/>\n          <path d=\"M0,0 H10 V30 H0 Z\" fill=\"#FFFFFF\"/>\n        </svg>`,\n    de: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"10\" fill=\"#000\"/>\n          <rect width=\"60\" height=\"10\" y=\"10\" fill=\"#DD0000\"/>\n          <rect width=\"60\" height=\"10\" y=\"20\" fill=\"#FFCE00\"/>\n        </svg>`,\n    es: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"30\" fill=\"#c60b1e\"/>\n          <rect width=\"60\" height=\"15\" y=\"7.5\" fill=\"#ffc400\"/>\n        </svg>`,\n    fr: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"20\" height=\"30\" fill=\"#002395\"/>\n          <rect width=\"20\" height=\"30\" x=\"20\" fill=\"#FFFFFF\"/>\n          <rect width=\"20\" height=\"30\" x=\"40\" fill=\"#ED2939\"/>\n        </svg>`,\n    it: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"20\" height=\"30\" fill=\"#009246\"/>\n          <rect width=\"20\" height=\"30\" x=\"20\" fill=\"#FFFFFF\"/>\n          <rect width=\"20\" height=\"30\" x=\"40\" fill=\"#CE2B37\"/>\n        </svg>`,\n    ja: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"30\" fill=\"#FFFFFF\"/>\n          <circle cx=\"30\" cy=\"15\" r=\"9\" fill=\"#BC002D\"/>\n        </svg>`,\n    ko: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"30\" fill=\"#FFFFFF\"/>\n          <circle cx=\"30\" cy=\"15\" r=\"6\" fill=\"#C60C30\"/>\n          <path d=\"M25,9 A 6,6 0 0 1 35,9\" fill=\"#003478\"/>\n          <path d=\"M25,21 A 6,6 0 0 0 35,21\" fill=\"#003478\"/>\n        </svg>`,\n    nl: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"10\" fill=\"#AE1C28\"/>\n          <rect width=\"60\" height=\"10\" y=\"10\" fill=\"#FFFFFF\"/>\n          <rect width=\"60\" height=\"10\" y=\"20\" fill=\"#21468B\"/>\n        </svg>`,\n    pt: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"30\" fill=\"#006600\"/>\n          <rect width=\"20\" height=\"30\" fill=\"#FF0000\"/>\n          <circle cx=\"20\" cy=\"15\" r=\"4\" fill=\"#FFFF00\"/>\n        </svg>`,\n    tr: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"30\" fill=\"#E30A17\"/>\n          <circle cx=\"22.5\" cy=\"15\" r=\"6\" fill=\"#FFFFFF\"/>\n          <circle cx=\"25.2\" cy=\"15\" r=\"5\" fill=\"#E30A17\"/>\n          <polygon fill=\"#FFFFFF\" points=\"30,15 32.5,19 28.5,16.5 31.5,16.5 27.5,19\"/>\n        </svg>`,\n    uk: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 30\">\n          <rect width=\"60\" height=\"15\" fill=\"#005BBB\"/>\n          <rect width=\"60\" height=\"15\" y=\"15\" fill=\"#FFD500\"/>\n        </svg>`,\n  };\n\n  // Определяем поддерживаемые языки и их имена\n  const supportedLanguages = [\n    'en',\n    'ru',\n    'ar',\n    'be',\n    'de',\n    'es',\n    'fr',\n    'it',\n    'ja',\n    'ko',\n    'nl',\n    'pt',\n    'tr',\n    'uk',\n  ];\n\n  const languageNames = {\n    en: 'English',\n    ru: 'Русский',\n    ar: 'العربية',\n    be: 'Беларуская',\n    de: 'Deutsch',\n    es: 'Español',\n    fr: 'Français',\n    it: 'Italiano',\n    ja: '日本語',\n    ko: '한국어',\n    nl: 'Nederlands',\n    pt: 'Português',\n    tr: 'Türkçe',\n    uk: 'Українська',\n  };\n\n  // Создаем контейнер для кнопок\n  const cornerButtonsContainer = document.createElement('div');\n  cornerButtonsContainer.className = 'corner-buttons-container';\n\n  // Создаем элемент селектора языка\n  const languageSelectorContainer = document.createElement('div');\n  languageSelectorContainer.className = 'language-selector';\n  languageSelectorContainer.id = 'corner-language-selector';\n\n  // Создаем кнопку языка\n  const languageButton = document.createElement('button');\n  languageButton.className = 'language-button';\n  languageButton.setAttribute('aria-label', 'Выбрать язык');\n\n  // Создаем элемент для отображения флага текущего языка\n  const currentLangFlag = document.createElement('div');\n  currentLangFlag.className = 'language-button__flag';\n  currentLangFlag.id = 'current-language-flag';\n\n  // Создаем контейнер для выпадающего списка языков\n  const languageDropdown = document.createElement('div');\n  languageDropdown.className = 'language-dropdown';\n  languageDropdown.id = 'language-dropdown';\n\n  // Создаем элемент кнопки прокрутки вверх\n  const scrollButton = document.createElement('button');\n  scrollButton.className = 'scroll-to-top';\n  scrollButton.setAttribute('aria-label', 'Прокрутить вверх страницы');\n  scrollButton.innerHTML = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n      <polyline points=\"18 15 12 9 6 15\"></polyline>\n    </svg>\n  `;\n\n  // Добавляем элементы в DOM\n  languageButton.appendChild(currentLangFlag);\n  languageSelectorContainer.appendChild(languageButton);\n  languageSelectorContainer.appendChild(languageDropdown);\n\n  // Добавляем все в контейнер и затем в DOM\n  cornerButtonsContainer.appendChild(languageSelectorContainer);\n  cornerButtonsContainer.appendChild(scrollButton);\n  document.body.appendChild(cornerButtonsContainer);\n\n  // Инициализируем селектор языка\n  initLanguageSelector();\n\n  // Используем throttle для уменьшения количества вызовов обработчика скролла\n  function throttle(func, limit) {\n    let inThrottle;\n    return function () {\n      const args = arguments;\n      const context = this;\n      if (!inThrottle) {\n        func.apply(context, args);\n        inThrottle = true;\n        setTimeout(() => (inThrottle = false), limit);\n      }\n    };\n  }\n\n  /**\n   * Обработчик события прокрутки страницы\n   * Показывает/скрывает кнопку скролла в зависимости от позиции скролла\n   */\n  const handleScroll = throttle(function () {\n    const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n    const shouldBeVisible = scrollTop > 300; // Показать после прокрутки на 300px вниз\n\n    // Обновляем видимость кнопки скролла\n    if (shouldBeVisible) {\n      scrollButton.classList.add('visible');\n    } else {\n      scrollButton.classList.remove('visible');\n    }\n  }, 100); // Ограничиваем вызовы до одного раза в 100ms\n\n  /**\n   * Обработчик клика по кнопке прокрутки вверх\n   * Плавно прокручивает страницу вверх\n   * @param {Event} e - Событие клика\n   */\n  function handleScrollButtonClick(e) {\n    e.preventDefault();\n\n    // Эффект нажатия кнопки\n    scrollButton.classList.add('active');\n    setTimeout(() => {\n      scrollButton.classList.remove('active');\n    }, 200);\n\n    // Плавная прокрутка наверх страницы\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth',\n    });\n  }\n\n  /**\n   * Инициализирует функционал селектора языка\n   */\n  function initLanguageSelector() {\n    try {\n      // Проверяем наличие скрытого селектора или создаем его\n      let originalSelector = document.getElementById('language-selector');\n      if (!originalSelector) {\n        originalSelector = document.createElement('select');\n        originalSelector.id = 'language-selector';\n        originalSelector.style.display = 'none';\n        document.body.appendChild(originalSelector);\n\n        // Заполняем options в селекторе\n        supportedLanguages.forEach(lang => {\n          const option = document.createElement('option');\n          option.value = lang;\n          option.textContent = languageNames[lang] || lang;\n          originalSelector.appendChild(option);\n        });\n      }\n\n      // Получаем текущий язык\n      const currentLang = localStorage.getItem('userLanguage') || 'en';\n      if (originalSelector) {\n        originalSelector.value = currentLang;\n      }\n\n      // Обновляем внешний вид кнопки языка\n      updateLanguageButtonAppearance(currentLang);\n\n      // Создаем элементы выпадающего списка\n      createLanguageDropdownItems();\n\n      // Добавляем обработчик клика на кнопку языка\n      languageButton.addEventListener('click', function (e) {\n        try {\n          e.preventDefault();\n          e.stopPropagation();\n\n          // Проверяем, присутствует ли элемент в DOM\n          if (!document.body.contains(languageSelectorContainer)) {\n            console.warn('Language selector container removed from DOM');\n            return;\n          }\n\n          languageSelectorContainer.classList.toggle('active');\n        } catch (clickError) {\n          console.error('Error handling language button click:', clickError);\n        }\n      });\n\n      // Закрываем dropdown при клике вне элемента\n      document.addEventListener('click', e => {\n        try {\n          // Проверяем наличие элемента в DOM\n          if (!document.body.contains(languageSelectorContainer)) {\n            return;\n          }\n\n          if (!languageSelectorContainer.contains(e.target)) {\n            languageSelectorContainer.classList.remove('active');\n          }\n        } catch (documentClickError) {\n          console.error('Error handling document click:', documentClickError);\n        }\n      });\n\n      // Функция для обновления внешнего вида кнопки языка\n      function updateLanguageButtonAppearance(langCode) {\n        try {\n          if (!document.body.contains(currentLangFlag)) {\n            console.warn('Current language flag element removed from DOM');\n            return;\n          }\n\n          currentLangFlag.innerHTML = flagsSVG[langCode] || '';\n        } catch (updateError) {\n          console.error(\n            'Error updating language button appearance:',\n            updateError\n          );\n        }\n      }\n\n      // Функция для создания элементов выпадающего списка\n      function createLanguageDropdownItems() {\n        try {\n          // Проверяем наличие dropdown в DOM\n          if (!document.body.contains(languageDropdown)) {\n            console.warn('Language dropdown removed from DOM');\n            return;\n          }\n\n          // Очищаем контейнер\n          languageDropdown.innerHTML = '';\n\n          // Создаем элементы для каждого языка\n          supportedLanguages.forEach(code => {\n            const item = document.createElement('div');\n            item.className = `language-dropdown__item ${\n              code === currentLang ? 'active' : ''\n            }`;\n            item.dataset.lang = code;\n\n            // Создаем элемент флага\n            const flag = document.createElement('div');\n            flag.className = 'language-dropdown__flag';\n            flag.innerHTML = flagsSVG[code] || '';\n\n            // Создаем элемент названия языка\n            const name = document.createElement('div');\n            name.className = 'language-dropdown__name';\n            name.textContent = languageNames[code] || code;\n\n            // Добавляем элементы в контейнер\n            item.appendChild(flag);\n            item.appendChild(name);\n            languageDropdown.appendChild(item);\n\n            // Добавляем обработчик клика\n            item.addEventListener('click', e => {\n              try {\n                // Проверяем наличие оригинального селектора\n                if (!document.body.contains(originalSelector)) {\n                  console.warn('Original language selector removed from DOM');\n                  return;\n                }\n\n                // Проверяем наличие dropdown в DOM\n                if (!document.body.contains(languageDropdown)) {\n                  console.warn('Language dropdown removed from DOM');\n                  return;\n                }\n\n                // Эмулируем выбор в оригинальном селекторе для совместимости\n                originalSelector.value = code;\n\n                // Создаем и диспатчим событие change безопасно\n                try {\n                  const changeEvent = new Event('change');\n                  originalSelector.dispatchEvent(changeEvent);\n                } catch (eventError) {\n                  console.error('Error dispatching change event:', eventError);\n\n                  // Резервный вариант для старых браузеров\n                  if (typeof originalSelector.onchange === 'function') {\n                    originalSelector.onchange();\n                  }\n                }\n\n                // Закрываем dropdown\n                languageSelectorContainer.classList.remove('active');\n\n                // Обновляем активный элемент\n                document\n                  .querySelectorAll('.language-dropdown__item')\n                  .forEach(el => {\n                    el.classList.toggle('active', el.dataset.lang === code);\n                  });\n\n                // Обновляем внешний вид кнопки\n                updateLanguageButtonAppearance(code);\n              } catch (itemClickError) {\n                console.error(\n                  'Error handling language item click:',\n                  itemClickError\n                );\n              }\n            });\n          });\n        } catch (createError) {\n          console.error('Error creating language dropdown items:', createError);\n        }\n      }\n\n      // Добавляем слушатель события изменения языка\n      window.addEventListener('languageChanged', event => {\n        try {\n          // Проверяем, что элементы существуют в DOM\n          if (\n            !document.body.contains(languageDropdown) ||\n            !document.body.contains(currentLangFlag)\n          ) {\n            console.warn('Language elements removed from DOM, skipping update');\n            return;\n          }\n\n          if (event.detail && event.detail.language) {\n            updateLanguageButtonAppearance(event.detail.language);\n\n            // Обновляем активный элемент в dropdown\n            document\n              .querySelectorAll('.language-dropdown__item')\n              .forEach(el => {\n                el.classList.toggle(\n                  'active',\n                  el.dataset.lang === event.detail.language\n                );\n              });\n          }\n        } catch (eventError) {\n          console.error('Error handling language change event:', eventError);\n        }\n      });\n    } catch (error) {\n      console.error('Ошибка при инициализации селектора языка:', error);\n    }\n  }\n\n  // Назначаем обработчики событий\n  window.addEventListener('scroll', handleScroll, { passive: true });\n  scrollButton.addEventListener('click', handleScrollButtonClick);\n\n  // Инициализируем начальное состояние\n  handleScroll();\n\n  /**\n   * Функция очистки обработчиков событий и удаления элементов\n   * @returns {void}\n   */\n  return function cleanup() {\n    console.log('Очистка кнопки прокрутки вверх и селектора языка');\n    window.removeEventListener('scroll', handleScroll);\n    scrollButton.removeEventListener('click', handleScrollButtonClick);\n\n    // Удаляем все обработчики событий для языкового селектора\n    languageButton.removeEventListener('click', () => {});\n    document.querySelectorAll('.language-dropdown__item').forEach(item => {\n      item.removeEventListener('click', () => {});\n    });\n\n    // Удаляем контейнер из DOM\n    if (cornerButtonsContainer && cornerButtonsContainer.parentNode) {\n      cornerButtonsContainer.parentNode.removeChild(cornerButtonsContainer);\n    }\n  };\n}\n","/**\n * Определяет язык пользователя на основе предпочтений и доступных языков\n * @param {string[]} supportedLanguages - Массив поддерживаемых языковых кодов\n * @param {string} defaultLanguage - Язык по умолчанию\n * @returns {string} Выбранный языковой код\n */\nexport function detectUserLanguage(supportedLanguages, defaultLanguage) {\n  try {\n    // Проверка кэшированного результата\n    const cachedDetection = sessionStorage.getItem('detectedBrowserLanguage');\n    if (cachedDetection && supportedLanguages.includes(cachedDetection)) {\n      console.log('Using cached browser language detection:', cachedDetection);\n      return cachedDetection;\n    }\n\n    // Проверка входных параметров\n    if (!Array.isArray(supportedLanguages) || supportedLanguages.length === 0) {\n      console.warn('Invalid supportedLanguages array, using default language');\n      return defaultLanguage;\n    }\n\n    if (!defaultLanguage || typeof defaultLanguage !== 'string') {\n      console.warn('Invalid defaultLanguage, using first supported language');\n      return supportedLanguages[0];\n    }\n\n    console.log('Detecting user language with:', {\n      supportedLanguages,\n      defaultLanguage,\n    });\n\n    // Функция для проверки поддержки языка\n    const isLanguageSupported = language => {\n      if (!language) return false;\n      const languageCode = language.split('-')[0].toLowerCase();\n      return supportedLanguages.includes(languageCode) ? languageCode : null;\n    };\n\n    // Проверяем сохраненный выбор пользователя в localStorage\n    const savedLanguage = localStorage.getItem('userLanguage');\n    console.log('Saved language in localStorage:', savedLanguage);\n\n    // Проверка savedLanguage\n    const supportedSavedLanguage =\n      savedLanguage &&\n      savedLanguage.trim() !== '' &&\n      isLanguageSupported(savedLanguage);\n    if (supportedSavedLanguage) {\n      console.log('Using saved language preference:', supportedSavedLanguage);\n      return supportedSavedLanguage;\n    }\n\n    // Получаем языковые предпочтения браузера\n    let browserLanguages = [];\n\n    // Проверяем navigator.languages (современные браузеры)\n    if (navigator.languages && navigator.languages.length) {\n      browserLanguages = [...navigator.languages];\n    }\n    // Проверяем navigator.language (резервный вариант)\n    else if (navigator.language) {\n      browserLanguages = [navigator.language];\n    }\n    // Проверяем устаревшие свойства для максимальной совместимости\n    else if (navigator.userLanguage) {\n      browserLanguages = [navigator.userLanguage];\n    } else if (navigator.browserLanguage) {\n      browserLanguages = [navigator.browserLanguage];\n    } else if (navigator.systemLanguage) {\n      browserLanguages = [navigator.systemLanguage];\n    }\n\n    console.log('Browser language preferences:', browserLanguages);\n\n    // Ищем первый поддерживаемый язык из списка предпочтений браузера\n    for (const language of browserLanguages) {\n      const supportedBrowserLanguage = isLanguageSupported(language);\n      if (supportedBrowserLanguage) {\n        console.log(\n          'Found supported browser language:',\n          supportedBrowserLanguage\n        );\n        // Сохраняем обнаруженный язык в sessionStorage\n        sessionStorage.setItem(\n          'detectedBrowserLanguage',\n          supportedBrowserLanguage\n        );\n        return supportedBrowserLanguage;\n      }\n    }\n\n    // Возвращаем язык по умолчанию\n    console.log('No matching language found, using default:', defaultLanguage);\n    return defaultLanguage;\n  } catch (error) {\n    console.error('Error in detectUserLanguage:', error);\n    console.error('Stack trace:', error.stack);\n    return defaultLanguage;\n  }\n}\n","/**\n * Получает код языка из URL (из пути)\n * @param {string[]} supportedLanguages - Список поддерживаемых языков\n * @returns {string|null} - Код языка или null, если не найден\n */\nexport function getLanguageFromURL(supportedLanguages) {\n  try {\n    // Проверяем входные параметры\n    if (!Array.isArray(supportedLanguages) || supportedLanguages.length === 0) {\n      console.warn(\n        'Invalid supportedLanguages array passed to getLanguageFromURL'\n      );\n      return null;\n    }\n\n    // Получаем текущий путь\n    const path = window.location.pathname;\n    console.log('Current path for language detection:', path);\n\n    // Получаем базовый URL\n    const baseUrl = import.meta.env.BASE_URL || '/';\n    console.log('Base URL for language detection:', baseUrl);\n\n    // Обработка пустого пути\n    if (!path || path === '/') {\n      console.log('Empty path, no language prefix');\n      return null;\n    }\n\n    // Удаляем базовый URL из пути, если он присутствует\n    let pathWithoutBase = path;\n    if (baseUrl !== '/' && path.startsWith(baseUrl)) {\n      pathWithoutBase = path.substring(baseUrl.length) || '/';\n    }\n    console.log('Path without base for language detection:', pathWithoutBase);\n\n    // Разбиваем путь на части\n    const pathParts = pathWithoutBase\n      .split('/')\n      .filter(part => part.trim() !== '');\n    console.log('Path parts for language detection:', pathParts);\n\n    // Проверяем, является ли первая часть пути языковым кодом\n    if (pathParts.length > 0) {\n      const possibleLang = pathParts[0].toLowerCase();\n      if (supportedLanguages.includes(possibleLang)) {\n        console.log(`Found language in URL: ${possibleLang}`);\n        return possibleLang;\n      }\n    }\n\n    return null;\n  } catch (error) {\n    console.error('Error getting language from URL:', error);\n    return null;\n  }\n}\n\n/**\n * Обновляет URL с учетом текущего языка\n * @param {string} language - Код языка\n */\nexport function updateLanguageURL(language) {\n  try {\n    if (!language) {\n      console.warn('No language provided to updateLanguageURL');\n      return;\n    }\n\n    // Проверка на некорректные значения language\n    if (typeof language !== 'string' || language.trim() === '') {\n      console.warn('Invalid language value provided to updateLanguageURL');\n      return;\n    }\n\n    console.log(\n      'Current localStorage userLanguage before URL update:',\n      localStorage.getItem('userLanguage')\n    );\n\n    console.log(\n      'Before language URL update, current URL:',\n      window.location.href\n    );\n    console.log('Updating URL for language:', language);\n\n    try {\n      // Базовый URL сайта\n      const baseUrl = import.meta.env.BASE_URL || '/';\n\n      // Если выбран английский язык, перенаправляем на корневой URL\n      if (language === 'en') {\n        window.location.href = baseUrl;\n        return;\n      }\n\n      // Для других языков перенаправляем на языковую директорию\n      window.location.href = `${baseUrl}${language}/`;\n    } catch (error) {\n      console.error('Error updating URL with language:', error);\n    }\n  } catch (error) {\n    console.error('Error updating URL with language:', error);\n  }\n}\n","import i18next from 'i18next';\nimport { detectUserLanguage } from './languageDetector';\nimport { updateLanguageURL } from '../utils/urlManager';\n// Поскольку блок с ценами остается, но без активного форматирования,\n// мы можем сохранить функцию clearPriceCache, но не использовать её\n// import { clearPriceCache } from '../utils/priceFormatter';\n\n// Кэш для переводов\nconst translationsCache = {};\n\n// Список всех поддерживаемых языков\nexport const supportedLanguages = [\n  'en',\n  'ru',\n  'ar',\n  'be',\n  'de',\n  'es',\n  'fr',\n  'it',\n  'ja',\n  'ko',\n  'nl',\n  'pt',\n  'tr',\n  'uk',\n];\n\n// Маппинг языковых кодов к их названиям\nexport const languageNames = {\n  en: 'English',\n  ru: 'Русский',\n  ar: 'العربية',\n  be: 'Беларуская',\n  de: 'Deutsch',\n  es: 'Español',\n  fr: 'Français',\n  it: 'Italiano',\n  ja: '日本語',\n  ko: '한국어',\n  nl: 'Nederlands',\n  pt: 'Português',\n  tr: 'Türkçe',\n  uk: 'Українська',\n};\n\n// Список секций с переводами\nconst translationSections = [\n  'about',\n  'articles',\n  'categories',\n  'contact',\n  'features',\n  'footer',\n  'header',\n  'hero',\n  'mobilemenu',\n  'products',\n  'reviews',\n];\n\n// Создаем CustomEvent для обновления языка\nconst LANGUAGE_CHANGE_EVENT = 'languageChanged';\n\n// Получение пути к файлам переводов\nconst getTranslationPath = (language, section) => {\n  const baseUrl = import.meta.env.BASE_URL || '/';\n  return `${baseUrl}locales/${language}/${section}.json`;\n};\n\n// Загрузка переводов для конкретной секции с улучшенной обработкой ошибок\nconst loadSectionTranslation = async (language, section) => {\n  // Создаем уникальный ключ для кэша\n  const cacheKey = `${language}_${section}`;\n\n  // Проверяем кэш перед загрузкой\n  if (translationsCache[cacheKey]) {\n    return translationsCache[cacheKey];\n  }\n\n  // Добавляем счетчик попыток для предотвращения бесконечных рекурсий\n  let attemptCount = 0;\n  const maxAttempts = 2; // Максимальное количество попыток\n\n  const attemptLoad = async (lang, sect, attempts) => {\n    if (attempts >= maxAttempts) {\n      console.error(\n        `Превышено максимальное количество попыток загрузки ${lang}/${sect}`\n      );\n      return {};\n    }\n\n    try {\n      const path = getTranslationPath(lang, sect);\n      console.log(`Загрузка перевода: ${path}`);\n\n      // Добавляем таймаут для предотвращения зависания запроса\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 секунд таймаут\n\n      const response = await fetch(path, {\n        // Добавляем кеш-контроль для обхода кеширования\n        cache: 'no-store',\n        headers: {\n          'Cache-Control': 'no-cache',\n        },\n        signal: controller.signal,\n      });\n\n      // Очищаем таймаут\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        console.warn(\n          `Не удалось загрузить перевод ${lang}/${sect}: ${response.status}`\n        );\n\n        // Если основной язык не загрузился, пробуем запасной вариант\n        if (lang !== 'en') {\n          console.log(`Пробуем загрузить запасной перевод (en) для ${sect}`);\n          return attemptLoad('en', sect, attempts + 1);\n        }\n\n        // Возвращаем пустой объект для обработки ошибки\n        return {};\n      }\n\n      const data = await response.json();\n\n      // Проверяем валидность данных JSON\n      if (!data || typeof data !== 'object') {\n        throw new Error(`Invalid translation data format for ${lang}/${sect}`);\n      }\n\n      // Сохраняем в кэш\n      translationsCache[cacheKey] = data;\n      return data;\n    } catch (error) {\n      // Проверяем, является ли ошибка таймаутом\n      if (error.name === 'AbortError') {\n        console.error(`Таймаут загрузки ${lang}/${sect} переводов`);\n      } else {\n        console.error(`Ошибка загрузки ${lang}/${sect} переводов:`, error);\n      }\n\n      // Если основной язык не загрузился, пробуем запасной вариант\n      if (lang !== 'en') {\n        console.log(\n          `Пробуем загрузить запасной перевод (en) для ${sect} после ошибки`\n        );\n        return attemptLoad('en', sect, attempts + 1);\n      }\n\n      return {};\n    }\n  };\n\n  // Начинаем попытки загрузки\n  return attemptLoad(language, section, 0);\n};\n\n// Загрузка всех переводов для языка\nconst loadAllTranslations = async language => {\n  try {\n    // Счетчик успешных загрузок для логирования\n    let successCount = 0;\n    let failCount = 0;\n\n    // Используем Promise.allSettled для надежной загрузки всех секций\n    const results = await Promise.allSettled(\n      translationSections.map(section =>\n        loadSectionTranslation(language, section)\n      )\n    );\n\n    // Объединяем все полученные переводы в один объект\n    const translations = {};\n\n    results.forEach((result, index) => {\n      if (result.status === 'fulfilled') {\n        const sectionData = result.value;\n        const sectionName = translationSections[index];\n\n        // Проверяем, что получили валидные данные (не пустой объект)\n        if (sectionData && Object.keys(sectionData).length > 0) {\n          // Добавляем как вложенный объект\n          translations[sectionName] = sectionData;\n          successCount++;\n        } else {\n          console.warn(\n            `Получен пустой или недействительный перевод для секции: ${sectionName}`\n          );\n          failCount++;\n        }\n      } else {\n        console.warn(\n          `Не удалось загрузить секцию: ${translationSections[index]}, ошибка:`,\n          result.reason\n        );\n        failCount++;\n      }\n    });\n\n    console.log(\n      `Загрузка переводов для ${language}: успешно ${successCount}, не удалось ${failCount}`\n    );\n\n    return translations;\n  } catch (error) {\n    console.error(`Ошибка загрузки переводов для ${language}:`, error);\n    return {};\n  }\n};\n\n// Функции обновления контента\nconst updateTextElements = () => {\n  try {\n    const elements = document.querySelectorAll('[data-i18n]');\n    console.log(`Обновление ${elements.length} текстовых элементов`);\n\n    // Если не нашли элементов с data-i18n, просто выходим\n    if (elements.length === 0) {\n      console.log('Не найдено элементов с атрибутом data-i18n');\n      return;\n    }\n\n    elements.forEach(element => {\n      try {\n        const key = element.getAttribute('data-i18n');\n        if (!key) return;\n\n        if (key.startsWith('[')) {\n          const matches = key.match(/^\\[(.*)\\](.*)$/);\n          if (matches) {\n            const [, attr, translationKey] = matches;\n            const translation = i18next.t(translationKey);\n            // Проверяем наличие перевода и используем атрибут только если перевод найден\n            if (translation && translation !== translationKey) {\n              element.setAttribute(attr, translation);\n            }\n          }\n        } else {\n          const translation = i18next.t(key);\n          // Проверяем, что перевод не равен ключу (если ключ не найден, i18next вернет ключ)\n          if (translation && translation !== key) {\n            if (element.hasAttribute('content')) {\n              element.setAttribute('content', translation);\n            } else {\n              // Сохраняем оригинальный текст для английского языка\n              if (!element.dataset.originalText && i18next.language !== 'en') {\n                element.dataset.originalText = element.textContent;\n              }\n              element.textContent = translation;\n            }\n          } else if (\n            element.dataset.originalText &&\n            i18next.language === 'en'\n          ) {\n            // Восстанавливаем оригинальный текст для английского языка\n            element.textContent = element.dataset.originalText;\n          }\n        }\n      } catch (elementError) {\n        console.warn('Ошибка при обновлении элемента:', elementError, element);\n        // Продолжаем обновление других элементов\n      }\n    });\n  } catch (error) {\n    console.error('Ошибка обновления текстовых элементов:', error);\n  }\n};\n\nconst updateRTLSupport = () => {\n  try {\n    const rtlLanguages = ['ar'];\n    const direction = rtlLanguages.includes(i18next.language) ? 'rtl' : 'ltr';\n\n    // Устанавливаем направление текста на уровне документа\n    document.documentElement.dir = direction;\n    document.documentElement.setAttribute('lang', i18next.language);\n\n    // Добавляем/удаляем класс RTL для корневого элемента\n    if (direction === 'rtl') {\n      document.documentElement.classList.add('rtl');\n    } else {\n      document.documentElement.classList.remove('rtl');\n    }\n\n    // Обновляем кастомные классы на основных контейнерах, если они существуют\n    const mainContainers = [\n      '.header',\n      '.footer',\n      '.mobile-menu',\n      '.hero',\n      '.features',\n      '.about',\n      '.contact',\n      'main',\n    ];\n\n    mainContainers.forEach(selector => {\n      const container = document.querySelector(selector);\n      if (container) {\n        if (direction === 'rtl') {\n          container.classList.add('rtl');\n        } else {\n          container.classList.remove('rtl');\n        }\n      }\n    });\n  } catch (error) {\n    console.error('Ошибка обновления поддержки RTL:', error);\n  }\n};\n\n// Основная функция обновления контента\nconst updateAllContent = async () => {\n  try {\n    // Создаем массив промисов для параллельного выполнения\n    const updatePromises = [];\n\n    // Добавляем задачи обновления в очередь\n    updatePromises.push(\n      (async () => {\n        try {\n          updateTextElements();\n        } catch (e) {\n          console.error('Failed to update text elements:', e);\n        }\n      })()\n    );\n\n    updatePromises.push(\n      (async () => {\n        try {\n          updateRTLSupport();\n        } catch (e) {\n          console.error('Failed to update RTL support:', e);\n        }\n      })()\n    );\n\n    // Ожидаем завершения всех задач\n    await Promise.allSettled(updatePromises);\n\n    // Вызываем пользовательское событие для компонентов\n    try {\n      window.dispatchEvent(\n        new CustomEvent('languageChanged', {\n          detail: { language: i18next.language },\n        })\n      );\n    } catch (eventError) {\n      console.error('Error dispatching languageChanged event:', eventError);\n    }\n\n    console.log('Content update completed for language:', i18next.language);\n  } catch (error) {\n    console.error('Error in updateAllContent:', error);\n    throw error; // Передаем ошибку выше для обработки\n  }\n};\n\nexport async function setupI18n(options = {}) {\n  try {\n    console.log('Setting up i18n with options:', options);\n    console.log(\n      'Current localStorage userLanguage:',\n      localStorage.getItem('userLanguage')\n    );\n    console.log('Current BASE_URL:', import.meta.env.BASE_URL);\n\n    // Принимаем forcedLanguage из options\n    const { forcedLanguage } = options;\n\n    // Определяем сохраненный язык в localStorage\n    const savedLanguage = localStorage.getItem('userLanguage');\n    const savedValid =\n      savedLanguage && supportedLanguages.includes(savedLanguage);\n\n    // Определяем язык пользователя\n    const userLanguage =\n      forcedLanguage ||\n      (savedValid ? savedLanguage : null) ||\n      detectUserLanguage(supportedLanguages, 'en');\n\n    console.log('Selected user language:', userLanguage);\n\n    // Загружаем переводы с обработкой ошибок\n    let translations = {};\n    try {\n      translations = await loadAllTranslations(userLanguage);\n      console.log(`Загруженные переводы для ${userLanguage}:`, translations);\n    } catch (loadError) {\n      console.error(\n        `Ошибка загрузки переводов для ${userLanguage}:`,\n        loadError\n      );\n      // Продолжаем работу с пустыми переводами\n    }\n\n    // Загружаем запасные переводы с обработкой ошибок\n    let fallbackTranslations = null;\n    if (userLanguage !== 'en') {\n      try {\n        fallbackTranslations = await loadAllTranslations('en');\n      } catch (fallbackError) {\n        console.error('Ошибка загрузки запасных переводов:', fallbackError);\n        // Продолжаем работу без запасных переводов\n      }\n    }\n\n    const resources = {\n      [userLanguage]: { translation: translations },\n    };\n\n    if (fallbackTranslations) {\n      resources.en = { translation: fallbackTranslations };\n    }\n\n    // Инициализируем i18next с расширенным обнаружением ошибок и улучшенным fallback\n    await i18next.init({\n      lng: userLanguage,\n      fallbackLng: 'en',\n      resources,\n      interpolation: { escapeValue: false },\n      debug: import.meta.env.DEV, // Включаем дебаг только в режиме разработки\n      load: 'languageOnly',\n      returnNull: false, // Не возвращать null, если перевод не найден\n      returnEmptyString: false, // Не возвращать пустую строку, если перевод не найден\n      saveMissing: false, // Не сохранять отсутствующие ключи (на продакшене должно быть false)\n      keySeparator: '.', // Использовать точку как разделитель вложенности в ключах\n      nsSeparator: ':', // Использовать двоеточие как разделитель пространств имен\n      missingKeyHandler: (lng, ns, key, fallbackValue) => {\n        console.warn(\n          `Отсутствует ключ перевода: ${key} для языка ${lng} в пространстве ${ns}. Используется HTML-текст.`\n        );\n      },\n      parseMissingKeyHandler: key => {\n        // Возвращаем null вместо ключа, чтобы сохранить HTML-текст\n        return null;\n      },\n    });\n\n    // Сохраняем выбранный язык\n    localStorage.setItem('userLanguage', userLanguage);\n\n    // Создаем функцию обработки изменения языка, которая защищена от неожиданных ошибок\n    const safeLanguageChangeHandler = async language => {\n      try {\n        console.log('Language changed to:', language);\n        localStorage.setItem('userLanguage', language);\n        updateLanguageURL(language);\n\n        // Убираем очистку кэша цен, поскольку мы не используем функцию форматирования\n        // if (typeof clearPriceCache === 'function') {\n        //   clearPriceCache();\n        // }\n\n        await updateAllContent();\n      } catch (error) {\n        console.error('Error in language change handler:', error);\n        // Пытаемся выполнить хотя бы базовое обновление контента\n        try {\n          updateTextElements();\n          updateRTLSupport();\n        } catch (innerError) {\n          console.error('Failed to update basic content:', innerError);\n        }\n      }\n    };\n\n    // Привязываем обновление контента к смене языка с защитой от ошибок\n    i18next.on('languageChanged', safeLanguageChangeHandler);\n\n    // Экспортируем функцию обновления в window с обработкой ошибок\n    window.updateContent = async () => {\n      try {\n        await updateAllContent();\n      } catch (error) {\n        console.error('Error in window.updateContent:', error);\n        // Попытка восстановления\n        try {\n          updateTextElements();\n          updateRTLSupport();\n        } catch (innerError) {\n          console.error('Failed to recover content update:', innerError);\n        }\n      }\n    };\n\n    // Вызываем обновление контента сразу после инициализации\n    try {\n      await updateAllContent();\n    } catch (contentError) {\n      console.error('Error in initial content update:', contentError);\n      // Базовое обновление контента\n      try {\n        updateTextElements();\n        updateRTLSupport();\n      } catch (basicError) {\n        console.error('Failed to perform basic content update:', basicError);\n      }\n    }\n\n    return i18next;\n  } catch (error) {\n    console.error('Fatal error in setupI18n:', error);\n    // Создаем мини-версию i18next для защиты от сбоев\n    try {\n      // Если i18next не инициализирован, создадим базовую функциональность\n      if (!i18next.isInitialized) {\n        await i18next.init({\n          lng: 'en',\n          resources: {},\n          interpolation: { escapeValue: false },\n        });\n      }\n    } catch (fallbackError) {\n      console.error(\n        'Failed to create fallback i18next instance:',\n        fallbackError\n      );\n    }\n    return i18next;\n  }\n}\n\nexport function setupLanguageSelector() {\n  const selector = document.getElementById('language-selector');\n  if (!selector) return;\n\n  try {\n    // Создаем опции для селектора языков\n    if (selector.childElementCount === 0) {\n      const fragment = document.createDocumentFragment();\n\n      supportedLanguages.forEach(lang => {\n        const option = document.createElement('option');\n        option.value = lang;\n        option.textContent = languageNames[lang] || lang;\n        fragment.appendChild(option);\n      });\n\n      selector.appendChild(fragment);\n    }\n\n    // Устанавливаем текущий язык\n    selector.value = i18next.language;\n\n    // Обработчик изменения языка\n    selector.addEventListener('change', async function (event) {\n      event.preventDefault(); // Предотвращаем действие по умолчанию\n\n      try {\n        const newLanguage = event.target.value;\n        console.log(`Language selector changed to: ${newLanguage}`);\n\n        // Проверка, что селектор все еще в DOM\n        if (!document.contains(selector)) {\n          console.log('Language selector no longer in DOM, aborting');\n          return;\n        }\n\n        // Сохраняем выбор в localStorage перед перенаправлением\n        localStorage.setItem('userLanguage', newLanguage);\n\n        // Обновляем URL с перенаправлением на языковую версию\n        updateLanguageURL(newLanguage);\n\n        // Обратите внимание: После updateLanguageURL произойдет перенаправление,\n        // поэтому следующий код не будет выполнен в большинстве случаев\n      } catch (error) {\n        console.error('Error changing language:', error);\n        // В случае ошибки возвращаем старый язык, если селектор еще существует\n        if (document.contains(selector)) {\n          selector.value = i18next.language;\n        }\n      }\n    });\n  } catch (error) {\n    console.error('Error setting up language selector:', error);\n  }\n}\n","// Инициализация событий для хедера\nimport i18next from 'i18next';\n\nexport function initHeader() {\n  let isMenuOpen = false;\n  let isScrolled = false;\n  let isVisible = true;\n  let prevScrollPos = window.scrollY;\n  let scrollTimeout = null;\n\n  const header = document.querySelector('.header');\n  const burgerBtn = document.querySelector('.burger-btn');\n  const burgerLine = document.querySelector('.burger-line');\n  const mobileMenu = document.querySelector('.mobile-menu');\n  const menuLinks = document.querySelectorAll(\n    '.our-menu-link, .mobile-menu__link'\n  );\n\n  // Обработчик прокрутки страницы\n  function handleScroll() {\n    const currentScrollPos = window.scrollY;\n    const isScrolledDown = prevScrollPos < currentScrollPos;\n\n    if (scrollTimeout) {\n      clearTimeout(scrollTimeout);\n    }\n\n    if (currentScrollPos > 100) {\n      setHeaderVisibility(!isScrolledDown);\n    } else {\n      setHeaderVisibility(true);\n    }\n\n    prevScrollPos = currentScrollPos;\n    setHeaderScrolled(currentScrollPos > 0);\n\n    scrollTimeout = setTimeout(() => {\n      // Дополнительная логика при остановке прокрутки\n    }, 150);\n  }\n\n  // Открытие/закрытие мобильного меню\n  function toggleMenu() {\n    isMenuOpen = !isMenuOpen;\n    updateMenuState();\n  }\n\n  // Обновление состояния меню\n  function updateMenuState() {\n    if (isMenuOpen) {\n      header.classList.add('menu-open');\n      burgerBtn.setAttribute('aria-expanded', 'true');\n      burgerLine.classList.add('open');\n      mobileMenu.classList.add('open');\n      document.body.style.overflow = 'hidden';\n    } else {\n      header.classList.remove('menu-open');\n      burgerBtn.setAttribute('aria-expanded', 'false');\n      burgerLine.classList.remove('open');\n      mobileMenu.classList.remove('open');\n      document.body.style.overflow = 'unset';\n    }\n  }\n\n  // Установка состояния прокрутки хедера\n  function setHeaderScrolled(scrolled) {\n    isScrolled = scrolled;\n    if (scrolled) {\n      header.classList.add('scrolled');\n    } else {\n      header.classList.remove('scrolled');\n    }\n  }\n\n  // Установка видимости хедера\n  function setHeaderVisibility(visible) {\n    isVisible = visible;\n    if (visible) {\n      header.classList.add('visible');\n      header.classList.remove('hidden');\n    } else {\n      header.classList.add('hidden');\n      header.classList.remove('visible');\n    }\n  }\n\n  // Плавная прокрутка к секции\n  function smoothScrollToSection(e) {\n    e.preventDefault();\n    const href = e.currentTarget.getAttribute('href');\n    const targetId = href.replace('#', '');\n    const element = document.getElementById(targetId);\n\n    if (element) {\n      setHeaderVisibility(true);\n\n      setTimeout(() => {\n        const headerHeight = header.offsetHeight;\n        const elementPosition = element.getBoundingClientRect().top;\n        const offsetPosition = elementPosition + window.scrollY;\n\n        window.scrollTo({\n          top: offsetPosition,\n          behavior: 'smooth',\n        });\n\n        if (isMenuOpen) {\n          isMenuOpen = false;\n          updateMenuState();\n        }\n\n        window.history.replaceState(\n          null,\n          '',\n          `${window.location.pathname}${href}`\n        );\n\n        setTimeout(() => {\n          prevScrollPos = window.scrollY;\n        }, 100);\n      }, 50);\n    }\n  }\n\n  // Обработка хэша в URL при загрузке\n  function handleInitialHash() {\n    if (window.location.hash) {\n      const targetId = window.location.hash.replace('#', '');\n      const element = document.getElementById(targetId);\n\n      if (element) {\n        setTimeout(() => {\n          const headerHeight = header.offsetHeight;\n          const elementPosition = element.getBoundingClientRect().top;\n          const offsetPosition =\n            elementPosition + window.scrollY - headerHeight;\n\n          window.scrollTo({\n            top: offsetPosition,\n            behavior: 'smooth',\n          });\n        }, 100);\n      }\n    }\n  }\n\n  // Обработчик события смены языка\n  function handleLanguageChange(event) {\n    try {\n      // Проверка, что хедер все еще в DOM\n      const header = document.querySelector('.header');\n      if (!header) {\n        console.log(\n          'Header no longer in DOM, skipping language change handling'\n        );\n        return;\n      }\n\n      // Обновляем направление текста для языков с RTL\n      const rtlLanguages = ['ar'];\n      const currentLang = event?.detail?.language || i18next.language;\n\n      if (rtlLanguages.includes(currentLang)) {\n        header.classList.add('rtl');\n      } else {\n        header.classList.remove('rtl');\n      }\n\n      // Дополнительная логика при смене языка, если необходимо\n      console.log('Language changed in header to:', currentLang);\n\n      // Добавляем дополнительные классы для разных языков\n      // Удаляем все языковые классы\n      const supportedLanguages = [\n        'en',\n        'ru',\n        'ar',\n        'be',\n        'de',\n        'es',\n        'fr',\n        'it',\n        'ja',\n        'ko',\n        'nl',\n        'pt',\n        'tr',\n        'uk',\n      ];\n      supportedLanguages.forEach(lang => {\n        header.classList.remove(`lang-${lang}`);\n      });\n\n      // Добавляем класс для текущего языка\n      header.classList.add(`lang-${currentLang}`);\n\n      // Обновляем атрибуты доступности\n      const ariaLabel = header.querySelector('[aria-label]');\n      if (ariaLabel) {\n        const translatedLabel = i18next.t('header.aria-label.navigation');\n        if (\n          translatedLabel &&\n          translatedLabel !== 'header.aria-label.navigation'\n        ) {\n          ariaLabel.setAttribute('aria-label', translatedLabel);\n        }\n      }\n    } catch (error) {\n      console.error('Error handling language change in header:', error);\n    }\n  }\n\n  // Установка обработчиков событий\n  window.addEventListener('scroll', handleScroll);\n  window.addEventListener('resize', () => {\n    const isMobile = window.innerWidth <= 768;\n    if (!isMobile && isMenuOpen) {\n      isMenuOpen = false;\n      updateMenuState();\n    }\n  });\n\n  // Добавляем обработчик для события смены языка\n  window.addEventListener('languageChanged', handleLanguageChange);\n\n  // Обработчики для кнопки бургера\n  if (burgerBtn) {\n    burgerBtn.addEventListener('click', toggleMenu);\n  }\n\n  // Обработчики для ссылок в меню\n  menuLinks.forEach(link => {\n    link.addEventListener('click', smoothScrollToSection);\n  });\n\n  // Обработка хэша при загрузке\n  handleInitialHash();\n\n  // Проверяем текущий язык при инициализации\n  handleLanguageChange();\n\n  // Возвращаем функцию очистки\n  return function cleanup() {\n    window.removeEventListener('scroll', handleScroll);\n    window.removeEventListener('languageChanged', handleLanguageChange);\n    window.removeEventListener('resize', () => {});\n    if (burgerBtn) {\n      burgerBtn.removeEventListener('click', toggleMenu);\n    }\n    menuLinks.forEach(link => {\n      link.removeEventListener('click', smoothScrollToSection);\n    });\n  };\n}\n","// Модуль инициализации мобильного меню\nimport i18next from 'i18next';\n\nexport function initMobileMenu() {\n  // Находим существующее мобильное меню\n  const mobileMenu = document.querySelector('.mobile-menu');\n  if (!mobileMenu) {\n    console.error('Мобильное меню не найдено в DOM');\n    return;\n  }\n\n  // Находим кнопку закрытия в меню\n  const closeButton = mobileMenu.querySelector('.close-button');\n  if (!closeButton) {\n    console.error('Кнопка закрытия не найдена в мобильном меню');\n    return;\n  }\n\n  // Добавляем обработчик события для кнопки закрытия\n  closeButton.addEventListener('click', () => {\n    closeMobileMenu();\n  });\n\n  // Функция закрытия мобильного меню\n  function closeMobileMenu() {\n    mobileMenu.classList.remove('open');\n    // Сбрасываем состояние кнопки бургера\n    const burgerLine = document.querySelector('.burger-line');\n    if (burgerLine) burgerLine.classList.remove('open');\n    // Восстанавливаем прокрутку\n    document.body.style.overflow = 'unset';\n    // Обновляем состояние хедера\n    const header = document.querySelector('.header');\n    if (header) header.classList.remove('menu-open');\n    // Установим атрибут aria-expanded в false для кнопки бургера\n    const burgerBtn = document.querySelector('.burger-btn');\n    if (burgerBtn) burgerBtn.setAttribute('aria-expanded', 'false');\n  }\n\n  // Добавляем обработчики для всех ссылок меню для закрытия меню при клике\n  const menuLinks = mobileMenu.querySelectorAll('.mobile-menu__link');\n  menuLinks.forEach(link => {\n    link.addEventListener('click', () => {\n      // Небольшая задержка перед закрытием, чтобы пользователь видел эффект нажатия\n      setTimeout(() => {\n        closeMobileMenu();\n      }, 150);\n    });\n  });\n\n  // Добавляем обработчик клика на фон меню для закрытия\n  const menuBackground = mobileMenu.querySelector('.mobile-menu__background');\n  if (menuBackground) {\n    menuBackground.addEventListener('click', () => {\n      closeMobileMenu();\n    });\n  }\n\n  // Добавляем анимацию появления иконок при открытии меню\n  function setupIconAnimations() {\n    const icons = mobileMenu.querySelectorAll('.mobile-menu__icon');\n    icons.forEach((icon, index) => {\n      // Устанавливаем начальную прозрачность и смещение\n      icon.style.opacity = '0';\n      icon.style.transform = 'translateX(-20px)';\n\n      // Добавляем обработчик для анимации при открытии меню\n      const observer = new MutationObserver(mutations => {\n        mutations.forEach(mutation => {\n          if (mutation.attributeName === 'class') {\n            const isOpen = mobileMenu.classList.contains('open');\n            if (isOpen) {\n              // Анимируем появление иконок с задержкой для каждой следующей\n              setTimeout(() => {\n                icon.style.transition = 'all 0.4s ease';\n                icon.style.opacity = '1';\n                icon.style.transform = 'translateX(0)';\n              }, 100 + index * 70);\n            } else {\n              // Сбрасываем стили при закрытии\n              icon.style.opacity = '0';\n              icon.style.transform = 'translateX(-20px)';\n            }\n          }\n        });\n      });\n\n      observer.observe(mobileMenu, { attributes: true });\n    });\n  }\n\n  // Обработчик события смены языка\n  function handleLanguageChange(event) {\n    try {\n      // Проверка, что мобильное меню все еще в DOM\n      const mobileMenu = document.querySelector('.mobile-menu');\n      if (!mobileMenu) {\n        console.log(\n          'Mobile menu no longer in DOM, skipping language change handling'\n        );\n        return;\n      }\n\n      // Обновляем направление текста для языков с RTL\n      const rtlLanguages = ['ar'];\n      const currentLang = event?.detail?.language || i18next.language;\n\n      if (rtlLanguages.includes(currentLang)) {\n        mobileMenu.classList.add('rtl');\n\n        // Дополнительные настройки для RTL, если требуются\n        const menuItems = mobileMenu.querySelectorAll('.mobile-menu__item');\n        menuItems.forEach(item => {\n          item.classList.add('rtl');\n        });\n      } else {\n        mobileMenu.classList.remove('rtl');\n\n        // Удаление RTL классов с элементов меню\n        const menuItems = mobileMenu.querySelectorAll('.mobile-menu__item');\n        menuItems.forEach(item => {\n          item.classList.remove('rtl');\n        });\n      }\n\n      console.log('Language changed in mobile menu to:', currentLang);\n\n      // Добавляем дополнительные классы для разных языков\n      // Удаляем все языковые классы\n      const supportedLanguages = [\n        'en',\n        'ru',\n        'ar',\n        'be',\n        'de',\n        'es',\n        'fr',\n        'it',\n        'ja',\n        'ko',\n        'nl',\n        'pt',\n        'tr',\n        'uk',\n      ];\n      supportedLanguages.forEach(lang => {\n        mobileMenu.classList.remove(`lang-${lang}`);\n      });\n\n      // Добавляем класс для текущего языка\n      mobileMenu.classList.add(`lang-${currentLang}`);\n\n      // Обновляем атрибуты доступности\n      const closeButton = mobileMenu.querySelector('.close-button');\n      if (closeButton) {\n        const translatedLabel = i18next.t('mobilemenu.close');\n        if (translatedLabel && translatedLabel !== 'mobilemenu.close') {\n          closeButton.setAttribute('aria-label', translatedLabel);\n        }\n      }\n    } catch (error) {\n      console.error('Error handling language change in mobile menu:', error);\n    }\n  }\n\n  // Добавляем обработчик для события смены языка\n  window.addEventListener('languageChanged', handleLanguageChange);\n\n  // Запускаем настройку анимации\n  setupIconAnimations();\n\n  // Проверяем текущий язык при инициализации\n  handleLanguageChange();\n\n  console.log('Мобильное меню с иконками инициализировано');\n\n  // Возвращаем функцию очистки\n  return function cleanup() {\n    if (closeButton) {\n      closeButton.removeEventListener('click', closeMobileMenu);\n    }\n\n    menuLinks.forEach(link => {\n      link.removeEventListener('click', () => {});\n    });\n\n    if (menuBackground) {\n      menuBackground.removeEventListener('click', closeMobileMenu);\n    }\n\n    window.removeEventListener('languageChanged', handleLanguageChange);\n  };\n}\n","/**\n * Этот файл сохранен, но упрощен.\n * Поскольку блок с ценами остался в HTML, но без необходимости форматирования,\n * мы оставляем базовую структуру, но упрощаем функции.\n */\n\n// Пустой кэш для совместимости со старым кодом\nconst priceFormatCache = {};\n\n/**\n * Пустая функция для совместимости со старым кодом.\n * Теперь функция просто возвращает переданные значения без обработки.\n * @param {string} priceType - Тип цены\n * @returns {string} - Значение по умолчанию\n */\nexport const getLocalizedPrice = priceType => {\n  // Функция больше не выполняет активного форматирования\n  // Просто возвращаем пустую строку для совместимости\n  return '';\n};\n\n/**\n * Очищает кэш форматированных цен.\n * Пустая функция для обратной совместимости.\n */\nexport const clearPriceCache = () => {\n  // Пустая функция для обратной совместимости\n};\n","/**\n * @fileoverview Hero section initialization module\n * @description Содержит функции для инициализации секции Hero, управления изображениями,\n * адаптивности и обработки событий кнопок.\n */\n\nimport { getLocalizedPrice } from './utils/priceFormatter';\n\n/**\n * Инициализирует секцию Hero на странице.\n * Настраивает изображения, обработку событий загрузки, адаптивность и анимации.\n * @returns {Function} Функция очистки для удаления обработчиков событий и наблюдателей\n */\nexport function initHero() {\n  // DOM-элементы\n  const heroSection = document.querySelector('.hero');\n  const heroImage = document.querySelector('.hero__console-img');\n  const heroContent = document.querySelector('.hero__content');\n  const desktopDescription = document.querySelector(\n    '.hero__description--desktop'\n  );\n  const mobileDescription = document.querySelector(\n    '.hero__description--mobile'\n  );\n  const heroPricing = document.querySelector('.hero__pricing');\n  const buyButton = document.getElementById('buy-button');\n  const moreDetailsButton = document.getElementById('more-details-button');\n  const currentPrice = document.querySelector('.hero__current-price');\n  const originalPrice = document.querySelector('.hero__original-price');\n  const discountBadge = document.querySelector('.hero__discount-badge');\n\n  // Хранение ссылки на обсервер для корректного удаления\n  let contentObserver = null;\n  let resizeTimeout;\n  let languageChangeHandler;\n\n  /**\n   * Обновляет цены на основе текущего языка\n   * @private\n   */\n  function updatePrices() {\n    try {\n      if (!document.body.contains(heroSection)) {\n        console.warn('Hero section removed from DOM, skipping price update');\n        return;\n      }\n\n      if (currentPrice) {\n        const formattedCurrentPrice = getLocalizedPrice('current');\n        if (formattedCurrentPrice) {\n          currentPrice.innerHTML = formattedCurrentPrice;\n        }\n      }\n\n      if (originalPrice) {\n        const formattedOriginalPrice = getLocalizedPrice('original');\n        if (formattedOriginalPrice) {\n          originalPrice.textContent = formattedOriginalPrice;\n        }\n      }\n\n      if (discountBadge) {\n        const formattedDiscount = getLocalizedPrice('discount');\n        if (formattedDiscount) {\n          discountBadge.textContent = formattedDiscount;\n        }\n      }\n    } catch (error) {\n      console.error('Ошибка при обновлении цен:', error);\n    }\n  }\n\n  /**\n   * Оптимизированная настройка изображения секции Hero.\n   * Используется предварительная загрузка изображения для ускорения отображения\n   * @private\n   */\n  function setupHeroImage() {\n    if (!heroImage || !heroSection) return;\n\n    try {\n      // Добавляем резервный слот для изображения\n      if (document.body.contains(heroSection)) {\n        heroSection.classList.add('hero--loading');\n      }\n\n      // Обработка загрузки изображения\n      if (heroImage.complete) {\n        // Изображение уже загружено (из кэша)\n        if (document.body.contains(heroSection)) {\n          heroSection.classList.remove('hero--loading');\n          heroSection.classList.add('hero--loaded');\n        }\n      } else {\n        // Определяем обработчики событий\n        heroImage.onload = () => {\n          if (document.body.contains(heroSection)) {\n            heroSection.classList.remove('hero--loading');\n            heroSection.classList.add('hero--loaded');\n          }\n        };\n\n        heroImage.onerror = () => {\n          console.error('Не удалось загрузить изображение:', heroImage.src);\n          // В любом случае показываем секцию\n          if (document.body.contains(heroSection)) {\n            heroSection.classList.remove('hero--loading');\n            heroSection.classList.add('hero--loaded');\n          }\n        };\n\n        // Устанавливаем атрибуты для оптимизации загрузки\n        heroImage.decoding = 'async';\n        heroImage.loading = 'eager'; // Гарантирует немедленную загрузку для LCP\n\n        // Добавляем низкокачественный placeholder если необходимо\n        // const imgWrapper = heroImage.parentElement;\n        // if (imgWrapper && !imgWrapper.querySelector('.hero__placeholder')) {\n        //   const placeholder = document.createElement('div');\n        //   placeholder.className = 'hero__placeholder';\n        //   imgWrapper.insertBefore(placeholder, heroImage);\n        // }\n      }\n    } catch (error) {\n      console.error('Ошибка при настройке изображения в Hero секции:', error);\n      // В случае ошибки все равно показываем секцию\n      if (document.body.contains(heroSection)) {\n        heroSection.classList.remove('hero--loading');\n        heroSection.classList.add('hero--loaded');\n      }\n    }\n  }\n\n  /**\n   * Адаптирует контент для разных размеров экрана.\n   * Переключает между мобильной и десктопной версиями описания.\n   * @private\n   */\n  function adjustForViewport() {\n    try {\n      if (\n        !desktopDescription ||\n        !mobileDescription ||\n        !document.body.contains(desktopDescription) ||\n        !document.body.contains(mobileDescription)\n      ) {\n        return;\n      }\n\n      const isDesktop = window.innerWidth > 992;\n\n      desktopDescription.style.display = isDesktop ? 'block' : 'none';\n      mobileDescription.style.display = isDesktop ? 'none' : 'block';\n    } catch (error) {\n      console.error('Ошибка при адаптации контента для разных экранов:', error);\n    }\n  }\n\n  /**\n   * Настраивает анимацию появления контента при прокрутке.\n   * Использует IntersectionObserver для определения видимости элемента.\n   * @private\n   */\n  function setupContentAnimation() {\n    if (!heroContent) return;\n\n    try {\n      // Удаляем предыдущий observer если он существует\n      if (contentObserver) {\n        contentObserver.disconnect();\n        contentObserver = null;\n      }\n\n      // Оптимизированная версия: сразу анимируем контент для LCP\n      if (\n        heroContent.isConnected &&\n        !heroContent.classList.contains('animate-in')\n      ) {\n        // Добавляем минимальную задержку для более плавного рендеринга\n        setTimeout(() => {\n          heroContent.classList.add('animate-in');\n        }, 50);\n      }\n\n      // Только для нижней части страницы используем IntersectionObserver\n      const nonCriticalElements =\n        document.querySelectorAll('.animate-on-scroll');\n      if (nonCriticalElements.length > 0 && 'IntersectionObserver' in window) {\n        contentObserver = new IntersectionObserver(\n          entries => {\n            entries.forEach(entry => {\n              if (entry.isIntersecting && entry.target?.isConnected) {\n                entry.target.classList.add('animate-in');\n                // Отключаем наблюдение после анимации\n                contentObserver?.unobserve(entry.target);\n              }\n            });\n          },\n          { threshold: 0.1 }\n        );\n\n        // Наблюдаем за некритичными элементами\n        nonCriticalElements.forEach(element => {\n          if (element.isConnected) {\n            contentObserver.observe(element);\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Ошибка при настройке анимации контента:', error);\n    }\n  }\n\n  /**\n   * Настраивает обработчики событий для кнопок секции.\n   * @private\n   */\n  function setupButtonHandlers() {\n    try {\n      // Обработчик для кнопки покупки\n      if (buyButton) {\n        buyButton.addEventListener('click', handleBuyButtonClick);\n      }\n\n      // Обработчик для кнопки \"More details\"\n      if (moreDetailsButton) {\n        moreDetailsButton.addEventListener('click', handleMoreDetailsClick);\n      }\n    } catch (error) {\n      console.error('Ошибка при настройке обработчиков кнопок:', error);\n    }\n  }\n\n  /**\n   * Настраивает обработчики событий для смены языка\n   * @private\n   */\n  function setupLanguageChangeListener() {\n    try {\n      // Обработчик изменения языка с дебаунсингом\n      languageChangeHandler = event => {\n        try {\n          // Проверяем, что секция все еще в DOM\n          if (!document.body.contains(heroSection)) {\n            console.warn(\n              'Hero section removed from DOM, skipping language change handling'\n            );\n            return;\n          }\n\n          console.log(\n            'Hero секция получила событие изменения языка:',\n            event.detail\n          );\n\n          // Используем requestAnimationFrame для оптимизации производительности\n          requestAnimationFrame(() => {\n            updatePrices();\n\n            // Если язык является RTL, добавляем соответствующий класс\n            const rtlLanguages = ['ar'];\n            const currentLang = event?.detail?.language || 'en';\n\n            if (rtlLanguages.includes(currentLang)) {\n              heroSection.classList.add('rtl');\n            } else {\n              heroSection.classList.remove('rtl');\n            }\n          });\n        } catch (error) {\n          console.error('Error in hero language change handler:', error);\n        }\n      };\n\n      // Слушаем событие смены языка\n      window.addEventListener('languageChanged', languageChangeHandler);\n    } catch (error) {\n      console.error('Ошибка при настройке слушателя смены языка:', error);\n    }\n  }\n\n  /**\n   * Обработчик клика по кнопке Buy\n   * @private\n   */\n  function handleBuyButtonClick() {\n    try {\n      window.open(\n        'https://www.aliexpress.com/item/1005007171465465.html',\n        '_blank',\n        'noopener,noreferrer'\n      );\n    } catch (error) {\n      console.error('Ошибка при обработке клика по кнопке Buy:', error);\n    }\n  }\n\n  /**\n   * Обрабатывает клик по кнопке \"More details\".\n   * Выполняет плавную прокрутку к секции features.\n   * @param {Event} e - Событие клика\n   * @private\n   */\n  function handleMoreDetailsClick(e) {\n    try {\n      e.preventDefault();\n      const featuresSection = document.getElementById('features');\n\n      if (!featuresSection) {\n        window.location.hash = 'features';\n        return;\n      }\n\n      // Получаем позицию секции без учета высоты хедера\n      const elementPosition = featuresSection.getBoundingClientRect().top;\n      const offsetPosition = elementPosition + window.scrollY;\n\n      // Плавная прокрутка к секции features\n      window.scrollTo({\n        top: offsetPosition,\n        behavior: 'smooth',\n      });\n\n      // Обновляем URL без перезагрузки страницы\n      window.history.replaceState(\n        null,\n        '',\n        `${window.location.pathname}#features`\n      );\n    } catch (error) {\n      console.error(\n        'Ошибка при обработке клика по кнопке More Details:',\n        error\n      );\n    }\n  }\n\n  /**\n   * Функция очистки слушателей и наблюдателей\n   * @private\n   */\n  function cleanup() {\n    try {\n      // Отключаем IntersectionObserver\n      if (contentObserver) {\n        contentObserver.disconnect();\n      }\n\n      // Очищаем таймаут resize\n      clearTimeout(resizeTimeout);\n      window.removeEventListener('resize', handleResize);\n\n      // Удаляем обработчик смены языка\n      if (languageChangeHandler) {\n        window.removeEventListener('languageChanged', languageChangeHandler);\n      }\n\n      // Удаляем обработчики кнопок\n      if (buyButton) {\n        buyButton.removeEventListener('click', handleBuyButtonClick);\n      }\n\n      if (moreDetailsButton) {\n        moreDetailsButton.removeEventListener('click', handleMoreDetailsClick);\n      }\n    } catch (error) {\n      console.error('Ошибка при очистке ресурсов Hero секции:', error);\n    }\n  }\n\n  // Оптимизированный обработчик resize с дебаунсингом\n  function handleResize() {\n    if (resizeTimeout) {\n      clearTimeout(resizeTimeout);\n    }\n    resizeTimeout = setTimeout(() => {\n      requestAnimationFrame(adjustForViewport);\n    }, 200);\n  }\n\n  // Инициализация компонента с приоритетами\n  try {\n    // Первый этап: загрузка изображений и назначение обработчиков\n    setupHeroImage();\n    setupButtonHandlers();\n\n    // Второй этап: адаптация контента под размер экрана\n    adjustForViewport();\n\n    // Третий этап: анимации и прочее\n    requestAnimationFrame(() => {\n      setupContentAnimation();\n      updatePrices(); // Обновляем цены при первой загрузке\n    });\n\n    // Четвертый этап: настройка слушателей событий\n    setTimeout(() => {\n      setupLanguageChangeListener();\n      window.addEventListener('resize', handleResize);\n    }, 100);\n  } catch (error) {\n    console.error('Ошибка при инициализации Hero секции:', error);\n  }\n\n  // Возвращаем функцию очистки\n  return cleanup;\n}\n","// modalabout.js с поддержкой i18n\nimport i18next from 'i18next';\n// Удаляем импорт getLocalizedPrice\n// import { getLocalizedPrice } from './utils/priceFormatter.js';\n\n// Фабричная функция для создания модального окна\nexport function createModalAbout(parentElement) {\n  let modalElement = null;\n  let feature = null;\n  let isOpen = false;\n  let currentImageIndex = 0;\n  let colorImagesInterval = null;\n\n  // Функция для получения локализованного текста\n  const getLocalizedText = (key, defaultText) => {\n    try {\n      const translation = i18next.t(key);\n      return translation !== key ? translation : defaultText;\n    } catch (error) {\n      console.warn(`Error getting translation for ${key}:`, error);\n      return defaultText;\n    }\n  };\n\n  // Создаем функцию, которая возвращает статический текст с поддержкой переводов\n  const getStaticDiscountText = type => {\n    try {\n      const currentLang = i18next.language;\n\n      // Словарь с переводами слова \"Скидка\" для разных языков\n      const discountTranslations = {\n        en: 'Discount',\n        ru: 'Скидка',\n        ar: 'خصم',\n        be: 'Зніжка',\n        de: 'Rabatt',\n        es: 'Descuento',\n        fr: 'Réduction',\n        it: 'Sconto',\n        ja: '割引',\n        ko: '할인',\n        nl: 'Korting',\n        pt: 'Desconto',\n        tr: 'İndirim',\n        uk: 'Знижка',\n      };\n\n      // Проверяем наличие перевода в i18next\n      if (type === 'current') {\n        // Пытаемся найти перевод для текущего языка\n        const translation = i18next.t('hero.pricing.current', {\n          defaultValue: null,\n        });\n        // Если перевод найден, используем его\n        if (translation && translation !== 'hero.pricing.current') {\n          return translation;\n        }\n\n        // Если перевод не найден в i18next, используем наш словарь переводов\n        return discountTranslations[currentLang] || discountTranslations.en; // Возвращаем английский вариант, если язык не найден\n      }\n\n      return '';\n    } catch (error) {\n      console.warn('Error getting static discount text:', error);\n\n      // Запасные значения в случае ошибки\n      if (type === 'current') return 'Discount';\n      if (type === 'original') return 'Discount -29%';\n      if (type === 'discount') return '-68%';\n      return '';\n    }\n  };\n\n  // Функция для проверки RTL направления\n  function isRTL() {\n    return document.documentElement.dir === 'rtl';\n  }\n\n  // Добавляем базовые стили для модального окна\n  const addStyles = () => {\n    const styleId = 'modal-about-styles';\n    if (document.getElementById(styleId)) return;\n\n    // В модификации удалены встроенные стили - они перенесены в отдельный CSS файл\n    // Поэтому нет необходимости здесь добавлять стили динамически\n    console.log('Проверка стилей модального окна');\n  };\n\n  // Добавляем стили\n  addStyles();\n\n  // Обработчик клавиши Escape\n  function handleEscPress(e) {\n    if (e.key === 'Escape' && isOpen) {\n      close();\n    }\n  }\n\n  // Создание DOM элемента модального окна\n  function createModalElement() {\n    const modalDiv = document.createElement('div');\n    modalDiv.className = 'modal-about-overlay';\n    modalDiv.setAttribute('role', 'dialog');\n    modalDiv.setAttribute('aria-modal', 'true');\n    modalDiv.setAttribute('tabindex', '-1');\n    modalDiv.style.display = 'none';\n\n    modalDiv.addEventListener('click', close);\n\n    parentElement.appendChild(modalDiv);\n    return modalDiv;\n  }\n\n  // Функция updateModalRTLStyles тоже должна быть обновлена\n  function updateModalRTLStyles() {\n    if (!modalElement) return;\n\n    const rtlDirection = isRTL();\n\n    if (rtlDirection) {\n      // Находим и настраиваем заголовок\n      const header = modalElement.querySelector('.modal-about-header');\n      if (header) {\n        // Переместить заголовок в правый угол\n        header.style.flexDirection = 'row-reverse';\n        header.style.justifyContent = 'flex-end'; // Выравнивание по правому краю\n        header.style.paddingRight = '16px';\n        header.style.paddingLeft = '50px'; // Отступ для крестика\n\n        // Настраиваем иконку\n        const iconWrapper = header.querySelector('.modal-about-icon-wrapper');\n        if (iconWrapper) {\n          iconWrapper.style.marginLeft = '0';\n          iconWrapper.style.marginRight = '0';\n        }\n\n        // Настраиваем заголовок\n        const title = header.querySelector('.modal-about-title');\n        if (title) {\n          title.style.textAlign = 'right';\n          title.style.marginRight = '17px'; // Отступ между иконкой и текстом\n        }\n      }\n\n      // Кнопка закрытия (крестик)\n      const closeButton = modalElement.querySelector('.modal-about-close');\n      if (closeButton) {\n        closeButton.style.right = 'auto';\n        closeButton.style.left = '16px';\n      }\n    }\n  }\n  // Рендер медиа-контента (изображение, видео или карусель)\n  function renderMedia() {\n    if (!feature) return '';\n\n    // Обработка карусели цветов\n    if (\n      feature.title ===\n        getLocalizedText('about.cards.4.title', 'Extensive color selection') &&\n      feature.colorImages\n    ) {\n      return `\n        <img\n          src=\"${feature.colorImages[currentImageIndex]}\"\n          alt=\"${getLocalizedText(\n            `about.cards.4.imageAlt.${currentImageIndex + 1}`,\n            `R36S Color Variant ${currentImageIndex + 1}`\n          )}\"\n          class=\"modal-about-image\"\n          loading=\"lazy\"\n          width=\"400\" \n          height=\"400\"\n          onerror=\"this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBhbGlnbm1lbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0iI2ZmZiI+Q29sb3IgVmFyaWFudCBJbWFnZTwvdGV4dD48L3N2Zz4=';\"\n        />\n      `;\n    }\n\n    // Обработка видео или GIF в videoUrl\n    if (feature.videoUrl) {\n      const fileUrl = feature.videoUrl.toString().toLowerCase();\n      const isMp4 = fileUrl.endsWith('.mp4');\n\n      // Обработка MP4 (отображаем как видео без элементов управления)\n      if (isMp4) {\n        return `\n        <div class=\"gif-container\">\n          <video\n            class=\"modal-about-image\"\n            autoplay\n            muted\n            loop\n            playsInline\n            width=\"400\" \n            height=\"400\"\n          >\n            <source src=\"${feature.videoUrl}\" type=\"video/mp4\" />\n          </video>\n        </div>\n        `;\n      }\n\n      // Обработка GIF\n      return `\n        <img\n          src=\"${feature.videoUrl}\"\n          alt=\"${\n            feature.imageAlt ||\n            getLocalizedText(\n              'about.modal.imageAlt.default',\n              'Feature animation'\n            )\n          }\"\n          class=\"modal-about-image\"\n          width=\"400\" \n          height=\"400\"\n          loading=\"lazy\"\n          onerror=\"this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBhbGlnbm1lbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0iI2ZmZiI+R0lGIEFuaW1hdGlvbjwvdGV4dD48L3N2Zz4=';\"\n        />\n      `;\n    }\n\n    // Обработка статичного изображения или MP4 в imageUrl\n    if (feature.imageUrl) {\n      const fileUrl = feature.imageUrl.toString().toLowerCase();\n      const isMp4 = fileUrl.endsWith('.mp4');\n\n      // Обработка MP4 в imageUrl (отображаем как видео без элементов управления)\n      if (isMp4) {\n        return `\n        <div class=\"gif-container\">\n          <video\n            class=\"modal-about-image\"\n            autoplay\n            muted\n            loop\n            playsInline\n            width=\"400\" \n            height=\"400\"\n          >\n            <source src=\"${feature.imageUrl}\" type=\"video/mp4\" />\n          </video>\n        </div>\n        `;\n      }\n\n      // Обработка обычного изображения\n      return `\n        <img\n          src=\"${feature.imageUrl}\"\n          alt=\"${\n            feature.imageAlt ||\n            getLocalizedText('about.modal.imageAlt.default', 'Feature image')\n          }\"\n          class=\"modal-about-image\"\n          width=\"400\" \n          height=\"400\"\n          loading=\"lazy\"\n          onerror=\"this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzMzMyIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBhbGlnbm1lbnQtYmFzZWxpbmU9Im1pZGRsZSIgZmlsbD0iI2ZmZiI+SW1hZ2U8L3RleHQ+PC9zdmc+=';\"\n        />\n      `;\n    }\n\n    // Запасной вариант если ни imageUrl, ни videoUrl не указаны\n    return `\n      <div class=\"modal-about-image\" style=\"background-color: #333; display: flex; align-items: center; justify-content: center; color: white; font-size: 18px;\">\n        ${\n          feature.imageAlt ||\n          getLocalizedText('about.modal.imageAlt.default', 'Feature Image')\n        }\n      </div>\n    `;\n  }\n\n  // Настройка автоматической смены изображений цветов\n  function setupColorImagesRotation() {\n    if (\n      feature?.title ===\n        getLocalizedText('about.cards.4.title', 'Extensive color selection') &&\n      feature.colorImages\n    ) {\n      // Очистка существующего интервала\n      if (colorImagesInterval) {\n        clearInterval(colorImagesInterval);\n      }\n\n      // Настройка нового интервала для смены изображений\n      colorImagesInterval = setInterval(() => {\n        currentImageIndex =\n          currentImageIndex === feature.colorImages.length - 1\n            ? 0\n            : currentImageIndex + 1;\n\n        // Обновление источника изображения\n        const imageElement = modalElement.querySelector('.modal-about-image');\n        if (imageElement) {\n          imageElement.src = feature.colorImages[currentImageIndex];\n          imageElement.alt = getLocalizedText(\n            `about.cards.4.imageAlt.${currentImageIndex + 1}`,\n            `R36S Color Variant ${currentImageIndex + 1}`\n          );\n        }\n      }, 1000);\n    }\n  }\n\n  // Обновление содержимого модального окна с добавлением структурированных данных\n  function updateModalContent() {\n    if (!modalElement || !feature) return;\n\n    // Создаем структурированные данные для текущей функции\n    const structuredData = {\n      '@context': 'https://schema.org',\n      '@type': 'ItemPage',\n      mainEntity: {\n        '@type': 'Product',\n        name: 'R36S Handheld Game Console',\n        description: feature.fullDescription,\n        image:\n          feature.imageUrl ||\n          (feature.colorImages ? feature.colorImages[0] : ''),\n        offers: {\n          '@type': 'Offer',\n          price: '35.48',\n          priceCurrency: 'USD',\n          url: 'https://www.aliexpress.com/item/1005007171465465.html',\n        },\n        category: 'Video Game Console',\n        feature: feature.title,\n      },\n    };\n\n    // Добавляем FAQ (если есть вопросы)\n    if (feature.id === 1) {\n      // Для демонстрации добавляем FAQ только для первого элемента\n      structuredData.mainEntity.faqPage = {\n        '@type': 'FAQPage',\n        mainEntity: [\n          {\n            '@type': 'Question',\n            name: getLocalizedText(\n              'about.faq.question',\n              'How many games are included in the R36S console?'\n            ),\n            acceptedAnswer: {\n              '@type': 'Answer',\n              text: getLocalizedText(\n                'about.faq.answer',\n                'The R36S console includes over 15,000 classic retro games from various platforms.'\n              ),\n            },\n          },\n        ],\n      };\n    }\n\n    // JSON-LD для структурированных данных\n    const structuredDataScript = `\n          <script type=\"application/ld+json\">\n            ${JSON.stringify(structuredData)}\n          </script>\n        `;\n\n    // Получаем локализованные тексты для модального окна\n    const buyNowText = getLocalizedText('about.modal.buyNow', 'BUY NOW');\n    const discountText = getLocalizedText('about.modal.discount', '-68%');\n\n    // Проверяем направление текста для RTL-поддержки\n    const rtlDirection = isRTL();\n\n    // Адаптируем текст кнопки в зависимости от направления\n    const buttonContent = rtlDirection\n      ? `<span class=\"modal-about-button-shine\"></span>\n        <span class=\"modal-about-button-text\">${discountText} ${buyNowText}</span>\n        <span class=\"modal-about-button-pulse\"></span>`\n      : `<span class=\"modal-about-button-pulse\"></span>\n        <span class=\"modal-about-button-text\">${buyNowText} ${discountText}</span>\n        <span class=\"modal-about-button-shine\"></span>`;\n\n    // Заменяем локализованные цены на статический текст о скидках\n    const currentPrice = getStaticDiscountText('current');\n    const originalPrice = getStaticDiscountText('original');\n\n    // КЛЮЧЕВАЯ МОДИФИКАЦИЯ: Изменяем структуру заголовка для RTL версии\n    const headerContent = rtlDirection\n      ? `<div class=\"modal-about-header\" style=\"flex-direction: row-reverse; justify-content: flex-start; padding-left: 50px;\">\n       <h3 class=\"modal-about-title\" itemprop=\"name\" data-i18n=\"${feature.i18nKey}.title\" style=\"text-align: right; margin-right: 17px;\">${feature.title}</h3>\n       <div class=\"modal-about-icon-wrapper\" aria-hidden=\"true\">${feature.icon}</div>\n     </div>`\n      : `<div class=\"modal-about-header\">\n       <div class=\"modal-about-icon-wrapper\" aria-hidden=\"true\">${feature.icon}</div>\n       <h3 class=\"modal-about-title\" itemprop=\"name\" data-i18n=\"${feature.i18nKey}.title\">${feature.title}</h3>\n     </div>`;\n\n    modalElement.innerHTML = `\n          ${structuredDataScript}\n          <div class=\"modal-about-content\" itemscope itemtype=\"https://schema.org/Product\">\n            <meta itemprop=\"name\" content=\"R36S Handheld Game Console\" />\n            <meta itemprop=\"description\" content=\"${\n              feature.title\n            } for R36S console\" />\n            <meta itemprop=\"sku\" content=\"R36S-${feature.id}\" />\n            <meta itemprop=\"brand\" content=\"R36S\" />\n            <meta itemprop=\"productID\" content=\"R36S-F${feature.id}\" />\n            \n            <button class=\"modal-about-close\" aria-label=\"${getLocalizedText(\n              'about.modal.close',\n              'Close modal'\n            )}\">\n              <svg\n                width=\"24\"\n                height=\"24\"\n                viewBox=\"0 0 24 24\"\n                fill=\"none\"\n                stroke=\"currentColor\"\n                stroke-width=\"2\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                aria-hidden=\"true\"\n              >\n                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n              </svg>\n            </button>\n            \n            ${headerContent}\n\n            <div class=\"modal-about-body\">\n              <div class=\"modal-about-media-container\" itemprop=\"image\">\n                ${renderMedia()}\n              </div>\n              \n              <div class=\"modal-about-content-container\">\n                <div class=\"modal-about-stats\" itemprop=\"offers\" itemscope itemtype=\"https://schema.org/Offer\">\n                  <div class=\"modal-about-price-wrapper\">\n                    <span class=\"modal-about-original-price\" data-i18n=\"hero.pricing.original\">${originalPrice}</span>\n                    <span class=\"modal-about-current-price\" data-i18n=\"hero.pricing.current\" itemprop=\"price\" content=\"35.48\">\n                      ${currentPrice}\n                      <meta itemprop=\"priceCurrency\" content=\"USD\" />\n                    </span>\n                    <meta itemprop=\"availability\" content=\"https://schema.org/InStock\" />\n                    <meta itemprop=\"url\" content=\"https://www.aliexpress.com/item/1005007171465465.html\" />\n                  </div>\n\n                  <a\n                    href=\"https://www.aliexpress.com/item/1005007171465465.html\"\n                    class=\"modal-about-button modal-about-button--primary\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    itemprop=\"url\"\n                  >\n                    ${buttonContent}\n                  </a>\n                </div>\n\n                <div class=\"modal-about-description\" itemprop=\"description\" data-i18n=\"${\n                  feature.i18nKey\n                }.fullDescription\">\n                  ${feature.fullDescription}\n                </div>\n              </div>\n            </div>\n          </div>\n        `;\n\n    // Применяем дополнительные стили для RTL режима\n    updateModalRTLStyles();\n\n    // Настройка кнопки закрытия\n    const closeButton = modalElement.querySelector('.modal-about-close');\n    if (closeButton) {\n      closeButton.addEventListener('click', close);\n    }\n\n    // Обработка всплытия событий для контента модального окна\n    const modalContent = modalElement.querySelector('.modal-about-content');\n    if (modalContent) {\n      modalContent.addEventListener('click', e => e.stopPropagation());\n    }\n  }\n\n  // Открытие модального окна с поддержкой истории браузера\n  function open(featureData) {\n    feature = featureData;\n    // Предзагрузка медиа файла для открываемой функции\n    // Добавьте атрибут type для изображений\n    if (!modalElement) {\n      modalElement = createModalElement();\n    }\n\n    // Обновление содержимого модального окна\n    updateModalContent();\n\n    // Сохраняем текущий URL для возврата при закрытии\n    const currentUrl = window.location.href;\n\n    // Добавляем параметр в URL для поддержки истории\n    const newUrl = new URL(currentUrl);\n    newUrl.searchParams.set('feature', feature.id);\n    window.history.pushState({ featureId: feature.id }, '', newUrl);\n\n    // Отображение модального окна\n    modalElement.style.display = 'flex';\n    isOpen = true;\n\n    // Фокус на модальном окне для клавиатурной навигации\n    modalElement.focus();\n\n    // Добавление обработчиков событий\n    window.addEventListener('keydown', handleEscPress);\n    document.body.style.overflow = 'hidden';\n\n    // Настройка смены изображений цветов при необходимости\n    setupColorImagesRotation();\n\n    // Отслеживание события навигации назад\n    window.addEventListener('popstate', handlePopState);\n\n    return { close };\n  }\n\n  // Обработчик события popstate для поддержки истории браузера\n  function handlePopState(event) {\n    if (isOpen && (!event.state || !event.state.featureId)) {\n      close();\n    }\n  }\n\n  // Закрытие модального окна с поддержкой истории браузера\n  function close() {\n    if (!isOpen || !modalElement) return;\n\n    isOpen = false;\n    modalElement.style.display = 'none';\n\n    // Удаление обработчиков событий\n    window.removeEventListener('keydown', handleEscPress);\n    window.removeEventListener('popstate', handlePopState);\n    document.body.style.overflow = 'visible';\n\n    // Очистка интервала смены изображений\n    if (colorImagesInterval) {\n      clearInterval(colorImagesInterval);\n      colorImagesInterval = null;\n    }\n\n    // Удаляем параметр из URL\n    const currentUrl = new URL(window.location.href);\n    currentUrl.searchParams.delete('feature');\n    window.history.pushState({}, '', currentUrl);\n  }\n\n  // Уничтожение и очистка модального окна\n  function destroy() {\n    close();\n\n    if (modalElement && parentElement.contains(modalElement)) {\n      parentElement.removeChild(modalElement);\n    }\n\n    modalElement = null;\n    feature = null;\n  }\n\n  // Возвращаем публичные методы\n  return {\n    open,\n    close,\n    destroy,\n  };\n}\n\n// Экспорт по умолчанию для поддержки импорта\nexport default { createModalAbout };\n","export default \"__VITE_PUBLIC_ASSET__f9a3989d__\"","export default \"__VITE_PUBLIC_ASSET__f5caf97b__\"","export default \"__VITE_PUBLIC_ASSET__ddc73d79__\"","export default \"__VITE_PUBLIC_ASSET__aef5fa46__\"","export default \"__VITE_PUBLIC_ASSET__8d16c040__\"","export default \"__VITE_PUBLIC_ASSET__43530d87__\"","export default \"__VITE_PUBLIC_ASSET__6f7c2c63__\"","export default \"__VITE_PUBLIC_ASSET__12d5c04b__\"","export default \"__VITE_PUBLIC_ASSET__7f57d5e1__\"","// about.js с интеграцией i18n\nimport i18next from 'i18next';\nimport { createModalAbout } from './modalabout.js';\n\n// Прямые импорты медиафайлов с адаптированными путями\nimport displayControls from '/video/about/video_1_.webp';\nimport videoGif from '/video/about/video_2_.webp';\nimport untitled1 from '/img/about/Untitled_1_1x.jpg';\nimport untitled2 from '/img/about/Untitled_2_1x.jpg';\nimport untitled3 from '/img/about/Untitled_3_1x.jpg';\nimport untitled4 from '/img/about/Untitled_4_1x.jpg';\n\nimport videoBattery from '/video/about/video_3_batrey_.mp4';\nimport videoModa6 from '/video/about/video_6_.mp4';\nimport videoOption2 from '/video/about/video_4_.mp4';\n\n// Глобальная переменная для хранения модального окна\nlet globalModalInstance = null;\n\n// Функция для получения локализованного текста с поддержкой fallback\nconst getLocalizedText = (key, defaultText) => {\n  try {\n    const translation = i18next.t(key);\n    // Если перевод совпадает с ключом, значит перевод не найден\n    if (translation === key) {\n      return defaultText;\n    }\n    return translation;\n  } catch (error) {\n    console.warn(`Error getting translation for ${key}:`, error);\n    return defaultText;\n  }\n};\n\n// Экспортируем инициализатор по умолчанию для поддержки импорта\nexport default { initAbout };\n\n// ОПТИМИЗАЦИЯ 1: Предзагрузка изображений для улучшения производительности\nfunction preloadImages() {\n  // Не выполняем предзагрузку сразу, а откладываем её\n  console.log('Планирование отложенной предзагрузки изображений...');\n\n  // Используем requestIdleCallback для запуска предзагрузки, когда страница не занята\n  // С fallback на setTimeout для старых браузеров\n  const schedulePreload =\n    window.requestIdleCallback ||\n    function (cb) {\n      return setTimeout(cb, 1000); // Отложить на 1 секунду для старых браузеров\n    };\n\n  // Запланировать предзагрузку после загрузки основной страницы\n  schedulePreload(() => {\n    // Проверяем, видна ли секция about в области просмотра\n    const aboutSection = document.querySelector('.about');\n    if (!aboutSection) {\n      console.log('Секция about не найдена, отменяем предзагрузку');\n      return;\n    }\n\n    // Проверяем, нужно ли загружать изображения прямо сейчас\n    const shouldPreloadNow = isElementInViewport(aboutSection);\n\n    if (!shouldPreloadNow) {\n      console.log('Секция about не в поле зрения, откладываем предзагрузку');\n\n      // Создаем IntersectionObserver для отслеживания видимости секции\n      if ('IntersectionObserver' in window) {\n        const observer = new IntersectionObserver(\n          entries => {\n            const [entry] = entries;\n            if (entry.isIntersecting) {\n              console.log('Секция about видима, начинаем предзагрузку');\n              actuallyPreloadImages();\n              observer.disconnect(); // Отключаем наблюдатель после начала загрузки\n            }\n          },\n          { threshold: 0.1 }\n        ); // Начинаем загрузку, когда 10% секции видно\n\n        observer.observe(aboutSection);\n      } else {\n        // Fallback для браузеров без поддержки IntersectionObserver\n        // Отложить загрузку на 3 секунды после загрузки страницы\n        setTimeout(actuallyPreloadImages, 3000);\n      }\n    } else {\n      console.log('Секция about видима, начинаем предзагрузку сейчас');\n      actuallyPreloadImages();\n    }\n  });\n\n  // Вспомогательная функция для проверки видимости элемента\n  function isElementInViewport(el) {\n    if (!el || !el.getBoundingClientRect) return false;\n\n    const rect = el.getBoundingClientRect();\n    return (\n      rect.top <=\n        (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.bottom >= 0\n    );\n  }\n\n  // Функция, которая действительно выполняет предзагрузку\n  function actuallyPreloadImages() {\n    console.log('Начинаем предзагрузку критических изображений...');\n\n    // Создаем массив только критических изображений для предзагрузки\n    // Предзагружаем только первые два изображения, остальные загрузятся при необходимости\n    const imagesToPreload = [\n      displayControls, // Изображение первой карточки (самое важное)\n    ];\n\n    // Создаем очередь для постепенной загрузки\n    const imageQueue = [videoGif, untitled1];\n\n    // Запускаем предзагрузку критических изображений\n    imagesToPreload.forEach(src => {\n      const img = new Image();\n      img.importance = 'high'; // Указываем высокий приоритет для критических изображений\n      img.src = src;\n    });\n\n    // Предзагрузка видео НЕ выполняется - оно будет загружено только при открытии модального окна\n    // Удаляем код предзагрузки видео полностью\n\n    // Устанавливаем таймер для загрузки остальных изображений с низким приоритетом\n    setTimeout(() => {\n      console.log('Загрузка некритических изображений...');\n\n      // Загружаем остальные изображения с низким приоритетом\n      let index = 0;\n      const loadNextImage = () => {\n        if (index < imageQueue.length) {\n          const img = new Image();\n          img.importance = 'low'; // Указываем низкий приоритет\n          img.onload = () => {\n            // После загрузки одного изображения переходим к следующему\n            setTimeout(loadNextImage, 200); // Делаем небольшую паузу между загрузками\n          };\n          img.onerror = loadNextImage; // В случае ошибки также переходим к следующему\n          img.src = imageQueue[index++];\n        }\n      };\n\n      // Начинаем загрузку изображений по одному\n      loadNextImage();\n    }, 1000); // Задержка в 1 секунду перед началом загрузки некритических изображений\n  }\n}\n\n// Функция инициализации секции About\nexport function initAbout() {\n  console.log('Инициализация секции About');\n\n  // Диагностика и исправление эффекта свечения\n  function fixGlowEffect() {\n    console.log('Запуск диагностики эффекта свечения...');\n\n    // Получаем контейнер для карточек\n    const cardsContainer = document.querySelector('.about__cards');\n    if (!cardsContainer) {\n      console.error('Контейнер для карточек не найден!');\n\n      // Пробуем найти контейнер по другим селекторам\n      const alternativeContainers = [\n        document.querySelector('.about .cards'),\n        document.querySelector('[data-section=\"about\"] .cards'),\n        document.querySelector('#features-r36s .about__cards'),\n      ];\n\n      const foundContainer = alternativeContainers.find(\n        container => container !== null\n      );\n      if (foundContainer) {\n        console.log('Найден альтернативный контейнер:', foundContainer);\n        setTimeout(() => setupGlowEffect(foundContainer), 500);\n      } else {\n        console.error('Не удалось найти контейнер с карточками');\n      }\n\n      return;\n    }\n\n    setTimeout(() => setupGlowEffect(cardsContainer), 500);\n  }\n\n  // ОПТИМИЗАЦИЯ 2: Начинаем предзагрузку изображений сразу\n  preloadImages();\n\n  // Получаем контейнер для карточек\n  const cardsContainer = document.querySelector('.about__cards');\n  if (!cardsContainer) {\n    console.error('Контейнер для карточек не найден');\n    return null; // Возвращаем null чтобы показать, что инициализация не удалась\n  }\n\n  let activeCard = null;\n  let mousePosition = { x: 0, y: 0 };\n  let selectedFeature = null;\n\n  // ОПТИМИЗАЦИЯ 3: Создаем модальное окно сразу при инициализации, а не при первом клике\n  // Используем глобальную переменную для хранения модального окна\n  if (!globalModalInstance) {\n    console.log('Создаем модальное окно...');\n    globalModalInstance = createModalAbout(document.body);\n    console.log('Модальное окно создано');\n  }\n\n  let modalInstance = globalModalInstance;\n\n  // ОПТИМИЗАЦИЯ 4: Выносим структурированные данные из основного потока\n  const structuredData = {\n    '@context': 'https://schema.org',\n    '@type': 'ItemPage',\n    mainEntity: {\n      '@type': 'Product',\n      name: 'R36S Handheld Game Console',\n      faqPage: {\n        '@type': 'FAQPage',\n        mainEntity: [\n          {\n            '@type': 'Question',\n            name: 'How many games are included in the R36S console?',\n            acceptedAnswer: {\n              '@type': 'Answer',\n              text: 'The R36S console includes over 15,000 classic retro games from various platforms.',\n            },\n          },\n        ],\n      },\n    },\n  };\n\n  const features = [\n    {\n      id: 1,\n      i18nKey: 'about.cards.1',\n      icon: `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"about-card__icon\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <line x1=\"6\" y1=\"12\" x2=\"10\" y2=\"12\"></line>\n          <line x1=\"8\" y1=\"10\" x2=\"8\" y2=\"14\"></line>\n          <line x1=\"15\" y1=\"13\" x2=\"15.01\" y2=\"13\"></line>\n          <line x1=\"18\" y1=\"11\" x2=\"18.01\" y2=\"11\"></line>\n          <rect x=\"2\" y=\"6\" width=\"20\" height=\"12\" rx=\"2\"></rect>\n        </svg>\n      `,\n      title: 'Retro Game Collection',\n      description: 'Get into the game with the r36s portable gaming console.',\n      number: '15K+',\n      detail: 'classic games',\n      fullDescription: `Discover a rich collection of classic games, including over 15,000 titles from different eras. From iconic arcade games to beloved console games, our library spans every significant platform of the past.\n\nThe collection includes:\n• Classic arcade games from the 80s and 90s\n• Complete libraries of NES, SNES, Sega and other consoles\n• Exclusive ports and rare releases\n• Optimized versions for modern hardware`,\n      imageUrl: displayControls,\n      imageAlt: 'Коллекция ретро-игр',\n      // ОПТИМИЗАЦИЯ 5: Добавляем ссылку на предзагруженные структурированные данные\n      structuredData: structuredData,\n    },\n    {\n      id: 2,\n      i18nKey: 'about.cards.2',\n      icon: `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"about-card__icon\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n          <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"></line>\n          <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"></line>\n        </svg>\n      `,\n      title: 'Vibrant Display Technologies',\n      description:\n        'Enjoy vivid games on the 3.5* LCD display with crisp 640x480 resolution.',\n      number: '3.5\"',\n      detail: 'IPS display',\n      fullDescription: `R36S Console Display Specifications:\n• 3.5-inch IPS display\n• 640x480 resolution\n• High brightness and contrast\n• Wide viewing angles\n• Anti-glare coating\n• Energy-efficient backlight\n• Scratch-resistant surface`,\n      imageUrl: videoGif,\n      imageAlt: 'Display Technologies',\n    },\n    {\n      id: 3,\n      i18nKey: 'about.cards.3',\n      icon: `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"about-card__icon\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <rect x=\"2\" y=\"7\" width=\"16\" height=\"10\" rx=\"2\" ry=\"2\"></rect>\n          <line x1=\"22\" y1=\"11\" x2=\"22\" y2=\"13\"></line>\n        </svg>\n      `,\n      title: 'Powerful battery',\n      description: 'Enjoy up to 7-8 hours of continuous gaming with the R36S.',\n      number: '7-8',\n      detail: 'hours of play',\n      fullDescription: `Powerful 3200 mAh Battery\n\nExperience up to 7-8 hours of extended gaming with the R36S. The high-capacity 3200 mAh battery powers its crisp 3.5-inch IPS display (640x480 resolution), delivering an immersive gaming experience without frequent charging.\n\nKey features:\n- Long-lasting gameplay \n- Full-screen IPS display`,\n      videoUrl: videoBattery,\n      imageAlt: 'Battery Life',\n    },\n    {\n      id: 4,\n      i18nKey: 'about.cards.4',\n      icon: `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"about-card__icon\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <circle cx=\"12\" cy=\"12\" r=\"6\"></circle>\n          <circle cx=\"12\" cy=\"12\" r=\"2\"></circle>\n        </svg>\n      `,\n      title: 'Extensive color selection',\n      description: 'Experience our wide selection of stunning console colors.',\n      number: '10+',\n      detail: 'COLORS',\n      fullDescription: `Experience the R36S Collection:\nThe R36S console delivers 12+ captivating color variations in 2024, including our signature Midnight Black and eye-catching Galactic Purple. Each R36S model features recycled plastic finish and scratch-resistant coating.\n\nAvailable Colors:\n- Classic Black\n- Vibrant Orange\n- Mesmerizing Purple ...`,\n      colorImages: [untitled1, untitled2, untitled3, untitled4],\n      imageAlt: 'R36S Color Variants',\n    },\n    {\n      id: 5,\n      i18nKey: 'about.cards.5',\n      icon: `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"about-card__icon\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n          <path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>\n        </svg>\n      `,\n      title: 'Extensive settings',\n      description:\n        'Customize controls, brightness, sound and settings for maximum comfort',\n      number: '30+',\n      detail: 'settings',\n      fullDescription: `Features & Connectivity:\n- Connect to external displays via OTG for large-screen gaming\n- Compatible with modern gaming controllers and gamepads\n- Multi-language interface support\n- Customizable control schemes and button mapping\n- Advanced display settings with adjustable brightness and contrast\n- Audio optimization with multiple sound profiles\n- Screen mirroring capability\n- Low latency connection for seamless gameplay`,\n      videoUrl: videoOption2,\n      imageAlt: 'R36S Settings',\n    },\n    {\n      id: 6,\n      i18nKey: 'about.cards.6',\n      icon: `\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          class=\"about-card__icon\"\n          width=\"44\"\n          height=\"44\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n        >\n          <path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"></path>\n          <circle cx=\"9\" cy=\"7\" r=\"4\"></circle>\n          <path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"></path>\n          <path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>\n        </svg>\n      `,\n      title: 'Maximum portability',\n      description:\n        'Portable console with removable battery for gaming on the go.',\n      number: 'Ultra',\n      detail: 'Portable',\n      fullDescription: `Whether commuting, traveling, or taking a quick break, the R36S is ready for instant entertainment. Its durable design and protected screen ensure worry-free portability, while the long-lasting battery keeps you gaming on the go.\n\nFeatures:\n• Pocket-sized dimensions for ultimate portability\n• Rugged construction for daily carry\n• Ergonomic grip for extended gaming sessions\n• Quick startup for instant gaming access`,\n      videoUrl: videoModa6,\n      imageAlt: 'R36S Portability',\n    },\n  ];\n\n  // Получение локализованных данных для фичи\n  const getLocalizedFeature = feature => {\n    const basePath = feature.i18nKey;\n    return {\n      ...feature,\n      title: getLocalizedText(`${basePath}.title`, feature.title),\n      description: getLocalizedText(\n        `${basePath}.description`,\n        feature.description\n      ),\n      detail: getLocalizedText(`${basePath}.detail`, feature.detail),\n      number: getLocalizedText(`${basePath}.number`, feature.number),\n      fullDescription: getLocalizedText(\n        `${basePath}.fullDescription`,\n        feature.fullDescription\n      ),\n      imageAlt: getLocalizedText(`${basePath}.imageAlt`, feature.imageAlt),\n    };\n  };\n\n  // Функция для явного обновления текста кнопок\n  function updateButtonsText() {\n    try {\n      const buttonText = getLocalizedText(\n        'about.button.details',\n        'More details'\n      );\n      const buttons = document.querySelectorAll(\n        '.about-card__button .button-text'\n      );\n\n      console.log(\n        `Обновление текста ${buttons.length} кнопок на: \"${buttonText}\"`\n      );\n\n      buttons.forEach(button => {\n        button.textContent = buttonText;\n      });\n    } catch (error) {\n      console.error('Ошибка при обновлении текста кнопок:', error);\n    }\n  }\n  // Функция для проверки RTL направления\n  function isRTL() {\n    return document.documentElement.dir === 'rtl';\n  }\n\n  // ОПТИМИЗАЦИЯ 6: Разделение рендеринга карточек\n  // Сначала рендерим разметку карточек без обработчиков событий\n  function renderCards() {\n    console.log('Начинаем рендеринг карточек...');\n    // Очищаем контейнер перед добавлением карточек для предотвращения дублирования\n    const currentContainer = document.querySelector('.about__cards');\n    if (!currentContainer) {\n      console.error('Контейнер карточек не найден для рендеринга!');\n      return;\n    }\n\n    currentContainer.innerHTML = '';\n\n    // Получаем перевод для кнопки\n    const buttonText = getLocalizedText('about.button.details', 'More details');\n\n    // Проверяем направление текста\n    const rtlDirection = isRTL();\n\n    // Создаем HTML для всех 6 карточек\n    const cardsHTML = features\n      .map(feature => {\n        // Получаем локализованные данные\n        const localizedFeature = getLocalizedFeature(feature);\n\n        // Определяем содержимое кнопки в зависимости от направления текста\n        const buttonContent = rtlDirection\n          ? `<span class=\"button-icon\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          >\n            <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n            <polyline points=\"12 5 19 12 12 19\"></polyline>\n          </svg>\n        </span>\n        <span class=\"button-text\" data-i18n=\"about.button.details\">${buttonText}</span>`\n          : `<span class=\"button-text\" data-i18n=\"about.button.details\">${buttonText}</span>\n        <span class=\"button-icon\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 24 24\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-width=\"2\"\n            stroke-linecap=\"round\"\n            stroke-linejoin=\"round\"\n          >\n            <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>\n            <polyline points=\"12 5 19 12 12 19\"></polyline>\n          </svg>\n        </span>`;\n\n        return `\n      <div class=\"about-card\" data-id=\"${feature.id}\">\n        <div class=\"card-blur\"></div>\n        <div class=\"card-glow\"></div>\n        <div class=\"about-card__content\">\n          <div class=\"about-card__icon-wrapper\">${feature.icon}</div>\n          <h3 class=\"about-card__title\" data-i18n=\"${feature.i18nKey}.title\">${localizedFeature.title}</h3>\n          <p class=\"about-card__description\" data-i18n=\"${feature.i18nKey}.description\">${localizedFeature.description}</p>\n          <div class=\"about-card__stats\">\n            <span class=\"about-card__number\" data-i18n=\"${feature.i18nKey}.number\">${localizedFeature.number}</span>\n            <span class=\"about-card__detail\" data-i18n=\"${feature.i18nKey}.detail\">${localizedFeature.detail}</span>\n          </div>\n          <button class=\"about-card__button\" data-feature-id=\"${feature.id}\">\n            ${buttonContent}\n          </button>\n        </div>\n        <div class=\"card-indicator\"></div>\n      </div>\n    `;\n      })\n      .join('');\n\n    // Добавляем все карточки в контейнер\n    currentContainer.innerHTML = cardsHTML;\n\n    // Проверка на количество карточек\n    const renderedCards = currentContainer.querySelectorAll('.about-card');\n    console.log(\n      `Отрендерено ${renderedCards.length} карточек из ${features.length} необходимых`\n    );\n\n    // Проверяем, что отрендерено правильное количество карточек\n    if (renderedCards.length !== features.length) {\n      console.warn(\n        `Ошибка рендеринга: отрендерено ${renderedCards.length} карточек вместо ${features.length}`\n      );\n    } else {\n      console.log('Рендеринг карточек успешно завершен');\n    }\n  }\n\n  // ИСПРАВЛЕННЫЙ обработчик движения мыши - КЛЮЧЕВОЕ ИСПРАВЛЕНИЕ\n  function handleMouseMove(e) {\n    // Проверка на существование события\n    if (!e || !e.currentTarget) {\n      return;\n    }\n\n    const card = e.currentTarget;\n\n    // Проверка на существование элемента перед получением его размеров\n    if (!card || !card.getBoundingClientRect) {\n      console.warn(\n        'handleMouseMove: элемент карточки не существует или недоступен'\n      );\n      return;\n    }\n\n    try {\n      const rect = card.getBoundingClientRect();\n\n      // Вычисляем точную позицию мыши относительно карточки\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n\n      // Применяем позицию как CSS переменные напрямую\n      card.style.setProperty('--mouse-x', `${mouseX}px`);\n      card.style.setProperty('--mouse-y', `${mouseY}px`);\n\n      // Логируем позицию для отладки\n      // console.log(`Карточка ${card.dataset.id}: X=${mouseX}px, Y=${mouseY}px`);\n    } catch (err) {\n      console.error('Ошибка при обработке движения мыши:', err);\n    }\n  }\n\n  // Функция throttle для ограничения количества вызовов функции\n  function throttle(func, limit) {\n    let lastFunc;\n    let lastRan;\n    return function () {\n      const context = this;\n      const args = arguments;\n      if (!lastRan) {\n        func.apply(context, args);\n        lastRan = Date.now();\n      } else {\n        clearTimeout(lastFunc);\n        lastFunc = setTimeout(function () {\n          if (Date.now() - lastRan >= limit) {\n            func.apply(context, args);\n            lastRan = Date.now();\n          }\n        }, limit - (Date.now() - lastRan));\n      }\n    };\n  }\n\n  // Обработчик клика на кнопку \"More details\"\n  function handleButtonClick(e) {\n    if (!e || !e.currentTarget) {\n      console.warn('handleButtonClick: событие или цель события не существует');\n      return;\n    }\n\n    e.stopPropagation(); // Останавливаем всплытие, чтобы избежать двойного открытия\n\n    try {\n      const featureId = parseInt(e.currentTarget.dataset.featureId);\n      console.log('Клик по кнопке карточки ID:', featureId);\n\n      const feature = features.find(f => f.id === featureId);\n      if (!feature) {\n        console.error('Данные для карточки не найдены');\n        return;\n      }\n\n      // Локализуем данные перед открытием модального окна\n      const localizedFeature = getLocalizedFeature(feature);\n\n      // Открываем модальное окно (уже создано при инициализации)\n      if (modalInstance) {\n        modalInstance.open(localizedFeature);\n      }\n    } catch (err) {\n      console.error('Ошибка при обработке клика по кнопке:', err);\n    }\n  }\n\n  // Вспомогательная функция debounce для оптимизации обработки resize\n  function debounce(func, wait) {\n    let timeout;\n    return function () {\n      const context = this;\n      const args = arguments;\n      clearTimeout(timeout);\n      timeout = setTimeout(() => {\n        func.apply(context, args);\n      }, wait);\n    };\n  }\n\n  // КЛЮЧЕВОЕ ИСПРАВЛЕНИЕ: Полностью переписанная функция очистки обработчиков\n  function cleanupCardEvents() {\n    console.log('Очистка обработчиков событий карточек...');\n    try {\n      // Получаем ссылки на все карточки\n      const cards = document.querySelectorAll('.about-card');\n      if (cards && cards.length > 0) {\n        console.log(`Удаление обработчиков из ${cards.length} карточек`);\n        cards.forEach((card, index) => {\n          if (card) {\n            // Сохраняем данные атрибуты и содержимое перед клонированием\n            const dataId = card.getAttribute('data-id');\n            const content = card.innerHTML;\n\n            // Удаляем все обработчики событий у карточки путем клонирования\n            const clone = card.cloneNode(false); // Клонируем только элемент без детей\n\n            // Восстанавливаем атрибуты\n            clone.setAttribute('data-id', dataId);\n\n            // Восстанавливаем содержимое\n            clone.innerHTML = content;\n\n            // Заменяем оригинальный элемент клоном\n            if (card.parentNode) {\n              card.parentNode.replaceChild(clone, card);\n              console.log(\n                `Карточка ${index + 1} заменена на клон без обработчиков`\n              );\n            }\n          }\n        });\n      } else {\n        console.warn('Не найдено карточек для очистки обработчиков');\n      }\n\n      // Удаляем делегированный обработчик событий с контейнера путем клонирования\n      const container = document.querySelector('.about__cards');\n      if (container) {\n        // Сохраняем содержимое\n        const content = container.innerHTML;\n\n        // Клонируем контейнер без детей\n        const newContainer = container.cloneNode(false);\n\n        // Восстанавливаем содержимое\n        newContainer.innerHTML = content;\n\n        // Заменяем оригинальный контейнер\n        if (container.parentNode) {\n          container.parentNode.replaceChild(newContainer, container);\n          console.log('Контейнер карточек заменен на клон без обработчиков');\n        }\n      } else {\n        console.warn('Не найден контейнер карточек для очистки обработчиков');\n      }\n\n      console.log('Очистка обработчиков успешно завершена');\n    } catch (err) {\n      console.error('Ошибка при очистке обработчиков событий:', err);\n\n      // В случае ошибки пытаемся использовать альтернативный метод очистки\n      try {\n        console.log('Применяем альтернативный метод очистки...');\n        const container = document.querySelector('.about__cards');\n        if (container) {\n          // Сохраняем HTML и полностью перестраиваем раздел\n          const html = container.outerHTML;\n          const parent = container.parentNode;\n\n          if (parent) {\n            // Удаляем оригинальный контейнер\n            parent.removeChild(container);\n\n            // Создаем новый контейнер через HTML\n            parent.insertAdjacentHTML('beforeend', html);\n            console.log('Альтернативная очистка успешно завершена');\n          }\n        }\n      } catch (fallbackError) {\n        console.error('Ошибка при альтернативной очистке:', fallbackError);\n      }\n    }\n  }\n\n  // КЛЮЧЕВОЕ ИСПРАВЛЕНИЕ: Переработанная функция установки эффекта свечения\n  function setupGlowEffect(container) {\n    // Получаем все карточки (свежесозданные после смены языка)\n    const cards = container.querySelectorAll('.about-card');\n    console.log(`Настройка эффекта свечения для ${cards.length} карточек`);\n\n    if (cards.length === 0) {\n      console.error('Карточки не найдены для эффекта свечения!');\n      return;\n    }\n\n    cards.forEach((card, index) => {\n      // Проверяем наличие элемента подсветки\n      let glowElement = card.querySelector('.card-glow');\n      if (!glowElement) {\n        console.log(`Создаем элемент подсветки для карточки ${index + 1}`);\n        glowElement = document.createElement('div');\n        glowElement.className = 'card-glow';\n        card.prepend(glowElement);\n      }\n\n      // Устанавливаем начальные значения переменных CSS\n      card.style.setProperty('--mouse-x', '0px');\n      card.style.setProperty('--mouse-y', '0px');\n\n      // Добавляем обработчик mousemove\n      card.addEventListener('mousemove', handleMouseMove);\n\n      console.log(\n        `Обработчик события mousemove добавлен к карточке ${index + 1}`\n      );\n    });\n  }\n\n  // ОПТИМИЗАЦИЯ 9: Асинхронная установка обработчиков событий для карточек\n  function setupCardEvents() {\n    console.log('Настройка обработчиков событий для карточек...');\n\n    // Сначала получаем обновленный контейнер\n    const currentCardsContainer = document.querySelector('.about__cards');\n    if (!currentCardsContainer) {\n      console.error('Контейнер карточек не найден для установки обработчиков!');\n      return;\n    }\n\n    // Получаем свежие карточки\n    const cards = currentCardsContainer.querySelectorAll('.about-card');\n    if (!cards || cards.length === 0) {\n      console.warn('Не найдены карточки для установки обработчиков событий');\n      return;\n    }\n\n    console.log(\n      `Устанавливаем обработчики событий для ${cards.length} карточек`\n    );\n    const isMobile = window.matchMedia('(max-width: 768px)').matches;\n\n    // Устанавливаем эффект свечения для карточек\n    setupGlowEffect(currentCardsContainer);\n\n    // Устанавливаем один обработчик на контейнер для всех карточек (делегирование)\n    if (!isMobile && currentCardsContainer) {\n      currentCardsContainer.addEventListener('click', function (e) {\n        const card = e.target.closest('.about-card');\n        if (card && !e.target.closest('.about-card__button')) {\n          const featureId = parseInt(card.dataset.id);\n          console.log('Клик по карточке ID:', featureId);\n          const feature = features.find(f => f.id === featureId);\n          if (!feature) {\n            console.error('Данные для карточки не найдены');\n            return;\n          }\n\n          // Локализуем данные перед открытием модального окна\n          const localizedFeature = getLocalizedFeature(feature);\n\n          // Открываем модальное окно\n          if (modalInstance) {\n            modalInstance.open(localizedFeature);\n          }\n        }\n      });\n    }\n\n    // Добавляем обработчики для визуальных эффектов на карточках\n    cards.forEach(card => {\n      if (!card) return; // Проверка на null\n\n      // Используем делегирование событий для mouseenter/mouseleave\n      card.addEventListener('mouseenter', function () {\n        if (!card) return;\n        activeCard = parseInt(card.dataset.id);\n        card.classList.add('active');\n      });\n\n      card.addEventListener('mouseleave', function () {\n        if (!card) return;\n        activeCard = null;\n        card.classList.remove('active');\n      });\n    });\n\n    // Оптимизированная обработка кликов по кнопкам\n    const buttons = currentCardsContainer.querySelectorAll(\n      '.about-card__button'\n    );\n    if (buttons && buttons.length > 0) {\n      buttons.forEach(button => {\n        if (!button) return; // Проверка на null\n        button.addEventListener('click', handleButtonClick);\n      });\n      console.log(`Установлены обработчики для ${buttons.length} кнопок`);\n    } else {\n      console.warn('Не найдены кнопки карточек');\n    }\n\n    console.log('Настройка обработчиков событий успешно завершена');\n  }\n\n  // КЛЮЧЕВОЕ ИСПРАВЛЕНИЕ: Обработчик события смены языка\n  function setupLanguageChangeListener() {\n    // Создаем именованную функцию-обработчик для возможности корректного удаления\n    function languageChangeHandler(event) {\n      try {\n        console.log('Обработка события смены языка в секции About');\n\n        // Получаем новый язык из события\n        const newLanguage = event.detail\n          ? event.detail.language\n          : i18next.language;\n        console.log(`Переключение на язык: ${newLanguage}`);\n\n        // Сначала очищаем существующие обработчики\n        cleanupCardEvents();\n\n        // Затем перерендериваем карточки с новыми переводами\n        renderCards();\n\n        // И заново устанавливаем все обработчики событий с небольшой задержкой для гарантии завершения рендеринга DOM\n        setTimeout(() => {\n          setupCardEvents();\n\n          // Дополнительно проверяем состояние карточек\n          const cards = document.querySelectorAll('.about-card');\n\n          // Проверяем наличие эффекта подсветки у всех карточек\n          cards.forEach((card, index) => {\n            const glowElement = card.querySelector('.card-glow');\n            if (!glowElement) {\n              console.warn(\n                `Карточка ${\n                  index + 1\n                } не имеет элемента подсветки, добавляем...`\n              );\n              const newGlowElement = document.createElement('div');\n              newGlowElement.className = 'card-glow';\n              card.prepend(newGlowElement);\n            }\n\n            // Принудительно устанавливаем начальные значения переменных CSS\n            card.style.setProperty('--mouse-x', '0px');\n            card.style.setProperty('--mouse-y', '0px');\n          });\n\n          console.log(`Проверено ${cards.length} карточек после смены языка`);\n        }, 100);\n\n        // Дополнительно обновляем текст кнопок напрямую для уверенности\n        updateButtonsText();\n\n        console.log('Обновление секции About после смены языка завершено');\n      } catch (error) {\n        console.error(\n          'Ошибка при обновлении секции About после смены языка:',\n          error\n        );\n\n        // Пытаемся восстановить работоспособность в случае ошибки\n        try {\n          renderCards();\n          setTimeout(setupCardEvents, 150);\n        } catch (fallbackError) {\n          console.error(\n            'Не удалось выполнить восстановление после ошибки:',\n            fallbackError\n          );\n        }\n      }\n    }\n\n    // Удаляем предыдущий обработчик, если он был\n    window.removeEventListener('languageChanged', languageChangeHandler);\n\n    // Устанавливаем новый обработчик\n    window.addEventListener('languageChanged', languageChangeHandler);\n\n    // Сохраняем ссылку на функцию для возможности удаления\n    return languageChangeHandler;\n  }\n\n  // Очистка всех обработчиков событий\n  function cleanupEvents() {\n    console.log('Очистка всех обработчиков событий...');\n    cleanupCardEvents();\n\n    // Исправление: сохраняем ссылку на функцию debounce для корректного удаления\n    const debouncedResize = debounce(() => {}, 250);\n    window.removeEventListener('resize', debouncedResize);\n\n    // Исправление: создаем именованную функцию для правильного удаления слушателя событий\n    function languageChangeHandler() {}\n    window.removeEventListener('languageChanged', languageChangeHandler);\n\n    // Сохраняем модальное окно в глобальной переменной, но очищаем локальную ссылку\n    modalInstance = null;\n\n    // Очищаем кеш CSS-переменных, если необходимо\n    const cachedCards = document.querySelectorAll('.about-card');\n    cachedCards.forEach(card => {\n      if (card) {\n        card.style.removeProperty('--mouse-x');\n        card.style.removeProperty('--mouse-y');\n      }\n    });\n\n    console.log('Очистка обработчиков событий завершена');\n  }\n\n  // ОПТИМИЗАЦИЯ 11: Асинхронная инициализация для предотвращения блокировки основного потока\n  function asyncInit() {\n    // Устанавливаем слушатель изменения языка\n    const languageChangeHandler = setupLanguageChangeListener();\n\n    // Создаем и сохраняем ссылку на debouncedResize для возможности удаления\n    const debouncedResize = debounce(() => {\n      const isMobile = window.matchMedia('(max-width: 768px)').matches;\n      const currentIsMobile = window.matchMedia('(max-width: 768px)').matches;\n\n      if (isMobile !== currentIsMobile) {\n        console.log('Состояние адаптивности изменилось, обновляем обработчики');\n        cleanupCardEvents();\n        setupCardEvents();\n      }\n    }, 250);\n\n    // Устанавливаем обработчик изменения размера окна\n    window.addEventListener('resize', debouncedResize);\n\n    // Проверяем повторно установленные обработчики для подтверждения корректной работы\n    setTimeout(() => {\n      const cards = document.querySelectorAll('.about-card');\n      console.log(\n        `Проверка установки эффекта подсветки: найдено ${cards.length} карточек`\n      );\n\n      let cardWithoutGlow = false;\n      cards.forEach(card => {\n        if (!card.querySelector('.card-glow')) {\n          cardWithoutGlow = true;\n          console.warn(\n            'Обнаружена карточка без эффекта подсветки, исправляем...'\n          );\n          setupGlowEffect(document.querySelector('.about__cards'));\n        }\n      });\n\n      if (!cardWithoutGlow) {\n        console.log('Все карточки имеют корректный эффект подсветки');\n      }\n    }, 100);\n\n    // Возвращаем функцию очистки\n    return function cleanup() {\n      console.log('Запуск функции очистки секции About');\n\n      // Удаляем созданный ранее обработчик resize\n      window.removeEventListener('resize', debouncedResize);\n\n      // Удаляем обработчик смены языка\n      window.removeEventListener('languageChanged', languageChangeHandler);\n\n      // Очищаем все остальные обработчики\n      cleanupEvents();\n    };\n  }\n\n  // Инициализация секции\n  try {\n    console.log('Начинаем инициализацию секции About...');\n    console.log('Рендерим карточки...');\n    renderCards();\n    console.log('Устанавливаем обработчики событий...');\n    setupCardEvents();\n    console.log('Инициализация About завершена успешно');\n    return asyncInit();\n  } catch (error) {\n    console.error('Ошибка при инициализации About:', error);\n    return null;\n  }\n}\n","/**\n * Features Section\n * Реализация секции Features для проекта R36S_CONSOLE_STORE_JS\n * с поддержкой i18n и оптимизацией загрузки видео\n */\n\nimport i18next from 'i18next';\n\n/**\n * Инициализация секции Features\n * @returns {Function|undefined} Функция очистки для этого компонента или undefined\n */\nfunction initFeatures() {\n  // Получаем необходимые элементы\n  const featuresSection = document.getElementById('features');\n  const featuresVideo = document.getElementById('featuresVideo');\n  const featuresVideoMobile = document.getElementById('featuresVideoMobile');\n\n  // Элементы для десктопной версии\n  const soundToggleButton = document.getElementById('soundToggleButton');\n  const volumeOffIcon = document.getElementById('volumeOffIcon');\n  const volumeOnIcon = document.getElementById('volumeOnIcon');\n\n  // Элементы для мобильной версии\n  const soundToggleButtonMobile = document.getElementById(\n    'soundToggleButtonMobile'\n  );\n  const volumeOffIconMobile = document.getElementById('volumeOffIconMobile');\n  const volumeOnIconMobile = document.getElementById('volumeOnIconMobile');\n\n  const buyButton = document.getElementById('buyButton');\n  const moreInfoButton = document.getElementById('moreInfoButton');\n\n  // Проверяем, существуют ли элементы перед добавлением обработчиков\n  if (!featuresSection) {\n    console.warn('Features section not found');\n    return;\n  }\n\n  // Состояние видео\n  let desktopVideoLoaded = false;\n  let mobileVideoLoaded = false;\n\n  // Функция для загрузки и воспроизведения видео по необходимости\n  function loadAndPlayVideo() {\n    const isMobile = window.innerWidth < 1280;\n\n    if (isMobile) {\n      // Загружаем мобильное видео\n      if (!mobileVideoLoaded && featuresVideoMobile) {\n        featuresVideoMobile.preload = 'auto';\n        const playPromise = featuresVideoMobile.play();\n\n        if (playPromise !== undefined) {\n          playPromise.catch(error => {\n            console.log(\n              'Автовоспроизведение мобильного видео не удалось:',\n              error\n            );\n          });\n        }\n\n        mobileVideoLoaded = true;\n      }\n    } else {\n      // Загружаем десктопное видео\n      if (!desktopVideoLoaded && featuresVideo) {\n        featuresVideo.preload = 'auto';\n        const playPromise = featuresVideo.play();\n\n        if (playPromise !== undefined) {\n          playPromise.catch(error => {\n            console.log(\n              'Автовоспроизведение десктопного видео не удалось:',\n              error\n            );\n          });\n        }\n\n        desktopVideoLoaded = true;\n      }\n    }\n  }\n\n  // Используем IntersectionObserver для загрузки видео только при прокрутке к нему\n  let observer;\n  if ('IntersectionObserver' in window) {\n    observer = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            loadAndPlayVideo();\n          }\n        });\n      },\n      { threshold: 0.25 }\n    );\n\n    if (featuresSection) {\n      observer.observe(featuresSection);\n    }\n  } else {\n    // Резервный вариант для браузеров без поддержки IntersectionObserver\n    window.addEventListener('scroll', () => {\n      const rect = featuresSection.getBoundingClientRect();\n      if (rect.top < window.innerHeight && rect.bottom > 0) {\n        loadAndPlayVideo();\n      }\n    });\n\n    // Попробуем загрузить видео, если оно уже в видимой области при загрузке страницы\n    setTimeout(() => {\n      const rect = featuresSection.getBoundingClientRect();\n      if (rect.top < window.innerHeight && rect.bottom > 0) {\n        loadAndPlayVideo();\n      }\n    }, 500);\n  }\n\n  // Устанавливаем начальные параметры для обоих видео\n  if (featuresVideo) {\n    featuresVideo.volume = 0.5;\n  }\n\n  if (featuresVideoMobile) {\n    featuresVideoMobile.volume = 0.5;\n  }\n\n  // Обработчик клика для кнопки Buy now\n  const buyButtonHandler = buyButton\n    ? buyButton.addEventListener('click', handleBuyClick)\n    : null;\n\n  // Обработчик клика для кнопки Show Details\n  const moreInfoButtonHandler = moreInfoButton\n    ? moreInfoButton.addEventListener('click', handleMoreInfoClick)\n    : null;\n\n  // Обработчик клика для кнопки звука - десктопная версия\n  const soundToggleHandler = soundToggleButton\n    ? soundToggleButton.addEventListener('click', () => {\n        toggleMute(\n          featuresVideo,\n          volumeOffIcon,\n          volumeOnIcon,\n          soundToggleButton\n        );\n      })\n    : null;\n\n  // Обработчик клика для кнопки звука - мобильная версия\n  const soundToggleMobileHandler = soundToggleButtonMobile\n    ? soundToggleButtonMobile.addEventListener('click', () => {\n        toggleMute(\n          featuresVideoMobile,\n          volumeOffIconMobile,\n          volumeOnIconMobile,\n          soundToggleButtonMobile\n        );\n      })\n    : null;\n\n  // Обработчик для автоматического отключения звука при скролле\n  const scrollHandler = () => {\n    // Проверяем для десктопного видео\n    if (featuresVideo && !featuresVideo.muted) {\n      handleScroll(\n        featuresSection,\n        featuresVideo,\n        volumeOffIcon,\n        volumeOnIcon,\n        soundToggleButton\n      );\n    }\n\n    // Проверяем для мобильного видео\n    if (featuresVideoMobile && !featuresVideoMobile.muted) {\n      handleScroll(\n        featuresSection,\n        featuresVideoMobile,\n        volumeOffIconMobile,\n        volumeOnIconMobile,\n        soundToggleButtonMobile\n      );\n    }\n  };\n\n  window.addEventListener('scroll', scrollHandler);\n\n  // Обработчик изменения размера окна для переключения между видео\n  const resizeHandler = () => {\n    loadAndPlayVideo();\n  };\n\n  window.addEventListener('resize', resizeHandler);\n\n  // Обработчик события изменения языка\n  const languageChangedHandler = () => {\n    // Обновление атрибутов aria-label для десктопной кнопки\n    if (soundToggleButton) {\n      const keyDesktop =\n        featuresVideo && !featuresVideo.muted\n          ? 'features.sound.toggle.disable'\n          : 'features.sound.toggle.enable';\n      soundToggleButton.setAttribute('aria-label', i18next.t(keyDesktop));\n    }\n\n    // Обновление атрибутов aria-label для мобильной кнопки\n    if (soundToggleButtonMobile) {\n      const keyMobile =\n        featuresVideoMobile && !featuresVideoMobile.muted\n          ? 'features.sound.toggle.disable'\n          : 'features.sound.toggle.enable';\n      soundToggleButtonMobile.setAttribute('aria-label', i18next.t(keyMobile));\n    }\n  };\n\n  // Регистрируем обработчик изменения языка\n  window.addEventListener('languageChanged', languageChangedHandler);\n\n  // Функция очистки для удаления всех обработчиков событий\n  return function cleanup() {\n    if (buyButton) buyButton.removeEventListener('click', handleBuyClick);\n    if (moreInfoButton)\n      moreInfoButton.removeEventListener('click', handleMoreInfoClick);\n\n    if (soundToggleButton) {\n      soundToggleButton.removeEventListener('click', () => {\n        toggleMute(\n          featuresVideo,\n          volumeOffIcon,\n          volumeOnIcon,\n          soundToggleButton\n        );\n      });\n    }\n\n    if (soundToggleButtonMobile) {\n      soundToggleButtonMobile.removeEventListener('click', () => {\n        toggleMute(\n          featuresVideoMobile,\n          volumeOffIconMobile,\n          volumeOnIconMobile,\n          soundToggleButtonMobile\n        );\n      });\n    }\n\n    window.removeEventListener('scroll', scrollHandler);\n    window.removeEventListener('resize', resizeHandler);\n    window.removeEventListener('languageChanged', languageChangedHandler);\n\n    // Отключаем наблюдатель, если он был создан\n    if (observer && featuresSection) {\n      observer.unobserve(featuresSection);\n    }\n\n    console.log('Features component cleaned up');\n  };\n}\n\n/**\n * Функция для переключения звука видео\n * @param {HTMLVideoElement} videoElement - видео элемент\n * @param {HTMLElement} volumeOffIcon - иконка выключенного звука\n * @param {HTMLElement} volumeOnIcon - иконка включенного звука\n * @param {HTMLElement} soundToggle - кнопка переключения звука\n */\nfunction toggleMute(videoElement, volumeOffIcon, volumeOnIcon, soundToggle) {\n  if (!videoElement) return;\n\n  videoElement.muted = !videoElement.muted;\n\n  if (!videoElement.muted) {\n    videoElement.volume = 0.5;\n    volumeOffIcon.style.display = 'none';\n    volumeOnIcon.style.display = 'block';\n\n    // Обновляем aria-label\n    if (soundToggle) {\n      soundToggle.setAttribute(\n        'aria-label',\n        i18next.t('features.sound.toggle.disable')\n      );\n    }\n  } else {\n    volumeOffIcon.style.display = 'block';\n    volumeOnIcon.style.display = 'none';\n\n    // Обновляем aria-label\n    if (soundToggle) {\n      soundToggle.setAttribute(\n        'aria-label',\n        i18next.t('features.sound.toggle.enable')\n      );\n    }\n  }\n}\n\n/**\n * Функция для обработки скролла (отключение звука при выходе из видимой области)\n * @param {HTMLElement} sectionElement - секция Features\n * @param {HTMLVideoElement} videoElement - видео элемент\n * @param {HTMLElement} volumeOffIcon - иконка выключенного звука\n * @param {HTMLElement} volumeOnIcon - иконка включенного звука\n * @param {HTMLElement} soundToggle - кнопка переключения звука\n */\nfunction handleScroll(\n  sectionElement,\n  videoElement,\n  volumeOffIcon,\n  volumeOnIcon,\n  soundToggle\n) {\n  if (!sectionElement || !videoElement || videoElement.muted) return;\n\n  const rect = sectionElement.getBoundingClientRect();\n  const isVisible = rect.top < window.innerHeight && rect.bottom > 0;\n\n  if (!isVisible) {\n    videoElement.muted = true;\n    volumeOffIcon.style.display = 'block';\n    volumeOnIcon.style.display = 'none';\n\n    // Обновляем aria-label\n    if (soundToggle) {\n      soundToggle.setAttribute(\n        'aria-label',\n        i18next.t('features.sound.toggle.enable')\n      );\n    }\n  }\n}\n\n/**\n * Функция для обработки клика на кнопку Buy now\n */\nfunction handleBuyClick() {\n  window.open(\n    'https://www.aliexpress.com/item/1005007171465465.html?spm=a2g0o.store_pc_home.0.0.70583a88IDCuNJ&pdp_npi=4%40dis%21UAH%214%C2%A0485%2C21%20%D0%B3%D1%80%D0%BD.%211%C2%A0472%2C53%20%D0%B3%D1%80%D0%BD.%21%21%21767.45%21251.96%21%40211b498b17390151033607761d21d7%2112000039694115852%21sh%21UA%211927913003%21X',\n    '_blank',\n    'noopener,noreferrer'\n  );\n}\n\n/**\n * Функция для обработки клика на кнопку Show Details\n */\nfunction handleMoreInfoClick() {\n  const aboutSection = document.getElementById('features-r36s');\n\n  if (aboutSection) {\n    const elementPosition = aboutSection.getBoundingClientRect().top;\n    const currentScrollY = window.scrollY || window.pageYOffset;\n    const offsetPosition = elementPosition + currentScrollY;\n\n    window.scrollTo({\n      top: offsetPosition,\n      behavior: 'smooth',\n    });\n\n    window.history.replaceState(\n      null,\n      '',\n      `${window.location.pathname}#features-r36s`\n    );\n  }\n}\n\n// Экспортируем функцию для использования в main.js\nexport { initFeatures };\n","// Categories.js - Версия с поддержкой i18n и без автовоспроизведения\nimport i18next from 'i18next';\n\nexport function initCategories() {\n  try {\n    console.log('Инициализация секции Categories');\n\n    // Получаем необходимые элементы\n    const videoElement = document.querySelector('.categories__video');\n    const sectionRef = document.getElementById('categories');\n    const contentRef = document.querySelector('.categories__content');\n    const playButton = document.querySelector('.categories__video-play');\n    const muteButton = document.querySelector('.categories__video-mute');\n    const videoSlider = document.querySelector('.categories__video-slider');\n    const videoContainer = document.querySelector(\n      '.categories__video-container'\n    );\n    const currentTimeElement = document.querySelector(\n      '.categories__video-time span:first-child'\n    );\n    const durationElement = document.querySelector(\n      '.categories__video-time span:last-child'\n    );\n\n    // Константа для события смены языка (чтобы не зависеть от внешних модулей)\n    const LANGUAGE_CHANGE_EVENT = 'languageChanged';\n\n    // Проверка наличия секции\n    if (!sectionRef) {\n      console.error('Секция Categories не найдена в DOM');\n      return {};\n    }\n\n    // Добавляем класс animate-in для анимации\n    if (contentRef) {\n      contentRef.classList.add('animate-in');\n    }\n\n    // Для работы без видеоэлемента\n    if (!videoElement) {\n      console.error('Видео элемент не найден в DOM');\n      createVideoFallback();\n      return {};\n    }\n\n    // Состояния\n    let isPlaying = false;\n    let isMuted = true;\n    let videoLoaded = false;\n    let videoError = false;\n\n    // Функция форматирования времени\n    const formatTime = time => {\n      if (isNaN(time) || time < 0) return '0:00';\n      const minutes = Math.floor(time / 60);\n      const seconds = Math.floor(time % 60);\n      return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n    };\n\n    // Функция обновления иконки кнопки воспроизведения\n    function updatePlayButtonIcon() {\n      if (!playButton) return;\n\n      playButton.innerHTML = isPlaying\n        ? `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n             <rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"></rect>\n             <rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"></rect>\n           </svg>`\n        : `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n             <polygon points=\"5 3 19 12 5 21 5 3\"></polygon>\n           </svg>`;\n\n      // Обновляем aria-label в зависимости от состояния\n      if (playButton.hasAttribute('data-i18n')) {\n        const i18nKey = isPlaying\n          ? 'categories.controls.pause'\n          : 'categories.controls.play';\n\n        const translation = i18next.t(i18nKey);\n        if (translation && translation !== i18nKey) {\n          playButton.setAttribute('aria-label', translation);\n        }\n      }\n    }\n\n    // Функция обновления иконки кнопки включения/выключения звука\n    function updateMuteButtonIcon() {\n      if (!muteButton) return;\n\n      muteButton.innerHTML = isMuted\n        ? `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n             <path d=\"M11 5L6 9H2v6h4l5 4V5z\"></path>\n             <line x1=\"23\" y1=\"9\" x2=\"17\" y2=\"15\"></line>\n             <line x1=\"17\" y1=\"9\" x2=\"23\" y2=\"15\"></line>\n           </svg>`\n        : `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n             <polygon points=\"11 5 6 9 2 9 2 15 6 15 11 19 11 5\"></polygon>\n             <path d=\"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07\"></path>\n           </svg>`;\n\n      // Обновляем aria-label в зависимости от состояния\n      if (muteButton.hasAttribute('data-i18n')) {\n        const i18nKey = isMuted\n          ? 'categories.controls.unmute'\n          : 'categories.controls.mute';\n\n        const translation = i18next.t(i18nKey);\n        if (translation && translation !== i18nKey) {\n          muteButton.setAttribute('aria-label', translation);\n        }\n      }\n    }\n\n    // Функция переключения воспроизведения\n    function togglePlay() {\n      if (!videoElement || videoError) return;\n\n      if (isPlaying) {\n        videoElement.pause();\n        isPlaying = false;\n        updatePlayButtonIcon();\n      } else {\n        // Проверяем, есть ли у видео источник\n        if (\n          !videoElement.getAttribute('src') &&\n          videoElement.querySelector('source')\n        ) {\n          // Если видео еще не инициализировано, инициализируем его\n          const source = videoElement.querySelector('source');\n          videoElement.setAttribute('src', source.getAttribute('src'));\n        }\n\n        // Используем Promise для обработки ошибок воспроизведения\n        const playPromise = videoElement.play();\n\n        if (playPromise !== undefined) {\n          playPromise\n            .then(() => {\n              isPlaying = true;\n              updatePlayButtonIcon();\n            })\n            .catch(err => {\n              console.warn('Не удалось воспроизвести видео:', err);\n              isPlaying = false;\n              updatePlayButtonIcon();\n            });\n        } else {\n          isPlaying = true;\n          updatePlayButtonIcon();\n        }\n      }\n    }\n\n    // Создание запасного варианта для видео\n    function createVideoFallback() {\n      if (!videoContainer) return;\n\n      videoError = true;\n\n      if (videoElement) {\n        videoElement.style.display = 'none';\n      }\n\n      // Получаем перевод для текста ошибки\n      const fallbackText = i18next.t('categories.fallback.videoUnavailable', {\n        defaultValue: 'Видео временно недоступно',\n      });\n\n      videoContainer.innerHTML = `\n        <div class=\"categories__video-fallback\" style=\"height: 300px; display: flex; align-items: center; justify-content: center; background: rgba(15, 23, 42, 0.8); border-radius: 24px;\">\n          <div style=\"text-align: center; padding: 20px;\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" style=\"margin: 0 auto 20px;\">\n              <path d=\"M8 16l12-8-12-8v16z\"></path>\n            </svg>\n            <p style=\"margin: 0; font-size: 16px;\">${fallbackText}</p>\n          </div>\n        </div>\n      `;\n    }\n\n    // Обработчик изменения языка\n    const handleLanguageChange = () => {\n      try {\n        // Обновляем тексты, которые могут меняться динамически\n        updatePlayButtonIcon();\n        updateMuteButtonIcon();\n\n        // Если видео недоступно, обновляем fallback сообщение\n        if (videoError) {\n          createVideoFallback();\n        }\n      } catch (langError) {\n        console.error('Ошибка при обновлении языка в видео секции:', langError);\n      }\n    };\n\n    // Подписываемся на событие смены языка\n    window.addEventListener(LANGUAGE_CHANGE_EVENT, handleLanguageChange);\n\n    // Инициализация видео с ленивой загрузкой\n    if (videoElement) {\n      // Базовые настройки видео\n      videoElement.muted = true;\n      videoElement.loop = true;\n      videoElement.playsInline = true;\n\n      // Отключаем предварительную загрузку видео\n      videoElement.preload = 'none';\n\n      // Добавляем постер (первый кадр) для отображения до загрузки видео\n      if (!videoElement.hasAttribute('poster')) {\n        // Используем либо существующий путь к постеру, либо генерируем из пути к видео\n        const posterPath = '/img/video-placeholder.jpg';\n        videoElement.setAttribute('poster', posterPath);\n      }\n\n      // Временно удаляем src для предотвращения автозагрузки\n      const sourceTags = videoElement.querySelectorAll('source');\n      let videoSrc = '';\n      if (sourceTags.length > 0) {\n        videoSrc = sourceTags[0].getAttribute('src');\n        // Не устанавливаем src пока пользователь не нажмет кнопку воспроизведения\n        videoElement.removeAttribute('src');\n      }\n\n      // Стили видимости\n      videoElement.style.display = 'block';\n      videoElement.style.visibility = 'visible';\n      videoElement.style.opacity = '1';\n      videoElement.style.width = '100%';\n      videoElement.style.borderRadius = '24px';\n\n      if (videoContainer) {\n        videoContainer.style.minHeight = '200px';\n      }\n\n      // Обработчики событий видео\n      videoElement.addEventListener('loadedmetadata', () => {\n        try {\n          console.log('Метаданные видео загружены');\n          videoLoaded = true;\n\n          // Настраиваем ползунок времени\n          if (videoSlider && !isNaN(videoElement.duration)) {\n            videoSlider.max = videoElement.duration;\n\n            if (durationElement) {\n              durationElement.textContent = formatTime(videoElement.duration);\n            }\n          }\n        } catch (err) {\n          console.error('Ошибка при обработке метаданных видео:', err);\n        }\n      });\n\n      // Обработчик обновления времени видео\n      videoElement.addEventListener('timeupdate', () => {\n        try {\n          if (videoSlider && !isNaN(videoElement.currentTime)) {\n            videoSlider.value = videoElement.currentTime;\n\n            if (currentTimeElement) {\n              currentTimeElement.textContent = formatTime(\n                videoElement.currentTime\n              );\n            }\n          }\n        } catch (err) {\n          console.error('Ошибка при обновлении времени видео:', err);\n        }\n      });\n\n      // Обработчик ошибок загрузки видео\n      videoElement.addEventListener('error', () => {\n        console.error('Ошибка при загрузке видео');\n        createVideoFallback();\n      });\n\n      // Реализуем ленивую загрузку через Intersection Observer\n      if ('IntersectionObserver' in window) {\n        const videoObserver = new IntersectionObserver(\n          entries => {\n            entries.forEach(entry => {\n              // Если элемент видим в зоне просмотра, подготавливаем видео\n              if (entry.isIntersecting) {\n                // Подготавливаем видео, но не воспроизводим его\n                if (\n                  !videoLoaded &&\n                  !videoElement.getAttribute('src') &&\n                  videoSrc\n                ) {\n                  // Устанавливаем preload=\"metadata\" для загрузки только метаданных\n                  videoElement.preload = 'metadata';\n                  // videoElement.setAttribute('src', videoSrc);\n                  // Не устанавливаем src здесь, только когда пользователь нажмет play\n                }\n\n                // Отключаем наблюдатель после подготовки\n                videoObserver.unobserve(videoElement);\n              }\n            });\n          },\n          {\n            root: null,\n            rootMargin: '0px',\n            threshold: 0.1,\n          }\n        );\n\n        // Начинаем наблюдение за видео элементом\n        videoObserver.observe(videoElement);\n      }\n    }\n\n    // Назначаем обработчики событий для элементов управления\n    if (playButton) {\n      playButton.addEventListener('click', e => {\n        e.stopPropagation();\n        togglePlay();\n      });\n    }\n\n    if (muteButton) {\n      muteButton.addEventListener('click', e => {\n        e.stopPropagation();\n\n        if (videoElement) {\n          isMuted = !isMuted;\n          videoElement.muted = isMuted;\n          updateMuteButtonIcon();\n        }\n      });\n    }\n\n    if (videoSlider) {\n      videoSlider.addEventListener('input', e => {\n        if (videoElement) {\n          try {\n            const time = parseFloat(e.target.value);\n            if (!isNaN(time)) {\n              videoElement.currentTime = time;\n            }\n          } catch (err) {\n            console.error('Ошибка при изменении времени видео:', err);\n          }\n        }\n      });\n    }\n\n    if (videoContainer) {\n      videoContainer.addEventListener('click', e => {\n        if (!e.target.closest('.categories__video-controls')) {\n          togglePlay();\n        }\n      });\n    }\n\n    // Обновляем начальное состояние кнопок\n    updatePlayButtonIcon();\n    updateMuteButtonIcon();\n\n    // Добавляем класс, указывающий, что инициализация завершена\n    sectionRef.classList.add('initialized');\n\n    // Обеспечиваем поддержку RTL языков\n    const handleRTLChange = () => {\n      try {\n        // Проверяем, является ли текущий язык RTL-языком\n        const isRTL = document.documentElement.dir === 'rtl';\n\n        if (isRTL) {\n          sectionRef.classList.add('rtl');\n          if (contentRef) {\n            contentRef.classList.add('rtl');\n          }\n        } else {\n          sectionRef.classList.remove('rtl');\n          if (contentRef) {\n            contentRef.classList.remove('rtl');\n          }\n        }\n      } catch (rtlError) {\n        console.error('Ошибка при обработке RTL в видео секции:', rtlError);\n      }\n    };\n\n    // Сразу вызываем для текущего состояния\n    handleRTLChange();\n\n    // Подписываемся на событие изменения языка для RTL поддержки\n    window.addEventListener(LANGUAGE_CHANGE_EVENT, handleRTLChange);\n\n    // Показываем секцию даже при ошибке\n    if (sectionRef) {\n      sectionRef.style.display = 'block';\n    }\n\n    return {\n      togglePlay,\n      cleanup: () => {\n        if (videoElement) {\n          videoElement.pause();\n          videoElement.removeAttribute('src');\n          videoElement.load();\n        }\n\n        // Удаляем обработчики событий\n        window.removeEventListener(LANGUAGE_CHANGE_EVENT, handleLanguageChange);\n        window.removeEventListener(LANGUAGE_CHANGE_EVENT, handleRTLChange);\n      },\n    };\n  } catch (error) {\n    console.error('Критическая ошибка в initCategories:', error);\n\n    // Показываем секцию даже при ошибке\n    const sectionRef = document.getElementById('categories');\n    if (sectionRef) {\n      sectionRef.style.display = 'block';\n    }\n\n    return {};\n  }\n}\n","// Функция для инициализации элегантного аккордеона FAQ с поддержкой i18n\nimport i18next from 'i18next'; // Импортируем i18next для доступа к переводам\n\n// Сохраняем глобальную ссылку на текущий инстанс аккордеона\nlet currentAccordionInstance = null;\n\nfunction initFaqAccordion() {\n  console.log('Инициализация аккордеона FAQ начата');\n\n  // Если у нас уже есть активный аккордеон, сначала очистим его\n  if (\n    currentAccordionInstance &&\n    typeof currentAccordionInstance.destroy === 'function'\n  ) {\n    console.log(\n      'Уничтожение предыдущего аккордеона перед новой инициализацией'\n    );\n    currentAccordionInstance.destroy();\n    currentAccordionInstance = null;\n  }\n\n  // Находим все элементы аккордеона\n  const accordionItems = document.querySelectorAll('.accordion__item');\n\n  if (accordionItems.length === 0) {\n    console.warn('FAQ аккордеон: элементы не найдены');\n    return null;\n  }\n\n  console.log(`FAQ аккордеон: найдено ${accordionItems.length} вопросов`);\n\n  // Сохраняем ссылки на обработчики для каждого элемента\n  const clickHandlers = new Map();\n\n  // Функция для плавного закрытия всех элементов аккордеона\n  const closeAllItems = (exceptItem = null) => {\n    accordionItems.forEach(item => {\n      if (item !== exceptItem && item.classList.contains('active')) {\n        item.classList.remove('active');\n\n        // Обновляем ARIA-атрибуты при закрытии\n        const header = item.querySelector('.accordion__header');\n        const content = item.querySelector('.accordion__content');\n\n        if (header) {\n          header.setAttribute('aria-expanded', 'false');\n        }\n\n        if (content) {\n          // Добавляем небольшую задержку перед скрытием для анимации\n          setTimeout(() => {\n            if (!item.classList.contains('active')) {\n              content.setAttribute('hidden', 'true');\n            }\n          }, 500);\n        }\n      }\n    });\n  };\n\n  // Проверка поддержки RTL\n  const checkAndApplyRTL = () => {\n    const rtlLanguages = ['ar'];\n    const isRTL = rtlLanguages.includes(i18next.language);\n    console.log(\n      `Применение RTL стилей для аккордеона: ${isRTL ? 'да' : 'нет'}`\n    );\n\n    // Применяем RTL стили для аккордеона если язык арабский\n    accordionItems.forEach(item => {\n      const header = item.querySelector('.accordion__header');\n      const content = item.querySelector('.accordion__content');\n\n      if (isRTL) {\n        // Отзеркаливаем заголовок аккордеона для RTL\n        if (header) {\n          header.style.flexDirection = 'row-reverse';\n        }\n\n        // Настраиваем текстовое выравнивание для RTL\n        if (content) {\n          content.style.textAlign = 'right';\n          content.style.direction = 'rtl';\n        }\n      } else {\n        // Возвращаем стандартные LTR стили\n        if (header) {\n          header.style.flexDirection = '';\n        }\n\n        if (content) {\n          content.style.textAlign = '';\n          content.style.direction = '';\n        }\n      }\n    });\n  };\n\n  // Вызываем проверку RTL при инициализации\n  checkAndApplyRTL();\n\n  // Добавляем обработчики событий для каждого заголовка аккордеона\n  accordionItems.forEach((item, index) => {\n    const header = item.querySelector('.accordion__header');\n    const toggleBtn = item.querySelector('.accordion__toggle');\n    const content = item.querySelector('.accordion__content');\n\n    if (!header || !toggleBtn || !content) {\n      console.warn('FAQ аккордеон: структура элемента неполная', item);\n      return;\n    }\n\n    // Добавляем эффект пульсации к первому элементу для привлечения внимания\n    if (index === 0) {\n      setTimeout(() => {\n        toggleBtn.classList.add('pulse');\n        setTimeout(() => {\n          toggleBtn.classList.remove('pulse');\n        }, 1500);\n      }, 1000);\n    }\n\n    // Улучшаем кликабельность - устанавливаем курсор pointer для всего header\n    header.style.cursor = 'pointer';\n\n    // Обработчик клика по заголовку или кнопке - используем замыкание для сохранения ссылки на элементы\n    const handleClick = (function (\n      itemElement,\n      headerElement,\n      toggleBtnElement,\n      contentElement\n    ) {\n      return function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        console.log('Клик по элементу аккордеона:', itemElement);\n\n        // Анимируем кнопку\n        toggleBtnElement.classList.add('clicked');\n        setTimeout(() => toggleBtnElement.classList.remove('clicked'), 300);\n\n        // Если элемент уже активен, просто закрываем его с анимацией\n        if (itemElement.classList.contains('active')) {\n          console.log('Закрытие активного элемента аккордеона');\n          itemElement.classList.remove('active');\n          headerElement.setAttribute('aria-expanded', 'false');\n\n          // Используем setTimeout для добавления hidden после завершения анимации\n          setTimeout(() => {\n            if (!itemElement.classList.contains('active')) {\n              contentElement.setAttribute('hidden', 'true');\n            }\n          }, 500);\n\n          return;\n        }\n\n        // Закрываем все элементы перед открытием нового\n        closeAllItems(itemElement);\n\n        // Открываем текущий элемент\n        itemElement.classList.add('active');\n        headerElement.setAttribute('aria-expanded', 'true');\n        contentElement.removeAttribute('hidden');\n\n        console.log('Открытие элемента аккордеона:', itemElement);\n\n        // Плавно прокручиваем к открытому элементу, если он не полностью видим\n        const headerRect = headerElement.getBoundingClientRect();\n        const isHeaderVisible =\n          headerRect.top >= 10 && headerRect.bottom <= window.innerHeight - 10;\n\n        if (!isHeaderVisible) {\n          setTimeout(() => {\n            window.scrollTo({\n              top: window.scrollY + headerRect.top - 100,\n              behavior: 'smooth',\n            });\n          }, 100); // небольшая задержка для анимации\n        }\n      };\n    })(item, header, toggleBtn, content);\n\n    // Сохраняем ссылку на обработчик для дальнейшего удаления\n    clickHandlers.set(item, handleClick);\n\n    // Удаляем существующие обработчики событий перед добавлением новых\n    header.removeEventListener('click', clickHandlers.get(item));\n    toggleBtn.removeEventListener('click', clickHandlers.get(item));\n    header.removeEventListener('keydown', clickHandlers.get(item));\n\n    // Устанавливаем обработчики для всего заголовка\n    header.addEventListener('click', handleClick);\n\n    // Убеждаемся что все дочерние элементы заголовка не перехватывают клики\n    // (кроме кнопки toggle, у которой есть свой обработчик)\n    const headerChildren = header.querySelectorAll('*:not(.accordion__toggle)');\n    headerChildren.forEach(child => {\n      child.style.pointerEvents = 'none';\n    });\n\n    // ИСПРАВЛЕНИЕ: фиксируем обработчик клика для кнопки переключения\n    toggleBtn.style.pointerEvents = 'auto';\n    // Не используем stopPropagation здесь, и просто вызываем напрямую handleClick\n    toggleBtn.addEventListener('click', handleClick);\n\n    // Для доступности добавляем атрибуты ARIA если их ещё нет\n    const questionId =\n      header.id || `faq-question-${Math.random().toString(36).substring(2, 9)}`;\n    const answerId =\n      content.id || `faq-answer-${Math.random().toString(36).substring(2, 9)}`;\n\n    header.setAttribute('id', questionId);\n    header.setAttribute(\n      'aria-expanded',\n      item.classList.contains('active') ? 'true' : 'false'\n    );\n    header.setAttribute('aria-controls', answerId);\n    header.setAttribute('role', 'button'); // Добавляем роль кнопки\n    header.setAttribute('tabindex', '0'); // Делаем доступным через Tab\n\n    content.setAttribute('id', answerId);\n    content.setAttribute('aria-labelledby', questionId);\n    content.setAttribute('role', 'region');\n    if (!item.classList.contains('active')) {\n      content.setAttribute('hidden', 'true');\n    } else {\n      content.removeAttribute('hidden');\n    }\n\n    // Добавляем возможность активации через клавишу Enter и пробел\n    header.addEventListener('keydown', e => {\n      if (e.key === 'Enter' || e.key === ' ') {\n        e.preventDefault();\n        handleClick(e);\n      }\n    });\n  });\n\n  // Улучшенная отзывчивость на клавиатуру для доступности\n  const handleKeyboardNavigation = e => {\n    if (e.key === 'Escape') {\n      // Закрыть все элементы при нажатии Escape\n      closeAllItems();\n      return;\n    }\n\n    // Получаем активный элемент\n    const activeItem = document.activeElement.closest('.accordion__item');\n    if (!activeItem) return;\n\n    const items = Array.from(accordionItems);\n    const currentIndex = items.indexOf(activeItem);\n\n    if (currentIndex === -1) return;\n\n    let targetIndex;\n\n    // Учитываем направление текста (RTL/LTR) при навигации с клавиатуры\n    const isRTL = document.documentElement.dir === 'rtl';\n\n    switch (e.key) {\n      case 'ArrowDown':\n        targetIndex = (currentIndex + 1) % items.length;\n        break;\n      case 'ArrowUp':\n        targetIndex = (currentIndex - 1 + items.length) % items.length;\n        break;\n      case 'ArrowRight':\n        // В RTL режиме стрелка вправо работает в обратном направлении\n        targetIndex = isRTL\n          ? (currentIndex - 1 + items.length) % items.length\n          : (currentIndex + 1) % items.length;\n        break;\n      case 'ArrowLeft':\n        // В RTL режиме стрелка влево работает в обратном направлении\n        targetIndex = isRTL\n          ? (currentIndex + 1) % items.length\n          : (currentIndex - 1 + items.length) % items.length;\n        break;\n      case 'Home':\n        targetIndex = 0;\n        break;\n      case 'End':\n        targetIndex = items.length - 1;\n        break;\n      default:\n        return;\n    }\n\n    const targetHeader = items[targetIndex].querySelector('.accordion__header');\n    if (targetHeader) {\n      targetHeader.focus();\n      e.preventDefault();\n    }\n  };\n\n  // Удаляем прежний обработчик для клавиатурной навигации если он есть\n  document.removeEventListener('keydown', handleKeyboardNavigation);\n\n  // Добавляем обработчик для навигации с клавиатуры\n  document.addEventListener('keydown', handleKeyboardNavigation);\n\n  // Удаляем прежний обработчик события смены языка\n  window.removeEventListener('languageChanged', checkAndApplyRTL);\n\n  // Слушаем событие смены языка для обновления RTL стилей\n  window.addEventListener('languageChanged', checkAndApplyRTL);\n\n  console.log('FAQ аккордеон успешно инициализирован');\n\n  // Создаем API для внешнего взаимодействия с аккордеоном\n  const accordionAPI = {\n    openItem: index => {\n      if (index >= 0 && index < accordionItems.length) {\n        closeAllItems(accordionItems[index]);\n        accordionItems[index].classList.add('active');\n\n        const header =\n          accordionItems[index].querySelector('.accordion__header');\n        const content = accordionItems[index].querySelector(\n          '.accordion__content'\n        );\n\n        if (header) header.setAttribute('aria-expanded', 'true');\n        if (content) content.removeAttribute('hidden');\n      }\n    },\n    closeAll: () => closeAllItems(),\n    // Функция для обновления аккордеона при смене языка\n    updateContent: () => {\n      checkAndApplyRTL();\n      console.log('Аккордеон обновлен после смены языка');\n    },\n    // Функция очистки при уничтожении\n    destroy: () => {\n      try {\n        console.log('Начало уничтожения аккордеона');\n\n        window.removeEventListener('languageChanged', checkAndApplyRTL);\n        document.removeEventListener('keydown', handleKeyboardNavigation);\n\n        // Правильно удаляем обработчики событий для всех элементов\n        accordionItems.forEach(item => {\n          const header = item.querySelector('.accordion__header');\n          const toggleBtn = item.querySelector('.accordion__toggle');\n          const handler = clickHandlers.get(item);\n\n          if (header && handler) {\n            header.removeEventListener('click', handler);\n            header.removeEventListener('keydown', handler);\n          }\n\n          if (toggleBtn && handler) {\n            toggleBtn.removeEventListener('click', handler);\n          }\n\n          // Восстанавливаем pointer-events для дочерних элементов\n          if (header) {\n            const headerChildren = header.querySelectorAll(\n              '*:not(.accordion__toggle)'\n            );\n            headerChildren.forEach(child => {\n              child.style.pointerEvents = '';\n            });\n          }\n        });\n\n        // Очищаем Map с обработчиками\n        clickHandlers.clear();\n\n        console.log('Аккордеон успешно уничтожен');\n        return true;\n      } catch (error) {\n        console.error('Ошибка при удалении аккордеона:', error);\n        return false;\n      }\n    },\n  };\n\n  // Сохраняем текущий инстанс\n  currentAccordionInstance = accordionAPI;\n\n  return accordionAPI;\n}\n\n// Экспортируем функцию инициализации\nexport { initFaqAccordion };\n\n// Если скрипт подключается напрямую без модульной системы\nif (typeof window !== 'undefined') {\n  // Инициализируем аккордеон при загрузке DOM\n  document.addEventListener('DOMContentLoaded', () => {\n    // Проверяем, существует ли уже аккордеон\n    if (!window.faqAccordeon) {\n      window.faqAccordeon = initFaqAccordion();\n    }\n\n    // Подписываемся на событие смены языка\n    window.addEventListener('languageChanged', event => {\n      console.log('Обработчик события languageChanged вызван в accordion.js');\n      if (\n        window.faqAccordeon &&\n        typeof window.faqAccordeon.updateContent === 'function'\n      ) {\n        window.faqAccordeon.updateContent();\n      } else {\n        console.log('Переинициализация аккордеона после смены языка');\n        window.faqAccordeon = initFaqAccordion();\n      }\n    });\n  });\n\n  // Для совместимости с существующей структурой проекта\n  window.initFaqAccordion = initFaqAccordion;\n}\n","// Articles.js - Инициализатор секции Articles с поддержкой i18n и SEO-оптимизацией\nimport { initFaqAccordion } from './accordion.js';\nimport i18next from 'i18next'; // Импортируем i18next для доступа к переводам\n\n// Флаг для отслеживания состояния инициализации\nlet isInitialized = false;\n\nexport function initArticles(forceReinitialize = false) {\n  // В App.js элементы загружаются со строчной первой буквой в id\n  const articlesSection = document.getElementById('articles');\n\n  console.log('Инициализация Articles:', {\n    forceReinitialize,\n    isInitialized,\n    sectionExists: !!articlesSection,\n  });\n\n  if (!articlesSection) {\n    console.warn('Секция Articles не найдена в DOM, пробуем найти с другим id');\n    // Пробуем альтернативные варианты id\n    const alternativeId =\n      document.querySelector('.articles') ||\n      document.querySelector('section[id^=\"articles\"]') ||\n      document.querySelector('section.articles');\n\n    if (!alternativeId) {\n      console.error('Не удалось найти секцию Articles в DOM никаким способом');\n      // Выводим структуру DOM для отладки\n      console.debug('Структура DOM:', document.body.innerHTML);\n      return;\n    }\n\n    // Если нашли элемент, но у него нет id=\"articles\", добавляем его\n    if (!alternativeId.id) {\n      alternativeId.id = 'articles';\n    }\n\n    console.log(\n      'Найден альтернативный элемент для секции Articles:',\n      alternativeId\n    );\n  }\n\n  console.log(\n    'Инициализация секции Articles с SEO-оптимизацией и поддержкой i18n'\n  );\n\n  // Функция для получения локализованных текстов с запасными вариантами\n  const getLocalizedContent = (key, defaultText) => {\n    const translation = i18next.t(key, { defaultValue: defaultText });\n    return translation !== key ? translation : defaultText;\n  };\n\n  // Объявление структуры статей перенесено в отдельный файл paste.txt\n  const articles = [\n    {\n      id: 1,\n      title: getLocalizedContent(\n        'articles.article.1.title',\n        'R36S Retro Gaming'\n      ),\n      sections: [\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.1.sections.1.subtitle',\n            'R36S: The Ultimate Handheld Gaming Console for Retro Gaming Enthusiasts'\n          ),\n          content: getLocalizedContent(\n            'articles.article.1.sections.1.content',\n            `Welcome to the official home of the <strong>R36S handheld gaming console</strong>. The R36S has quickly become the go-to device for retro gaming enthusiasts across the <em>United States</em>, <em>United Kingdom</em>, and <em>Australia</em>. This powerful portable gaming system offers an exceptional combination of performance, versatility, and value that puts other retro consoles to shame. Whether you're reliving childhood classics or discovering retro gems for the first time, the <mark>R36S console</mark> delivers an unmatched gaming experience. Many gamers compare the <span>R36S vs Anbernic</span> models and consistently find that the R36S offers superior features at a more competitive price point. Ready to elevate your portable gaming experience? The R36S is now available for purchase online with special promotional pricing for a limited time.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.1.sections.2.subtitle',\n            'Comprehensive R36S Review: Performance That Exceeds Expectations'\n          ),\n          content: getLocalizedContent(\n            'articles.article.1.sections.2.content',\n            `After extensive testing, our <strong>R36S review</strong> confirms what many gamers have discovered – this console punches well above its weight class. The <mark>R36S emulator performance</mark> is particularly impressive, handling everything from 8-bit classics to more demanding 32-bit titles with remarkable smoothness. Games load quickly and run without the lag or frame drops that plague lesser devices. The <strong>R36S specs</strong> include a powerful processor paired with ample RAM that ensures consistent performance across various emulation platforms. What truly sets the R36S console apart in our review is its ability to handle multiple emulation systems without compromising on quality. Unlike competitors in the same price range, the R36S maintains excellent performance even with graphically intensive games. Players across <em>North America</em> and <em>Europe</em> have shared <mark>R36S reviews</mark> praising its reliable performance during extended gaming sessions. <a href=\"https://www.aliexpress.com/item/1005007171465465.html\" title=\"Order R36S Gaming Console\" target=\"_blank\" rel=\"nofollow\">Order your R36S today</a> to experience this exceptional performance firsthand at our special online price.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.1.sections.3.subtitle',\n            'How to Install Games on R36S: Simple Setup for Maximum Fun'\n          ),\n          content: getLocalizedContent(\n            'articles.article.1.sections.3.content',\n            `Learning <strong>how to install ROMs on R36S</strong> is refreshingly straightforward. The console's user-friendly interface makes the process accessible even for those new to retro gaming handhelds. First, you'll need to format a microSD card (up to 512GB supported) using your computer. Then, download your preferred game files and organize them in folders corresponding to each console type. After inserting the card into your R36S, the built-in menu system automatically detects and categorizes your games for easy access. The <mark>R36S setup guide</mark> included with every purchase walks you through this process with clear, step-by-step instructions. Additionally, the R36S console supports various file formats, eliminating compatibility headaches common with other devices. Customers in <em>Canada</em>, <em>Australia</em>, and throughout <em>Europe</em> appreciate how the R36S simplifies the game installation process. Need more guidance? The complete <strong>R36S setup guide</strong> is available on our website, along with video tutorials. Don't miss our current sale price on the R36S – <a href=\"https://www.aliexpress.com/item/1005007171465465.html\" title=\"Order R36S Now\" target=\"_blank\" rel=\"nofollow\">order now</a> while supplies last!`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.1.sections.4.subtitle',\n            'R36S Specifications: Hardware That Delivers Premium Gaming Experience'\n          ),\n          content: getLocalizedContent(\n            'articles.article.1.sections.4.content',\n            `The impressive <strong>R36S specifications</strong> explain why this console has garnered such positive attention. At its heart, the R36S boasts a quad-core processor clocked at 1.5GHz, paired with 1GB of DDR3 RAM for smooth multitasking. The <mark>R36S screen resolution</mark> of 640x480 on its 3.5-inch IPS display delivers crisp visuals with excellent color reproduction and wide viewing angles. This display quality significantly enhances the gaming experience, particularly for pixel-art classics. The <strong>R36S battery life</strong> extends to an impressive 6-8 hours of continuous play on a single charge, with charging time of approximately 2-3 hours via the USB-C port. Storage options are flexible, with support for microSD cards up to 512GB, allowing an extensive game library. The <mark>R36S controller layout</mark> features a responsive D-pad, dual analog sticks, four action buttons, and shoulder triggers that provide precise control across different game genres. Available in multiple colors, the R36S is currently offered at a special promotional price in the <em>UK</em>, <em>USA</em>, and throughout <em>Asia</em>. Check our website for the current <strong>R36S price</strong> and available discount offers.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.1.sections.5.subtitle',\n            'Best Games for R36S: Thousands of Classics at Your Fingertips'\n          ),\n          content: getLocalizedContent(\n            'articles.article.1.sections.5.content',\n            `The <strong>R36S console</strong> truly shines when loaded with the best games that showcase its capabilities. The system excels at running 8-bit and 16-bit classics from Nintendo, Sega, and other iconic platforms with perfect emulation. More impressively, the R36S handles PlayStation 1 titles with remarkable fidelity, maintaining smooth framerates even in 3D games. Fighting game enthusiasts praise the <mark>R36S controller layout</mark> and responsive buttons, which make titles like Street Fighter and King of Fighters a joy to play. RPG fans can enjoy lengthy adventures like Final Fantasy and Chrono Trigger with the benefit of the extended <strong>R36S battery life</strong>. The console's excellent <mark>R36S sound quality</mark> and speakers deliver immersive audio, though many users opt for headphones for the full experience. The R36S firmware supports save states across all emulators, allowing you to pause and resume your progress at any time. Gamers in <em>Mexico</em>, <em>Brazil</em>, and across <em>South America</em> have particularly embraced the R36S for its extensive game compatibility. <a href=\"https://www.aliexpress.com/item/1005007171465465.html\" title=\"Order R36S Gaming Console\" target=\"_blank\" rel=\"nofollow\">Order your R36S today</a> from our official online store to receive exclusive bonus content and take advantage of our current sale price.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.1.sections.6.subtitle',\n            'A Unique Gaming Experience with R36S'\n          ),\n          content: getLocalizedContent(\n            'articles.article.1.sections.6.content',\n            `The <strong>R36S</strong> has garnered attention for its impressive gaming library, housing over 15,000 titles in the 64GB model and expanding to approximately 20,000 games in the 128GB version. This comprehensive collection spans across several iconic gaming platforms, including: <ul><li><strong>Nintendo Entertainment System (NES)</strong></li><li><strong>Super Nintendo Entertainment System (SNES)</strong></li><li><strong>Sega Genesis</strong></li><li><strong>PlayStation 1</strong></li><li><strong>Nintendo 64</strong></li><li><strong>Game Boy Advance</strong></li><li><strong>Nintendo DS</strong></li><li><strong>PlayStation Portable (PSP)</strong></li></ul><p>This extraordinary compilation allows enthusiasts to journey through the golden era of gaming across multiple legendary platforms, all within a single portable device.</p><p class=\"article__highlight\"><strong>R36S Standout Gaming Experiences</strong><br>While the device offers thousands of nostalgic adventures, certain masterpieces particularly shine through:<ul><li><strong>Super Mario Bros.</strong> (NES): The revolutionary platformer that defined an entire genre and laid the groundwork for countless games to follow.</li><li><strong>The Legend of Zelda: A Link to the Past</strong> (SNES): A timeless adventure that masterfully combines puzzle-solving, exploration, and combat into an unforgettable experience.</li><li><strong>Sonic the Hedgehog</strong> (Sega Genesis): Sega's signature blue speedster that challenged Nintendo's dominance with its distinctive fast-paced gameplay.</li><li><strong>Final Fantasy VII</strong> (PlayStation 1): The groundbreaking RPG that transformed video game storytelling with its complex characters and emotional narrative.</li><li><strong>Super Mario 64</strong> (Nintendo 64): The trailblazing 3D platformer that revolutionized how players interact with virtual worlds.</li><li><strong>Pokémon FireRed</strong> (Game Boy Advance): The beloved reimagining of the original Pokémon Red, enhanced with additional features and improved graphics.</li><li><strong>Mario Kart DS</strong> (Nintendo DS): An exhilarating racing experience offering endless entertainment through its inventive tracks and competitive multiplayer.</li><li><strong>God of War: Chains of Olympus</strong> (PSP): An action-packed epic showcasing the impressive capabilities of Sony's handheld console.</li></ul>These highlighted gems represent merely a glimpse into the vast array of quality titles available on the <mark>R36S</mark>, catering to diverse gaming preferences from casual play to hardcore challenges.</p>`\n          ),\n        },\n      ],\n    },\n    {\n      id: 2,\n      title: getLocalizedContent(\n        'articles.article.2.title',\n        'R36S Official Website'\n      ),\n      sections: [\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.1.subtitle',\n            'R36S Official Website - The Ultimate Gaming Experience at Your Fingertips'\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.1.content',\n            `Welcome to the <strong>R36S Official Website</strong>, your premier destination for cutting-edge handheld gaming technology. Our revolutionary gaming console has transformed the portable gaming landscape, offering unprecedented performance in a sleek, ergonomic design. The <mark>R36S</mark> combines powerful hardware with intuitive controls to deliver an immersive gaming experience wherever you go. Whether you're a casual gamer or a dedicated enthusiast, the <strong>R36S game console</strong> provides the perfect balance of power, portability, and playability. Discover why gamers across <em>North America</em>, <em>Europe</em>, and <em>Asia</em> are choosing the R36S as their preferred handheld gaming device. Continue reading to learn about our exclusive features, technical specifications, and why the R36S stands apart from other gaming consoles on the market today.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.2.subtitle',\n            'Discover the Revolutionary R36S Handheld Gaming Experience'\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.2.content',\n            `The <strong>R36S handheld</strong> represents the next generation of portable gaming technology. Unlike conventional gaming devices, the R36S handheld features an advanced cooling system that prevents overheating during extended gaming sessions. Additionally, the vibrant high-resolution display ensures crystal-clear visuals even in bright outdoor conditions. Moreover, the <mark>R36S game console</mark> includes customizable controls that adapt to your unique gaming style. Furthermore, the lightweight yet durable construction makes the R36S perfect for gaming on the go. Meanwhile, the extended battery life keeps you playing for hours without interruption. Subsequently, the intuitive user interface makes navigating between games and settings effortless. In contrast to other portable systems, the <strong>R36S handheld</strong> offers exceptional value without compromising on quality. Consequently, gamers in the <em>United Kingdom</em>, <em>Australia</em>, and <em>Canada</em> can <a href=\"https://www.aliexpress.com/item/1005007171465465.html\" title=\"Order R36S Online\" target=\"_blank\" rel=\"nofollow\">order online</a> and experience the difference today. However, limited-time promotional pricing makes this the ideal time to purchase your R36S game console.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.3.subtitle',\n            'Unmatched Performance in the R36S Game Console'\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.3.content',\n            `The heart of the <strong>R36S game console</strong> lies in its powerful processing capabilities. Specifically, the custom-designed CPU and GPU combination delivers desktop-quality graphics in a handheld format. In particular, the advanced thermal management system prevents throttling during intensive gaming sessions. Similarly, the high-speed RAM ensures smooth multitasking between games and applications. Likewise, the expandable storage options allow you to carry your entire game library wherever you go. Certainly, the <mark>R36S handheld's</mark> performance metrics exceed industry standards in its price range. Nevertheless, the energy-efficient design maintains battery life without sacrificing processing power. Above all, the <strong>R36S game console's</strong> architecture supports both retro classics and modern gaming experiences. Therefore, gamers looking for performance and versatility consistently choose the R36S. Indeed, retailers across <em>Germany</em>, <em>France</em>, and <em>Japan</em> report steadily increasing demand for this innovative gaming device. Finally, manufacturer specifications confirm that the R36S outperforms competing handhelds costing significantly more.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.4.subtitle',\n            \"Enhanced Gaming Experience with the R36S Handheld's Exclusive Features\"\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.4.content',\n            `The <strong>R36S handheld</strong> comes equipped with numerous exclusive features designed to enhance your gaming experience. First, the haptic feedback system provides immersive tactile responses that correspond with in-game actions. Second, the adjustable performance modes allow you to prioritize either graphical fidelity or battery conservation. Third, the integrated voice chat functionality eliminates the need for external communication devices. Fourth, the customizable RGB lighting adds a personal touch to your gaming setup. Fifth, the quick-resume feature lets you instantly return to your game after a break. Sixth, the dedicated streaming mode optimizes performance for content creators. Meanwhile, the brand's commitment to quality ensures each <mark>R36S game console</mark> meets rigorous standards before shipping. As a result, customers in <em>Spain</em>, <em>Italy</em>, and <em>South Korea</em> can shop confidently knowing they're receiving a premium product. Consequently, the history of the brand demonstrates consistent innovation in the gaming sector. Therefore, the manufacturer continues to support the R36S with regular firmware updates and expanded compatibility.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.5.subtitle',\n            'Why Gamers Worldwide Choose the R36S Official Website for Their Gaming Needs'\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.5.content',\n            `The <strong>R36S Official Website</strong> offers distinct advantages for discerning gamers seeking the ultimate handheld experience. Primarily, exclusive online-only configurations provide enhanced specifications unavailable through retail channels. Additionally, direct purchases from the <mark>R36S Official Website</mark> include extended warranty coverage at no additional cost. Furthermore, members of the official online community gain early access to firmware updates and beta features. Moreover, the official online store frequently offers promotional pricing unavailable elsewhere. Consequently, the <strong>R36S game console</strong> purchased directly from the manufacturer includes premium accessories in standard packages. Subsequently, customers in <em>Brazil</em>, <em>Mexico</em>, and <em>India</em> benefit from regionalized payment options and shipping methods. Meanwhile, the brand's commitment to customer satisfaction has established a loyal following in competitive gaming circles. In essence, the <mark>R36S handheld</mark> represents not just a product but an entire ecosystem of gaming innovation. Therefore, visiting the <span>R36S Official Website</span> remains the optimal way to experience everything this revolutionary console offers. Indeed, the manufacturer's direct sales model ensures authenticity and full support for every purchased device.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.6.subtitle',\n            'The Future of Gaming with the R36S Official Website and Upcoming Innovations'\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.6.content',\n            `The <strong>R36S Official Website</strong> stands as the definitive source for information about upcoming innovations in the R36S ecosystem. Primarily, the <mark>R36S game console's</mark> modular design allows for future hardware expansions without requiring a completely new device. Additionally, the development team is actively working on cloud gaming integration to further expand the available game library. Furthermore, the <strong>R36S handheld</strong> will soon support cross-platform multiplayer with major gaming systems. Moreover, announced accessories will enhance the versatility of the base R36S game console for specialized gaming genres. Consequently, early adopters of the R36S platform will benefit from a continuously evolving gaming experience. Subsequently, the price point remains competitive despite these substantial additions to functionality. Meanwhile, the brand continues to expand its presence in emerging markets including <em>Southeast Asia</em> and <em>Eastern Europe</em>. Therefore, the <mark>R36S handheld</mark> represents not just current gaming technology but a future-proof investment. In conclusion, whether you're looking to purchase your first R36S or upgrade from a previous model, the <span>R36S Official Website</span> offers the most comprehensive information and purchase options. Indeed, as the gaming landscape evolves, the <strong>R36S game console</strong> evolves with it, maintaining its position at the forefront of handheld gaming innovation.`\n          ),\n        },\n        {\n          subtitle: getLocalizedContent(\n            'articles.article.2.sections.7.subtitle',\n            'Welcome to the R36S Official Store'\n          ),\n          content: getLocalizedContent(\n            'articles.article.2.sections.7.content',\n            `Discover premium products at the <strong>R36S official store</strong>, your ultimate destination for authentic R36S merchandise. Our official store offers an extensive selection of cutting-edge devices designed to enhance your daily experience. Looking to buy <strong>R36S products</strong> at the best price? The <strong>R36S official store</strong> delivers exceptional value with regular promotions and sales events. <mark>Order online today</mark> and experience the convenience of worldwide shipping from the R36S official store. Our team is dedicated to providing superior customer service, ensuring your shopping experience exceeds expectations. Whether you're searching for the latest releases or popular bestsellers, the <strong>R36S official store</strong> has everything you need. Check out our current <span>special offers</span> and take advantage of exclusive deals available only at the R36S official store. With secure payment options and fast delivery, shopping at the <strong>R36S official store</strong> is both safe and convenient. Join thousands of satisfied customers who trust the R36S official store for authentic products and unmatched quality. Visit our website now or contact our support team to learn more about where to buy R36S products. The <strong>R36S official store</strong> ships to major regions including <em>North America</em>, <em>Europe</em>, <em>Asia</em>, and <em>Australia</em>, making our premium products accessible to customers worldwide. <a href=\"https://www.aliexpress.com/item/1005007171465465.html\" title=\"Visit R36S Official Store\" target=\"_blank\" rel=\"nofollow\">Shop at the R36S official store today</a> and experience the difference that quality products and exceptional service can make.`\n          ),\n        },\n      ],\n    },\n  ];\n  // Создаем HTML структуру для статей с учетом SEO-оптимизации\n  const articlesGrid = articlesSection.querySelector('.articles__grid');\n\n  if (!articlesGrid) {\n    console.error('Элемент .articles__grid не найден в секции Articles');\n    return;\n  }\n\n  // Если это принудительная реинициализация или первичная инициализация,\n  // очищаем сетку и обновляем все элементы\n  if (forceReinitialize || !isInitialized) {\n    console.log('Очистка и пересоздание контента Articles');\n    // Очищаем текущее содержимое сетки перед добавлением новых элементов\n    articlesGrid.innerHTML = '';\n  } else {\n    console.log('Обновление существующего контента Articles');\n    // Обновляем только текстовый контент без полной перестройки DOM\n    updateArticlesText();\n    return;\n  }\n\n  // Добавляем метатеги для SEO\n  const addMetaTags = () => {\n    // Добавляем метатег description, если его еще нет\n    if (!document.querySelector('meta[name=\"description\"]')) {\n      const metaDesc = document.createElement('meta');\n      metaDesc.name = 'description';\n      metaDesc.content = getLocalizedContent(\n        'articles.meta.description',\n        'R36S - The Ultimate Handheld Gaming Console for Retro Gaming. Official website with specifications, reviews, and purchase options.'\n      );\n      document.head.appendChild(metaDesc);\n    }\n\n    // Добавляем метатег keywords, если его еще нет\n    if (!document.querySelector('meta[name=\"keywords\"]')) {\n      const metaKeywords = document.createElement('meta');\n      metaKeywords.name = 'keywords';\n      metaKeywords.content =\n        'R36S, retro gaming, handheld console, portable gaming, R36S specs, R36S review, retro games, emulator, gaming device';\n      document.head.appendChild(metaKeywords);\n    }\n  };\n\n  // Вызываем функцию добавления метатегов\n  addMetaTags();\n\n  // Создаем статьи и добавляем их в контейнер с улучшенной семантической разметкой\n  articles.forEach(article => {\n    const articleElement = document.createElement('article');\n    articleElement.className = 'article';\n    articleElement.id = `article-${article.id}`;\n    articleElement.dataset.articleId = article.id;\n\n    // Добавляем микроразметку Schema.org для статьи\n    articleElement.setAttribute('itemscope', '');\n    articleElement.setAttribute('itemtype', 'http://schema.org/Article');\n\n    // Добавляем заголовок статьи с микроразметкой\n    const titleElement = document.createElement('h2');\n    titleElement.className = 'article__title';\n    titleElement.setAttribute('itemprop', 'headline');\n    // Добавляем data-i18n атрибут для динамического обновления при смене языка\n    titleElement.setAttribute(\n      'data-i18n',\n      `articles.article.${article.id}.title`\n    );\n    titleElement.innerHTML = article.title;\n    articleElement.appendChild(titleElement);\n\n    // Создаем контейнер для контента с микроразметкой\n    const contentContainer = document.createElement('div');\n    contentContainer.className = 'article__content-wrapper';\n    contentContainer.setAttribute('itemprop', 'articleBody');\n\n    // Добавляем секции статьи с улучшенной SEO-разметкой\n    article.sections.forEach((section, index) => {\n      const sectionContainer = document.createElement('section');\n      sectionContainer.className = 'article__section';\n      sectionContainer.id = `section-${article.id}-${index + 1}`;\n\n      // Добавляем подзаголовок только если это не первый раздел или подзаголовок отличается от заголовка\n      if (index !== 0 || section.subtitle !== article.title) {\n        const subtitleElement = document.createElement('h3');\n        subtitleElement.className = 'article__subtitle';\n        // Добавляем data-i18n атрибут для динамического обновления\n        subtitleElement.setAttribute(\n          'data-i18n',\n          `articles.article.${article.id}.sections.${index + 1}.subtitle`\n        );\n        subtitleElement.innerHTML = section.subtitle;\n        sectionContainer.appendChild(subtitleElement);\n      }\n\n      const contentElement = document.createElement('div');\n      contentElement.className = 'article__content';\n\n      // Добавляем data-i18n атрибут для контента секции\n      // Для HTML-контента используем специальный формат, чтобы i18next не отбрасывал HTML-теги\n      contentElement.setAttribute(\n        'data-i18n-html',\n        `articles.article.${article.id}.sections.${index + 1}.content`\n      );\n\n      // Добавляем содержимое с HTML-тегами для SEO\n      contentElement.innerHTML = section.content;\n\n      sectionContainer.appendChild(contentElement);\n      contentContainer.appendChild(sectionContainer);\n    });\n\n    articleElement.appendChild(contentContainer);\n\n    // Добавляем структурированные данные для поисковых роботов\n    const structuredDataScript = document.createElement('script');\n    structuredDataScript.type = 'application/ld+json';\n    const structuredData = {\n      '@context': 'https://schema.org',\n      '@type': 'Article',\n      headline: article.title,\n      description: article.sections[0].content.substring(0, 150) + '...',\n      keywords: 'R36S, retro gaming, handheld console, portable gaming',\n      author: {\n        '@type': 'Organization',\n        name: getLocalizedContent('articles.schema.org.name', 'R36S Official'),\n      },\n      publisher: {\n        '@type': 'Organization',\n        name: getLocalizedContent('articles.schema.org.name', 'R36S'),\n        logo: {\n          '@type': 'ImageObject',\n          url: '/assets/images/r36s-logo.png',\n        },\n      },\n      datePublished: new Date().toISOString(),\n      dateModified: new Date().toISOString(),\n    };\n    structuredDataScript.textContent = JSON.stringify(structuredData);\n    articleElement.appendChild(structuredDataScript);\n\n    // Добавляем семантическую разметку footer для статьи\n    const articleFooter = document.createElement('footer');\n    articleFooter.className = 'article__footer';\n\n    // Добавляем CTA с микроразметкой\n    const ctaButton = document.createElement('a');\n    ctaButton.href = 'https://www.aliexpress.com/item/1005007171465465.html';\n    ctaButton.className = 'article__cta';\n    ctaButton.textContent = getLocalizedContent(\n      'articles.cta.button.text',\n      'Order R36S Now'\n    );\n    ctaButton.setAttribute('data-i18n', 'articles.cta.button.text');\n    ctaButton.setAttribute('itemprop', 'url');\n    ctaButton.setAttribute(\n      'title',\n      getLocalizedContent(\n        'articles.cta.button.title',\n        'Order R36S Gaming Console'\n      )\n    );\n    ctaButton.setAttribute('data-i18n-title', 'articles.cta.button.title');\n    ctaButton.setAttribute('rel', 'nofollow');\n    ctaButton.setAttribute('target', '_blank');\n    articleFooter.appendChild(ctaButton);\n\n    articleElement.appendChild(articleFooter);\n\n    articlesGrid.appendChild(articleElement);\n  });\n\n  // Добавляем заголовок секции для SEO\n  const addSectionHeading = () => {\n    // Проверяем, существует ли уже заголовок\n    let sectionHeading = articlesSection.querySelector('.articles__heading');\n\n    if (!sectionHeading) {\n      sectionHeading = document.createElement('h1');\n      sectionHeading.className = 'articles__heading';\n      sectionHeading.setAttribute('data-i18n', 'articles.heading');\n      sectionHeading.textContent = getLocalizedContent(\n        'articles.heading',\n        'R36S Gaming Console - Official Information'\n      );\n\n      // Добавляем заголовок в начало контейнера\n      articlesSection\n        .querySelector('.articles__container')\n        .insertBefore(\n          sectionHeading,\n          articlesSection.querySelector('.articles__grid')\n        );\n    } else {\n      // Обновляем текст существующего заголовка\n      sectionHeading.textContent = getLocalizedContent(\n        'articles.heading',\n        'R36S Gaming Console - Official Information'\n      );\n    }\n  };\n\n  // Вызываем функцию добавления заголовка\n  addSectionHeading();\n\n  // Инициализируем аккордеон FAQ с небольшой задержкой для уверенности, что DOM загружен\n  setTimeout(() => {\n    try {\n      console.log('Инициализация аккордеона...');\n\n      // Важное изменение: используем единую точку для управления аккордеоном\n      // и проверяем существование аккордеона, прежде чем уничтожать его\n      if (\n        window.faqAccordeon &&\n        typeof window.faqAccordeon.destroy === 'function'\n      ) {\n        console.log(\n          'Уничтожение существующего аккордеона перед реинициализацией'\n        );\n        window.faqAccordeon.destroy();\n        window.faqAccordeon = null;\n      }\n\n      // Важно! Даем DOM обновиться после уничтожения предыдущего аккордеона\n      setTimeout(() => {\n        window.faqAccordeon = initFaqAccordion();\n        console.log('Аккордеон успешно инициализирован:', window.faqAccordeon);\n      }, 100);\n    } catch (error) {\n      console.error('Ошибка при инициализации аккордеона:', error);\n    }\n  }, 300);\n  // Устанавливаем флаг инициализации\n  isInitialized = true;\n\n  // Обработчик смены языка для динамического обновления контента\n  const handleLanguageChange = event => {\n    console.log('Обработчик languageChanged вызван в Articles:', event);\n\n    // Обновляем метатеги\n    addMetaTags();\n\n    // Обновляем заголовок раздела\n    addSectionHeading();\n\n    // Обновляем RTL поддержку\n    updateRTLSupport();\n\n    // Обновляем текстовое содержимое\n    updateArticlesText();\n\n    // ВАЖНОЕ ИЗМЕНЕНИЕ: Теперь вместо реинициализации всей секции Articles,\n    // мы только обновляем аккордеон с небольшой задержкой\n    setTimeout(() => {\n      if (\n        window.faqAccordeon &&\n        typeof window.faqAccordeon.updateContent === 'function'\n      ) {\n        console.log('Обновление содержимого аккордеона после смены языка');\n        window.faqAccordeon.updateContent();\n      } else {\n        console.log(\n          'Переинициализация аккордеона после смены языка (API не найден)'\n        );\n        if (\n          window.faqAccordeon &&\n          typeof window.faqAccordeon.destroy === 'function'\n        ) {\n          window.faqAccordeon.destroy();\n        }\n        window.faqAccordeon = initFaqAccordion();\n      }\n    }, 100);\n  };\n\n  // Функция для обновления текстового содержимого без перестроения DOM\n  function updateArticlesText() {\n    try {\n      console.log(\n        'Обновление текстового содержимого статей без перестроения DOM'\n      );\n\n      // Обновляем заголовок секции\n      const sectionHeading =\n        articlesSection.querySelector('.articles__heading');\n      if (sectionHeading) {\n        const headingKey = sectionHeading.getAttribute('data-i18n');\n        if (headingKey) {\n          const translation = i18next.t(headingKey);\n          if (translation && translation !== headingKey) {\n            sectionHeading.textContent = translation;\n          }\n        }\n      }\n\n      // Обновляем заголовки статей\n      document.querySelectorAll('.article__title').forEach(element => {\n        const key = element.getAttribute('data-i18n');\n        if (key) {\n          const translation = i18next.t(key);\n          if (translation && translation !== key) {\n            element.textContent = translation;\n          }\n        }\n      });\n\n      // Обновляем подзаголовки статей\n      document.querySelectorAll('.article__subtitle').forEach(element => {\n        const key = element.getAttribute('data-i18n');\n        if (key) {\n          const translation = i18next.t(key);\n          if (translation && translation !== key) {\n            element.textContent = translation;\n          }\n        }\n      });\n\n      // Обновляем контент статей, сохраняя HTML-разметку\n      document.querySelectorAll('.article__content').forEach(element => {\n        const key = element.getAttribute('data-i18n-html');\n        if (key) {\n          const translation = i18next.t(key);\n          if (translation && translation !== key) {\n            element.innerHTML = translation;\n          }\n        }\n      });\n\n      // Обновляем кнопки\n      document.querySelectorAll('.article__cta').forEach(element => {\n        const key = element.getAttribute('data-i18n');\n        if (key) {\n          const translation = i18next.t(key);\n          if (translation && translation !== key) {\n            element.textContent = translation;\n          }\n        }\n\n        // Также обновляем атрибут title\n        const titleKey = element.getAttribute('data-i18n-title');\n        if (titleKey) {\n          const titleTranslation = i18next.t(titleKey);\n          if (titleTranslation && titleTranslation !== titleKey) {\n            element.setAttribute('title', titleTranslation);\n          }\n        }\n      });\n\n      // Обновляем FAQ вопросы и ответы\n      document.querySelectorAll('.articles__faq-question').forEach(element => {\n        const key = element.getAttribute('data-i18n');\n        if (key) {\n          const translation = i18next.t(key);\n          if (translation && translation !== key) {\n            element.textContent = translation;\n          }\n        }\n      });\n\n      document.querySelectorAll('.articles__faq-answer p').forEach(element => {\n        const key = element.getAttribute('data-i18n');\n        if (key) {\n          const translation = i18next.t(key);\n          if (translation && translation !== key) {\n            element.textContent = translation;\n          }\n        }\n      });\n\n      // Обновляем связанные ссылки\n      document\n        .querySelectorAll('.articles__related-list a')\n        .forEach(element => {\n          const key = element.getAttribute('data-i18n');\n          if (key) {\n            const translation = i18next.t(key);\n            if (translation && translation !== key) {\n              element.textContent = translation;\n            }\n          }\n\n          // Также обновляем атрибут title\n          const titleKey = element.getAttribute('data-i18n-title');\n          if (titleKey) {\n            const titleTranslation = i18next.t(titleKey);\n            if (titleTranslation && titleTranslation !== titleKey) {\n              element.setAttribute('title', titleTranslation);\n            }\n          }\n        });\n\n      console.log('Текстовое содержимое статей успешно обновлено');\n    } catch (error) {\n      console.error('Ошибка при обновлении текстового содержимого:', error);\n    }\n  }\n\n  // Функция для обновления поддержки RTL языков\n  const updateRTLSupport = () => {\n    try {\n      const rtlLanguages = ['ar'];\n      const currentLanguage = i18next.language;\n      const isRTL = rtlLanguages.includes(currentLanguage);\n\n      // Добавляем или удаляем класс rtl для секции Articles\n      if (isRTL) {\n        articlesSection.classList.add('rtl');\n        // Корректируем выравнивание текста для RTL\n        const articleContentElements =\n          articlesSection.querySelectorAll('.article__content');\n        articleContentElements.forEach(element => {\n          element.style.textAlign = 'right';\n          element.style.direction = 'rtl';\n        });\n\n        // Также корректируем заголовки и подзаголовки\n        const headings = articlesSection.querySelectorAll(\n          '.article__title, .article__subtitle, .articles__heading'\n        );\n        headings.forEach(heading => {\n          heading.style.textAlign = 'right';\n        });\n\n        // Аккордеон FAQ\n        const faqQuestions = articlesSection.querySelectorAll(\n          '.articles__faq-question'\n        );\n        faqQuestions.forEach(question => {\n          question.style.textAlign = 'right';\n        });\n\n        const faqAnswers = articlesSection.querySelectorAll(\n          '.articles__faq-answer'\n        );\n        faqAnswers.forEach(answer => {\n          answer.style.textAlign = 'right';\n          answer.style.direction = 'rtl';\n        });\n      } else {\n        articlesSection.classList.remove('rtl');\n        // Сбрасываем стили для LTR\n        const elements = articlesSection.querySelectorAll(\n          '.article__content, .article__title, .article__subtitle, .articles__heading, .articles__faq-question, .articles__faq-answer'\n        );\n        elements.forEach(element => {\n          element.style.textAlign = '';\n          element.style.direction = '';\n        });\n      }\n    } catch (error) {\n      console.error('Ошибка при обновлении RTL поддержки:', error);\n    }\n  };\n\n  // Удаляем предыдущий обработчик события, если он существует\n  if (window._articlesLanguageChangeHandler) {\n    window.removeEventListener(\n      'languageChanged',\n      window._articlesLanguageChangeHandler\n    );\n  }\n\n  // Сохраняем ссылку на обработчик, чтобы можно было удалить его позже\n  window._articlesLanguageChangeHandler = handleLanguageChange;\n\n  // Подписываемся на событие смены языка\n  window.addEventListener(\n    'languageChanged',\n    window._articlesLanguageChangeHandler\n  );\n\n  // Применяем RTL стили если нужно\n  updateRTLSupport();\n\n  // Экспортируем функцию в глобальную область видимости для доступа из других модулей\n  window.initArticles = initArticles;\n\n  // Проверяем состояние аккордеона для логирования\n  setTimeout(() => {\n    console.log('Проверка наличия элементов аккордеона после инициализации:');\n    const items = document.querySelectorAll('.accordion__item');\n    console.log(`Найдено ${items.length} элементов аккордеона`);\n\n    if (items.length > 0) {\n      console.log('Структура первого элемента:');\n      console.log('- Заголовок:', items[0].querySelector('.accordion__header'));\n      console.log('- Кнопка:', items[0].querySelector('.accordion__toggle'));\n      console.log('- Контент:', items[0].querySelector('.accordion__content'));\n    }\n  }, 1000);\n\n  console.log('Инициализация секции Articles завершена успешно');\n\n  // Возвращаем функцию очистки для использования в глобальной системе очистки\n  return () => {\n    if (window._articlesLanguageChangeHandler) {\n      window.removeEventListener(\n        'languageChanged',\n        window._articlesLanguageChangeHandler\n      );\n      window._articlesLanguageChangeHandler = null;\n    }\n    console.log('Очистка ресурсов секции Articles');\n  };\n}\n","// text-brightness-toggle.js - Компонент переключения яркости текста для секций Articles и R36S Official Website\n\nexport function initThemeToggle() {\n  console.log('Инициализация переключателей яркости текста в блоках - НАЧАЛО');\n\n  // Проверка, была ли уже инициализирована функция\n  if (window._themeToggleInitialized) {\n    console.warn(\n      'Обнаружена повторная инициализация переключателей яркости. Пропускаем...'\n    );\n    return window._themeToggleCleanup;\n  }\n\n  // Устанавливаем флаг инициализации\n  window._themeToggleInitialized = true;\n\n  // Находим секции, в которых будем добавлять переключатели\n  const articlesSection =\n    document.getElementById('articles') || document.querySelector('.articles');\n  const officialWebsiteSection =\n    document.getElementById('official-website') ||\n    document.querySelector('.official-website');\n  const retroGamingSection =\n    document.getElementById('retro-gaming') ||\n    document.querySelector('.retro-gaming');\n\n  if (!articlesSection && !officialWebsiteSection && !retroGamingSection) {\n    console.error(\n      'Секции для добавления переключателей яркости текста не найдены'\n    );\n    return;\n  }\n\n  // Массив для хранения всех созданных кнопок\n  const createdButtons = [];\n\n  // Функция для добавления переключателей в указанную секцию с заданным стилем\n  function addTogglesToSection(section, preferredStyle) {\n    if (!section) return;\n\n    console.log(\n      `Добавление переключателей в секцию ${section.id || section.className}`\n    );\n\n    // Находим все блоки с текстом в секции\n    const blocks = section.querySelectorAll('.article');\n    console.log(\n      `Найдено ${blocks.length} блоков для добавления переключателей в секции ${\n        section.id || section.className\n      }`\n    );\n\n    // Добавляем кнопку переключения в каждый блок с текстом\n    blocks.forEach((block, index) => {\n      // Используем предпочтительный стиль, если указан, или циклически меняем стили\n      const buttonStyle =\n        preferredStyle !== undefined ? preferredStyle : index % 3;\n\n      // Проверка, есть ли уже кнопка в блоке\n      const existingButton = block.querySelector(\n        '.brightness-toggle, .brightness-toggle-corner, .brightness-toggle-with-label'\n      );\n      if (existingButton) {\n        console.warn(\n          `Блок #${index} уже содержит кнопку переключения. Пропускаем создание.`\n        );\n        return;\n      }\n\n      // Создаем кнопку переключения\n      const brightnessToggle = document.createElement('button');\n      brightnessToggle.setAttribute('type', 'button'); // Добавляем type=\"button\" чтобы избежать поведения по умолчанию\n\n      switch (buttonStyle) {\n        case 0: // Стандартный вариант - рядом с заголовком\n          brightnessToggle.className = 'brightness-toggle';\n\n          // Добавляем SVG иконку лампочки с фиксированным цветом\n          brightnessToggle.innerHTML = `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"brightness-toggle__icon\">\n              <path fill=\"none\" stroke=\"#3B82F6\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n            </svg>\n          `;\n\n          // Находим заголовок блока для размещения кнопки рядом с ним\n          const titleElement = block.querySelector('.article__title');\n\n          if (titleElement) {\n            // Создаем контейнер для заголовка и кнопки\n            const titleContainer = document.createElement('div');\n            titleContainer.className = 'article__title-container';\n\n            // Копируем заголовок в контейнер\n            const clonedTitle = titleElement.cloneNode(true);\n            titleContainer.appendChild(clonedTitle);\n            titleContainer.appendChild(brightnessToggle);\n\n            // Заменяем оригинальный заголовок на контейнер с заголовком и кнопкой\n            titleElement.parentNode.replaceChild(titleContainer, titleElement);\n          } else {\n            // Если заголовок не найден, добавляем кнопку в начало блока\n            block.insertBefore(brightnessToggle, block.firstChild);\n          }\n          break;\n\n        case 1: // Вариант в углу блока - теперь с теми же стилями что и brightness-toggle\n          brightnessToggle.className = 'brightness-toggle';\n\n          // Добавляем SVG иконку лампочки с фиксированным цветом\n          brightnessToggle.innerHTML = `\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"brightness-toggle__icon\">\n              <path fill=\"none\" stroke=\"#3B82F6\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n            </svg>\n          `;\n\n          // Находим заголовок блока для размещения кнопки рядом с ним\n          const titleElement2 = block.querySelector('.article__title');\n\n          if (titleElement2) {\n            // Создаем контейнер для заголовка и кнопки\n            const titleContainer = document.createElement('div');\n            titleContainer.className = 'article__title-container';\n\n            // Копируем заголовок в контейнер\n            const clonedTitle = titleElement2.cloneNode(true);\n            titleContainer.appendChild(clonedTitle);\n            titleContainer.appendChild(brightnessToggle);\n\n            // Заменяем оригинальный заголовок на контейнер с заголовком и кнопкой\n            titleElement2.parentNode.replaceChild(\n              titleContainer,\n              titleElement2\n            );\n          } else {\n            // Если заголовок не найден, добавляем кнопку в начало блока\n            block.insertBefore(brightnessToggle, block.firstChild);\n          }\n          break;\n\n        case 2: // Вариант с текстовой подписью\n          brightnessToggle.className = 'brightness-toggle-with-label';\n\n          // Добавляем лейбл и иконку с фиксированным цветом\n          brightnessToggle.innerHTML = `\n            <span class=\"brightness-toggle-label\">Ярче</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"brightness-toggle__icon\">\n              <path fill=\"none\" stroke=\"#3B82F6\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\" />\n            </svg>\n          `;\n\n          // Находим заголовок блока для размещения кнопки рядом с ним\n          const titleEl = block.querySelector('.article__title');\n\n          if (titleEl) {\n            // Создаем контейнер для заголовка и кнопки\n            const titleContainer = document.createElement('div');\n            titleContainer.className = 'article__title-container';\n\n            // Копируем заголовок в контейнер\n            const clonedTitle = titleEl.cloneNode(true);\n            titleContainer.appendChild(clonedTitle);\n            titleContainer.appendChild(brightnessToggle);\n\n            // Заменяем оригинальный заголовок на контейнер с заголовком и кнопкой\n            titleEl.parentNode.replaceChild(titleContainer, titleEl);\n          } else {\n            // Если заголовок не найден, добавляем кнопку в начало блока\n            block.insertBefore(brightnessToggle, block.firstChild);\n          }\n          break;\n      }\n\n      // Сохраняем кнопку в массив\n      createdButtons.push(brightnessToggle);\n    });\n  }\n\n  // Добавляем переключатели в секцию Articles (с циклическими стилями как было раньше)\n  if (articlesSection) {\n    addTogglesToSection(articlesSection);\n  }\n\n  // Определяем, какой стиль используется в секции R36S Retro Gaming\n  let retroGamingStyle;\n  if (retroGamingSection) {\n    const retroGamingBlocks = retroGamingSection.querySelectorAll('.article');\n    if (retroGamingBlocks.length > 0) {\n      const retroButton = retroGamingBlocks[0].querySelector(\n        '.brightness-toggle, .brightness-toggle-corner, .brightness-toggle-with-label'\n      );\n\n      if (retroButton) {\n        // Определяем стиль по классам кнопки\n        if (retroButton.classList.contains('brightness-toggle-corner')) {\n          retroGamingStyle = 1;\n        } else if (\n          retroButton.classList.contains('brightness-toggle-with-label')\n        ) {\n          retroGamingStyle = 2;\n        } else {\n          retroGamingStyle = 0;\n        }\n        console.log(\n          `Обнаружен стиль кнопки в секции R36S Retro Gaming: ${retroGamingStyle}`\n        );\n      }\n    }\n  }\n\n  // Добавляем переключатели в секцию R36S Official Website с тем же стилем, что и в Retro Gaming\n  if (officialWebsiteSection) {\n    addTogglesToSection(\n      officialWebsiteSection,\n      retroGamingStyle !== undefined ? retroGamingStyle : 1\n    );\n  }\n\n  // Добавляем отладочную информацию о созданных кнопках\n  console.log(`Создано ${createdButtons.length} кнопок переключения`);\n\n  // Удаляем все существующие обработчики перед добавлением новых\n  createdButtons.forEach(button => {\n    const clonedButton = button.cloneNode(true);\n    if (button.parentNode) {\n      button.parentNode.replaceChild(clonedButton, button);\n    }\n    // Заменяем кнопку в массиве\n    const index = createdButtons.indexOf(button);\n    if (index !== -1) {\n      createdButtons[index] = clonedButton;\n    }\n  });\n\n  // Добавляем обработчик события клика для всех кнопок\n  createdButtons.forEach(brightnessToggle => {\n    // Находим родительский блок статьи для кнопки\n    const articleBlock = brightnessToggle.closest('.article');\n\n    if (!articleBlock) {\n      console.error(\n        'Не найден родительский блок .article для кнопки переключения'\n      );\n      return;\n    }\n\n    brightnessToggle.addEventListener('click', function (event) {\n      // Предотвращаем всплытие события\n      event.preventDefault();\n      event.stopPropagation();\n\n      console.log('Клик по кнопке переключения яркости');\n      console.log(\n        'Состояние до переключения:',\n        articleBlock.classList.contains('bright-text') ? 'яркий' : 'обычный'\n      );\n\n      // Переключаем класс для этого конкретного блока\n      articleBlock.classList.toggle('bright-text');\n\n      // Переключаем класс активности для этой конкретной кнопки\n      brightnessToggle.classList.toggle('active');\n\n      console.log(\n        'Состояние после переключения:',\n        articleBlock.classList.contains('bright-text') ? 'яркий' : 'обычный'\n      );\n\n      // Для кнопки с лейблом меняем текст\n      if (brightnessToggle.classList.contains('brightness-toggle-with-label')) {\n        const label = brightnessToggle.querySelector(\n          '.brightness-toggle-label'\n        );\n        if (label) {\n          label.textContent = articleBlock.classList.contains('bright-text')\n            ? 'Тусклее'\n            : 'Ярче';\n          console.log('Изменен текст лейбла на:', label.textContent);\n        }\n      }\n\n      // Сохраняем выбор пользователя для каждого блока индивидуально\n      const blockId =\n        articleBlock.getAttribute('data-article-id') ||\n        articleBlock.id ||\n        Array.from(\n          articleBlock.closest('section').querySelectorAll('.article')\n        ).indexOf(articleBlock);\n\n      // Добавляем идентификатор секции к ключу хранилища для избежания конфликтов между секциями\n      const sectionId = articleBlock.closest('section')\n        ? articleBlock.closest('section').id ||\n          articleBlock.closest('section').className.split(' ')[0]\n        : 'unknown';\n\n      const currentBrightness = articleBlock.classList.contains('bright-text')\n        ? 'bright'\n        : 'normal';\n      localStorage.setItem(\n        `r36s-${sectionId}-article-brightness-${blockId}`,\n        currentBrightness\n      );\n\n      console.log(\n        `Яркость текста в блоке ${blockId} секции ${sectionId} изменена на: ${currentBrightness}`\n      );\n    });\n\n    // Устанавливаем начальное состояние для каждого блока индивидуально\n    const blockId =\n      articleBlock.getAttribute('data-article-id') ||\n      articleBlock.id ||\n      Array.from(\n        articleBlock.closest('section').querySelectorAll('.article')\n      ).indexOf(articleBlock);\n\n    // Добавляем идентификатор секции к ключу хранилища\n    const sectionId = articleBlock.closest('section')\n      ? articleBlock.closest('section').id ||\n        articleBlock.closest('section').className.split(' ')[0]\n      : 'unknown';\n\n    const savedBlockBrightness = localStorage.getItem(\n      `r36s-${sectionId}-article-brightness-${blockId}`\n    );\n\n    // Если есть сохраненное состояние для этого блока, применяем его\n    if (savedBlockBrightness === 'bright') {\n      articleBlock.classList.add('bright-text');\n      brightnessToggle.classList.add('active');\n\n      // Для кнопки с лейблом меняем текст\n      if (brightnessToggle.classList.contains('brightness-toggle-with-label')) {\n        const label = brightnessToggle.querySelector(\n          '.brightness-toggle-label'\n        );\n        if (label) {\n          label.textContent = 'Тусклее';\n        }\n      }\n      console.log(\n        `Восстановлено состояние для блока ${blockId} в секции ${sectionId}: яркий`\n      );\n    } else {\n      console.log(`Блок ${blockId} в секции ${sectionId} в обычном режиме`);\n    }\n  });\n\n  // Добавляем стили для переключателя и эффектов яркости\n  const styleElement = document.createElement('style');\n  styleElement.textContent = `\n    /* Контейнер для заголовка и кнопки */\n    .article__title-container {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin-bottom: 20px;\n      position: relative;\n      gap: 15px;\n    }\n    \n    .article__title-container .article__title {\n      margin-bottom: 0;\n      flex: 1;\n    }\n    \n    /* Стили для переключателя яркости */\n    .brightness-toggle {\n      width: 36px;\n      height: 36px;\n      border-radius: 12px;\n      background: rgba(15, 23, 42, 0.6);\n      border: 1px solid rgba(59, 130, 246, 0.3);\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      z-index: 2;\n      box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.1), \n                  0 3px 6px rgba(0, 0, 0, 0.2);\n      transition: all 0.25s ease;\n      padding: 0;\n      overflow: hidden;\n      flex-shrink: 0;\n      position: relative;\n      backdrop-filter: blur(4px);\n      -webkit-backdrop-filter: blur(4px);\n      margin: 0; /* Добавляем сброс margin для всех кнопок */\n    }\n    \n    .brightness-toggle:before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), transparent);\n      opacity: 0.5;\n      transition: opacity 0.3s ease;\n      border-radius: 12px;\n    }\n    \n    .brightness-toggle:hover {\n      transform: translateY(-2px);\n      box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.2), \n                  0 4px 8px rgba(15, 23, 42, 0.3);\n      border-color: rgba(59, 130, 246, 0.5);\n    }\n    \n    .brightness-toggle:active {\n      transform: translateY(1px);\n      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.2);\n    }\n    \n    .brightness-toggle__icon {\n      width: 20px;\n      height: 20px;\n      transition: all 0.25s ease;\n    }\n    \n    /* Не используем stroke: currentColor, вместо этого в SVG задаём цвет напрямую */\n    \n    .brightness-toggle.active {\n      background: rgba(59, 130, 246, 0.3);\n      border-color: rgba(96, 165, 250, 0.4);\n      box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1),\n                  0 3px 8px rgba(59, 130, 246, 0.25);\n    }\n    \n    .brightness-toggle.active .brightness-toggle__icon {\n      transform: scale(1.1);\n    }\n    \n    /* Стили для изменения яркости текста */\n    .article.bright-text .article__content {\n      color: #FFFFFF;\n    }\n    \n    .article.bright-text .article__content strong {\n      color: #90CAF9;\n    }\n    \n    .article.bright-text .article__content em {\n      color: #FFFFFF;\n    }\n    \n    .article.bright-text .article__content mark {\n      color: #F8BBD0;\n    }\n    \n    .article.bright-text .article__content a {\n      color: #90CAF9;\n    }\n    \n    .article.bright-text .article__content ul li {\n      color: #FFFFFF;\n    }\n    \n    /* Яркий текст для FAQ */\n    .articles.bright-text .articles__faq-answer {\n      color: #FFFFFF;\n    }\n    \n    .articles.bright-text .articles__faq-answer p {\n      color: #FFFFFF;\n    }\n    \n    /* Задаем позиционирование для родительского элемента */\n    .article {\n      position: relative;\n    }\n    \n    /* Адаптивные стили для кнопки */\n    @media (max-width: 768px) {\n      .brightness-toggle {\n        width: 32px;\n        height: 32px;\n      }\n      \n      .brightness-toggle__icon {\n        width: 18px;\n        height: 18px;\n      }\n      \n      .article__title-container {\n        flex-wrap: wrap;\n      }\n    }\n    \n    @media (max-width: 480px) {\n      .brightness-toggle {\n        width: 28px;\n        height: 28px;\n        border-radius: 8px;\n      }\n      \n      .brightness-toggle__icon {\n        width: 16px;\n        height: 16px;\n      }\n    }\n    \n    /* Вариант с лейблом для кнопки */\n    .brightness-toggle-with-label {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      background: rgba(15, 23, 42, 0.4);\n      padding: 4px 8px 4px 12px;\n      border-radius: 24px;\n      border: 1px solid rgba(59, 130, 246, 0.2);\n      transition: all 0.25s ease;\n      cursor: pointer;\n      user-select: none;\n      margin: 0; /* Устанавливаем единообразные отступы */\n    }\n    \n    .brightness-toggle-with-label:hover {\n      background: rgba(15, 23, 42, 0.5);\n      border-color: rgba(59, 130, 246, 0.3);\n    }\n    \n    .brightness-toggle-label {\n      font-size: 12px;\n      color: rgba(255, 255, 255, 0.8);\n      font-weight: 500;\n    }\n    \n    .brightness-toggle-with-label.active {\n      background: rgba(59, 130, 246, 0.2);\n      border-color: rgba(59, 130, 246, 0.4);\n    }\n    \n    .brightness-toggle-with-label.active .brightness-toggle-label {\n      color: rgba(255, 255, 255, 0.9);\n    }\n    \n    /* Плавные переходы для текста */\n    .article__content, \n    .article__content strong, \n    .article__content em, \n    .article__content mark, \n    .article__content a,\n    .articles__faq-answer,\n    .articles__faq-answer p {\n      transition: color 0.4s ease, text-shadow 0.4s ease;\n    }\n  `;\n\n  document.head.appendChild(styleElement);\n\n  // Сохраняем функцию очистки\n  const cleanup = function () {\n    // Удаляем все созданные кнопки\n    createdButtons.forEach(button => {\n      if (button && button.parentNode) {\n        const titleContainer = button.closest('.article__title-container');\n        if (titleContainer) {\n          // Если кнопка находится в контейнере с заголовком, восстанавливаем исходную структуру\n          const title = titleContainer.querySelector('.article__title');\n          if (title && titleContainer.parentNode) {\n            titleContainer.parentNode.replaceChild(title, titleContainer);\n          }\n        } else {\n          // Иначе просто удаляем кнопку\n          button.parentNode.removeChild(button);\n        }\n      }\n    });\n\n    // Удаляем стили\n    if (styleElement && styleElement.parentNode) {\n      styleElement.parentNode.removeChild(styleElement);\n    }\n\n    // Сбрасываем флаг инициализации\n    window._themeToggleInitialized = false;\n\n    console.log('Очистка переключателей яркости выполнена');\n  };\n\n  // Сохраняем функцию очистки в глобальный объект\n  window._themeToggleCleanup = cleanup;\n\n  console.log(\n    'Инициализация переключателей яркости текста в блоках - ЗАВЕРШЕНА'\n  );\n\n  return cleanup;\n}\n","// Icons.js - Компонент для работы с иконками\n// Этот файл эмулирует функциональность Lucide-React в vanilla JS\n\n// Объект с SVG-строками для каждой иконки\nconst iconsSVG = {\n  'phone-call': `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-phone-call\"><path d=\"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\"></path><path d=\"M14.05 2a9 9 0 0 1 8 7.94\"></path><path d=\"M14.05 6A5 5 0 0 1 18 10\"></path></svg>`,\n  mail: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-mail\"><rect width=\"20\" height=\"16\" x=\"2\" y=\"4\" rx=\"2\"></rect><path d=\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\"></path></svg>`,\n  'map-pin': `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-map-pin\"><path d=\"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\"></path><circle cx=\"12\" cy=\"10\" r=\"3\"></circle></svg>`,\n  'message-circle': `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-message-circle\"><path d=\"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z\"></path></svg>`,\n  send: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-send\"><path d=\"m22 2-7 20-4-9-9-4Z\"></path><path d=\"M22 2 11 13\"></path></svg>`,\n  'alert-circle': `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-alert-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" x2=\"12\" y1=\"8\" y2=\"12\"></line><line x1=\"12\" x2=\"12.01\" y1=\"16\" y2=\"16\"></line></svg>`,\n  loader: `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide lucide-loader animate-spin\"><line x1=\"12\" x2=\"12\" y1=\"2\" y2=\"6\"></line><line x1=\"12\" x2=\"12\" y1=\"18\" y2=\"22\"></line><line x1=\"4.93\" x2=\"7.76\" y1=\"4.93\" y2=\"7.76\"></line><line x1=\"16.24\" x2=\"19.07\" y1=\"16.24\" y2=\"19.07\"></line><line x1=\"2\" x2=\"6\" y1=\"12\" y2=\"12\"></line><line x1=\"18\" x2=\"22\" y1=\"12\" y2=\"12\"></line><line x1=\"4.93\" x2=\"7.76\" y1=\"19.07\" y2=\"16.24\"></line><line x1=\"16.24\" x2=\"19.07\" y1=\"7.76\" y2=\"4.93\"></line></svg>`,\n};\n\n/**\n * Возвращает SVG-строку для указанной иконки с указанным размером\n * @param {string} name - Имя иконки\n * @param {number} size - Размер иконки\n * @returns {string} - SVG-строка\n */\nexport function renderIcon(name, size = 24) {\n  if (!iconsSVG[name]) {\n    console.error(`Icon \"${name}\" not found`);\n    return '';\n  }\n\n  // Заменяем размер в SVG-строке\n  return iconsSVG[name]\n    .replace(/width=\"24\"/, `width=\"${size}\"`)\n    .replace(/height=\"24\"/, `height=\"${size}\"`);\n}\n\n/**\n * Инициализирует иконки на странице\n * Ищет элементы с атрибутами data-icon и data-size и вставляет в них SVG-иконки\n */\nexport function initIcons() {\n  const iconElements = document.querySelectorAll('[data-icon]');\n\n  iconElements.forEach(element => {\n    const iconName = element.getAttribute('data-icon');\n    const iconSize = parseInt(element.getAttribute('data-size') || '24', 10);\n\n    if (iconName) {\n      element.innerHTML = renderIcon(iconName, iconSize);\n    }\n  });\n}\n\nexport default { renderIcon, initIcons };\n","// js/contact.js\n// Импортируем иконки (предполагаем, что у вас есть отдельный файл для иконок)\nimport { renderIcon } from './iconscontact.js';\nimport i18next from 'i18next';\n\n// Инициализация секции Contact\nexport function initContact() {\n  console.log('Инициализация секции Contact');\n\n  const contactForm = document.querySelector('.contact__form');\n  const nameInput = document.getElementById('name');\n  const emailInput = document.getElementById('email');\n  const phoneInput = document.getElementById('phone');\n  const messageInput = document.getElementById('message');\n  const submitButton = document.querySelector('.form__button');\n  const errorContainer = document.createElement('div');\n\n  errorContainer.className = 'form__error';\n  errorContainer.style.display = 'none';\n  errorContainer.innerHTML = `\n    <div class=\"form__error-icon\">${renderIcon('alert-circle', 16)}</div>\n    <span></span>\n  `;\n\n  // Вставляем контейнер ошибки в начало формы\n  contactForm.insertBefore(errorContainer, contactForm.firstChild);\n\n  // Объект для хранения данных формы\n  const formData = {\n    name: '',\n    email: '',\n    phone: '',\n    message: '',\n  };\n\n  // Функция отображения ошибки с поддержкой i18n\n  function showError(messageKey, fallbackMessage) {\n    const message = i18next.t(messageKey, { defaultValue: fallbackMessage });\n    errorContainer.querySelector('span').textContent = message;\n    errorContainer.style.display = 'flex';\n  }\n\n  // Функция скрытия ошибки\n  function hideError() {\n    errorContainer.style.display = 'none';\n  }\n\n  // Обработчик изменения полей формы\n  function handleInputChange(e) {\n    const { name, value } = e.target;\n    formData[name] = value;\n\n    // Скрываем ошибку при изменении любого поля\n    hideError();\n  }\n\n  // Добавляем обработчики изменения для каждого поля\n  nameInput.addEventListener('input', handleInputChange);\n  emailInput.addEventListener('input', handleInputChange);\n  phoneInput.addEventListener('input', handleInputChange);\n  messageInput.addEventListener('input', handleInputChange);\n\n  // Обработчик отправки формы с поддержкой i18n\n  async function handleSubmit(e) {\n    e.preventDefault();\n\n    // Устанавливаем состояние отправки\n    const isSubmitting = true;\n    updateFormState(isSubmitting);\n\n    try {\n      // Проверка обязательных полей\n      if (\n        !formData.name ||\n        !formData.email ||\n        !formData.phone ||\n        !formData.message\n      ) {\n        throw new Error(\n          i18next.t('contact.form.error.allFields', 'Please fill in all fields')\n        );\n      }\n\n      // Валидация email\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!emailRegex.test(formData.email)) {\n        throw new Error(\n          i18next.t(\n            'contact.form.error.validEmail',\n            'Please enter a valid email'\n          )\n        );\n      }\n\n      // Валидация телефона\n      const phoneRegex = /^\\+?[0-9]{10,14}$/;\n      if (!phoneRegex.test(formData.phone.replace(/\\D/g, ''))) {\n        throw new Error(\n          i18next.t(\n            'contact.form.error.validPhone',\n            'Please enter a valid phone number.'\n          )\n        );\n      }\n\n      // Имитация отправки на сервер\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Очистка формы после успешной отправки\n      nameInput.value = '';\n      emailInput.value = '';\n      phoneInput.value = '';\n      messageInput.value = '';\n\n      // Сброс объекта данных\n      Object.keys(formData).forEach(key => {\n        formData[key] = '';\n      });\n\n      alert(\n        i18next.t(\n          'contact.form.success',\n          'Message sent successfully! We will contact you shortly.'\n        )\n      );\n    } catch (error) {\n      showError(\n        'contact.form.error.generic',\n        error.message ||\n          'There was an error sending your message. Please try again later.'\n      );\n      console.error('Form submission error:', error);\n    } finally {\n      // Сбрасываем состояние отправки\n      updateFormState(false);\n    }\n  }\n\n  // Функция обновления состояния формы с поддержкой i18n\n  function updateFormState(isSubmitting) {\n    const inputs = [nameInput, emailInput, phoneInput, messageInput];\n\n    inputs.forEach(input => {\n      input.disabled = isSubmitting;\n    });\n\n    submitButton.disabled = isSubmitting;\n\n    if (isSubmitting) {\n      submitButton.innerHTML = `<span class=\"button__icon\">${renderIcon(\n        'loader',\n        20\n      )}</span> ${i18next.t('contact.form.sending', 'Sending...')}`;\n    } else {\n      submitButton.innerHTML = `<span class=\"button__icon\">${renderIcon(\n        'send',\n        20\n      )}</span> ${i18next.t('contact.form.submit', 'Send message')}`;\n    }\n  }\n\n  // Добавляем обработчик отправки формы\n  contactForm.addEventListener('submit', handleSubmit);\n\n  // Обработчик события изменения языка\n  window.addEventListener('languageChanged', function (event) {\n    updateFormState(submitButton.disabled);\n  });\n\n  // Возвращаем функцию для очистки обработчиков событий\n  return function cleanup() {\n    nameInput.removeEventListener('input', handleInputChange);\n    emailInput.removeEventListener('input', handleInputChange);\n    phoneInput.removeEventListener('input', handleInputChange);\n    messageInput.removeEventListener('input', handleInputChange);\n    contactForm.removeEventListener('submit', handleSubmit);\n    window.removeEventListener('languageChanged', updateFormState);\n  };\n}\n\n// Экспортируем функцию по умолчанию\nexport default initContact;\n","// Reviews.js - Модифицированный скрипт для секции отзывов с поддержкой i18n\n\n// Импортируем i18next для доступа к переводам\nimport i18next from 'i18next';\n\n// Функция инициализации секции отзывов\nexport function initReviews() {\n  // Получаем базовый путь для корректных URL изображений\n  const isDevelopment = import.meta.env?.MODE === 'development';\n  const basename = isDevelopment ? '/' : '/R36S_STORE_JS/';\n\n  // Константа для определения мобильного устройства\n  const MOBILE_BREAKPOINT = 1200;\n\n  // Путь к изображениям отзывов (оставляем оригинальные пути)\n  const reviewImages = {\n    review1: {\n      webp: `${basename}img/reviews/imm_1_1x.webp`,\n      jpg: `${basename}img/reviews/imm_1_1x.jpg`,\n    },\n    review2: {\n      webp: `${basename}img/reviews/imm_2_1x.webp`,\n      jpg: `${basename}img/reviews/imm_2_1x.jpg`,\n    },\n    review3: {\n      webp: `${basename}img/reviews/imm_3_1x.webp`,\n      jpg: `${basename}img/reviews/imm_3_1x.jpg`,\n    },\n    review4: {\n      webp: `${basename}img/reviews/imm_4_1x.webp`,\n      jpg: `${basename}img/reviews/imm_4_1x.jpg`,\n    },\n  };\n\n  // Данные отзывов с ключами для переводов\n  const reviews = [\n    {\n      id: 1,\n      rating: 5,\n      colorKey: 'reviews.reviewItems.1.color',\n      color: 'Purple 64GB', // Fallback текст\n      authorKey: 'reviews.reviewItems.1.author',\n      author: 'AliExpress Shopper', // Fallback текст\n      dateKey: 'reviews.reviewItems.1.date',\n      date: '21 Aug 2024', // Fallback текст\n      textKey: 'reviews.reviewItems.1.text',\n      text: \"I just got my hands on the R36S retro console and it's seriously amazing for old-school gaming. The screen is super clear, it runs games smoothly, and battery life is solid. I love how I can load up my favorite classics and play...\", // Fallback текст\n      images: {\n        webp: reviewImages.review1.webp,\n        jpeg: reviewImages.review1.jpg,\n      },\n      helpful: 12,\n      verified: true,\n    },\n    {\n      id: 2,\n      rating: 5,\n      colorKey: 'reviews.reviewItems.2.color',\n      color: 'Yellow 128G', // Fallback текст\n      authorKey: 'reviews.reviewItems.2.author',\n      author: 'V***h', // Fallback текст\n      dateKey: 'reviews.reviewItems.2.date',\n      date: '26 Aug 2024', // Fallback текст\n      textKey: 'reviews.reviewItems.2.text',\n      text: \"After playing with the R36S for a week, I'm really impressed and absolutely delighted. The build quality feels great, and switching between different retro games is super easy. The controls are comfortable for long gaming sessions.\", // Fallback текст\n      images: {\n        webp: reviewImages.review4.webp,\n        jpeg: reviewImages.review4.jpg,\n      },\n      helpful: 8,\n      verified: true,\n    },\n    {\n      id: 3,\n      rating: 5,\n      colorKey: 'reviews.reviewItems.3.color',\n      color: 'White 64GB', // Fallback текст\n      authorKey: 'reviews.reviewItems.3.author',\n      author: 'M***z', // Fallback текст\n      dateKey: 'reviews.reviewItems.3.date',\n      date: '22 Aug 2024', // Fallback текст\n      textKey: 'reviews.reviewItems.3.text',\n      text: \"The R36S has become my go-to gaming device. I wasn't sure about buying another retro console, but this one surprised me. The screen is bright and sharp, games run without issues, and it's small enough to fit in my pocket.\", // Fallback текст\n      images: {\n        webp: reviewImages.review3.webp,\n        jpeg: reviewImages.review3.jpg,\n      },\n      helpful: 15,\n      verified: true,\n    },\n    {\n      id: 4,\n      rating: 5,\n      colorKey: 'reviews.reviewItems.4.color',\n      color: 'Black 128GB', // Fallback текст\n      authorKey: 'reviews.reviewItems.4.author',\n      author: 'K***r', // Fallback текст\n      dateKey: 'reviews.reviewItems.4.date',\n      date: '22 Aug 2024', // Fallback текст\n      textKey: 'reviews.reviewItems.4.text',\n      text: \"I've been using the R36S for a few weeks now, and I'm genuinely impressed. The 3.5-inch IPS screen delivers crisp visuals, and the build quality feels solid. The dual analog sticks are responsive, making retro gaming a joy.\", // Fallback текст\n      images: {\n        webp: reviewImages.review2.webp,\n        jpeg: reviewImages.review2.jpg,\n      },\n      helpful: 10,\n      verified: true,\n      mobileOnly: true,\n    },\n  ];\n\n  // Отслеживаем карточки, которые уже были анимированы\n  const animatedCards = new Set();\n\n  // Переменная для отслеживания текущего hoveredCard\n  let hoveredCardId = null;\n\n  // Отслеживаем ширину экрана для проверки мобильных устройств\n  let isMobile = window.innerWidth <= MOBILE_BREAKPOINT;\n\n  // Функция создания иконки звезды для рейтинга\n  function createStarIcon(filled = false) {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.classList.add('review-card__star');\n    svg.setAttribute('viewBox', '0 0 24 24');\n    svg.setAttribute('fill', filled ? 'currentColor' : 'none');\n    svg.setAttribute('stroke', 'currentColor');\n    svg.setAttribute('stroke-width', '2');\n\n    const polygon = document.createElementNS(\n      'http://www.w3.org/2000/svg',\n      'polygon'\n    );\n    polygon.setAttribute(\n      'points',\n      '12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2'\n    );\n    svg.appendChild(polygon);\n\n    return svg;\n  }\n\n  // Функция создания иконки \"verified\"\n  function createVerifiedIcon() {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.classList.add('review-card__verified');\n    svg.setAttribute('width', '16');\n    svg.setAttribute('height', '16');\n    svg.setAttribute('viewBox', '0 0 24 24');\n    svg.setAttribute('fill', 'none');\n    svg.setAttribute('stroke', 'currentColor');\n    svg.setAttribute('stroke-width', '2');\n\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttribute('d', 'M20 6L9 17l-5-5');\n    svg.appendChild(path);\n\n    return svg;\n  }\n\n  // Функция для получения перевода с fallback на исходный текст\n  function getTranslation(key, fallback) {\n    if (!key) return fallback;\n    const translation = i18next.t(key);\n    // Если перевод не найден или равен ключу, используем fallback\n    return translation && translation !== key ? translation : fallback;\n  }\n\n  // Создаем карточку отзыва из шаблона\n  function createReviewCard(review) {\n    const template = document.getElementById('reviewCardTemplate');\n    if (!template) {\n      console.error('Шаблон карточки отзыва не найден');\n      return null;\n    }\n\n    const card = template.content.cloneNode(true).querySelector('.review-card');\n\n    // Устанавливаем ID\n    card.dataset.id = review.id;\n\n    // Добавляем класс для мобильных устройств, если нужно\n    if (review.mobileOnly) {\n      card.classList.add('mobile-only');\n      if (!isMobile) {\n        card.style.display = 'none';\n      }\n    }\n\n    // Рейтинг\n    const ratingContainer = card.querySelector('.review-card__rating');\n    for (let i = 0; i < 5; i++) {\n      ratingContainer.appendChild(createStarIcon(i < review.rating));\n    }\n\n    // Цвет/вариант с поддержкой i18n\n    const colorText = getTranslation(review.colorKey, review.color);\n    card.querySelector('.review-card__variant').textContent = colorText;\n\n    // Текст отзыва с поддержкой i18n\n    const reviewText = getTranslation(review.textKey, review.text);\n    card.querySelector('.review-card__text').textContent = reviewText;\n\n    // Изображения\n    const picture = card.querySelector('picture');\n    picture.querySelector('source').setAttribute('srcset', review.images.webp);\n    const img = picture.querySelector('img');\n    img.setAttribute('src', review.images.jpeg);\n    img.setAttribute('alt', `Review ${review.id}`);\n\n    // Информация об авторе с поддержкой i18n\n    const nameElement = card.querySelector('.review-card__name');\n    if (review.verified) {\n      nameElement.prepend(createVerifiedIcon());\n    }\n    const authorText = getTranslation(review.authorKey, review.author);\n    nameElement.appendChild(document.createTextNode(authorText));\n\n    // Дата с поддержкой i18n\n    const dateText = getTranslation(review.dateKey, review.date);\n    card.querySelector('.review-card__date').textContent = dateText;\n\n    // Счетчик \"Helpful\" с поддержкой i18n\n    // Используем формат template string с подстановкой значения\n    const helpfulTemplate = getTranslation(\n      'reviews.helpful',\n      'Helpful ({{count}})'\n    );\n    const helpfulText = helpfulTemplate.replace('{{count}}', review.helpful);\n    card.querySelector('.review-card__helpful-count').textContent = helpfulText;\n\n    // Обработчики событий\n    card.addEventListener('click', handleReviewClick);\n    card.addEventListener('mouseenter', () => handleMouseEnter(review.id));\n    card.addEventListener('mouseleave', handleMouseLeave);\n\n    // Обработчики для кнопки \"Helpful\"\n    const helpfulButton = card.querySelector('.review-card__helpful');\n    helpfulButton.addEventListener('mouseenter', () => {\n      helpfulButton.querySelector('svg').setAttribute('fill', 'currentColor');\n      helpfulButton.querySelector('svg').classList.add('scale-125');\n      helpfulButton.querySelector('svg').classList.remove('scale-100');\n    });\n\n    helpfulButton.addEventListener('mouseleave', () => {\n      helpfulButton.querySelector('svg').setAttribute('fill', 'none');\n      helpfulButton.querySelector('svg').classList.remove('scale-125');\n      helpfulButton.querySelector('svg').classList.add('scale-100');\n    });\n\n    return card;\n  }\n\n  // Обработчик клика по карточке отзыва\n  function handleReviewClick() {\n    window.open(\n      'https://www.aliexpress.com/item/1005007226123844.html#feedback',\n      '_blank',\n      'noopener,noreferrer'\n    );\n  }\n\n  // Обработчик наведения на карточку\n  function handleMouseEnter(id) {\n    hoveredCardId = id;\n    const card = document.querySelector(`.review-card[data-id=\"${id}\"]`);\n    if (card) {\n      const arrow = card.querySelector('.review-card__arrow-wrapper');\n      if (arrow) {\n        arrow.style.display = 'flex';\n      }\n    }\n  }\n\n  // Обработчик ухода курсора с карточки\n  function handleMouseLeave() {\n    const card = document.querySelector(\n      `.review-card[data-id=\"${hoveredCardId}\"]`\n    );\n    if (card) {\n      const arrow = card.querySelector('.review-card__arrow-wrapper');\n      if (arrow) {\n        arrow.style.display = 'none';\n      }\n    }\n    hoveredCardId = null;\n  }\n\n  // Отображение карточек отзывов\n  function renderReviewCards() {\n    const grid = document.getElementById('reviewsGrid');\n    if (!grid) {\n      console.error('Контейнер для отзывов не найден');\n      return;\n    }\n\n    // Сохраняем шаблон перед манипуляциями\n    const template = document.getElementById('reviewCardTemplate');\n\n    // Вместо полной очистки, обновляем только необходимое\n    // Проверяем, какие карточки уже существуют\n    const existingCards = {};\n    grid.querySelectorAll('.review-card').forEach(card => {\n      if (card.dataset.id) {\n        existingCards[card.dataset.id] = card;\n      }\n    });\n\n    // Фильтруем отзывы для текущего размера экрана\n    const displayedReviews = reviews.filter(\n      review => !review.mobileOnly || (review.mobileOnly && isMobile)\n    );\n\n    // Создаем массив для хранения порядка карточек\n    const cardsToDisplay = [];\n\n    // Обрабатываем каждый отзыв\n    displayedReviews.forEach(review => {\n      // Проверяем, существует ли уже карточка\n      if (existingCards[review.id]) {\n        // Если карточка существует, обновляем ее видимость\n        const card = existingCards[review.id];\n        card.style.display = 'block';\n\n        // Обновляем текстовые элементы с учетом текущего языка\n        updateCardTexts(card, review);\n\n        cardsToDisplay.push(card);\n        delete existingCards[review.id]; // Удаляем из списка существующих\n      } else {\n        // Если карточки нет, создаем новую\n        const card = createReviewCard(review);\n        if (card) {\n          cardsToDisplay.push(card);\n        }\n      }\n    });\n\n    // Скрываем карточки, которые больше не нужны (например, мобильные при переходе на десктоп)\n    Object.values(existingCards).forEach(card => {\n      if (card !== template) {\n        card.style.display = 'none';\n      }\n    });\n\n    // Очищаем сетку, сохраняя шаблон\n    grid.innerHTML = '';\n    grid.appendChild(template);\n\n    // Добавляем все карточки в правильном порядке\n    cardsToDisplay.forEach(card => {\n      grid.appendChild(card);\n    });\n\n    // Запускаем наблюдение за видимостью карточек\n    observeReviewCards();\n  }\n\n  // Функция для обновления текстов карточки при смене языка\n  function updateCardTexts(card, review) {\n    if (!card || !review) return;\n\n    // Обновляем цвет/вариант\n    const colorElement = card.querySelector('.review-card__variant');\n    if (colorElement) {\n      colorElement.textContent = getTranslation(review.colorKey, review.color);\n    }\n\n    // Обновляем текст отзыва\n    const textElement = card.querySelector('.review-card__text');\n    if (textElement) {\n      textElement.textContent = getTranslation(review.textKey, review.text);\n    }\n\n    // Обновляем имя автора\n    const nameElement = card.querySelector('.review-card__name');\n    if (nameElement) {\n      // Сохраняем иконку verified если она есть\n      const verifiedIcon = nameElement.querySelector('.review-card__verified');\n\n      // Очищаем элемент\n      nameElement.textContent = '';\n\n      // Восстанавливаем иконку\n      if (verifiedIcon) {\n        nameElement.appendChild(verifiedIcon);\n      }\n\n      // Добавляем переведенное имя автора\n      nameElement.appendChild(\n        document.createTextNode(getTranslation(review.authorKey, review.author))\n      );\n    }\n\n    // Обновляем дату\n    const dateElement = card.querySelector('.review-card__date');\n    if (dateElement) {\n      dateElement.textContent = getTranslation(review.dateKey, review.date);\n    }\n\n    // Обновляем текст \"Helpful\"\n    const helpfulElement = card.querySelector('.review-card__helpful-count');\n    if (helpfulElement) {\n      const helpfulTemplate = getTranslation(\n        'reviews.helpful',\n        'Helpful ({{count}})'\n      );\n      helpfulElement.textContent = helpfulTemplate.replace(\n        '{{count}}',\n        review.helpful\n      );\n    }\n  }\n\n  // Наблюдение за видимостью карточек для анимации\n  function observeReviewCards() {\n    if (!('IntersectionObserver' in window)) {\n      console.warn('IntersectionObserver не поддерживается в этом браузере');\n      document.querySelectorAll('.review-card').forEach(card => {\n        card.classList.add('animate-in');\n      });\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            const id = entry.target.dataset.id;\n            if (!animatedCards.has(id)) {\n              entry.target.classList.add('animate-in');\n              animatedCards.add(id);\n            }\n          }\n        });\n      },\n      { threshold: 0.1 }\n    );\n\n    document.querySelectorAll('.review-card').forEach(card => {\n      observer.observe(card);\n    });\n  }\n\n  // Обработка изменения размера окна\n  function handleResize() {\n    const newIsMobile = window.innerWidth <= MOBILE_BREAKPOINT;\n\n    // Обновляем значение флага мобильного устройства\n    isMobile = newIsMobile;\n\n    // Обновляем отображение карточек (всегда вызываем для стабильности)\n    renderReviewCards();\n\n    // Обновляем видимость мобильных карточек напрямую для большей стабильности\n    document.querySelectorAll('.review-card').forEach(card => {\n      if (card.classList.contains('mobile-only')) {\n        card.style.display = isMobile ? 'block' : 'none';\n      }\n    });\n  }\n\n  // Обработчик события смены языка\n  function handleLanguageChange(event) {\n    console.log('Язык изменился, обновляем отзывы:', event?.detail?.language);\n\n    // Перерисовываем все карточки с учетом нового языка\n    renderReviewCards();\n\n    // Устанавливаем направление текста в зависимости от языка\n    const reviewsSection = document.getElementById('reviews');\n    if (reviewsSection) {\n      const rtlLanguages = ['ar']; // Список языков с RTL направлением\n      const currentLang = event?.detail?.language || i18next.language;\n\n      if (rtlLanguages.includes(currentLang)) {\n        reviewsSection.classList.add('rtl');\n      } else {\n        reviewsSection.classList.remove('rtl');\n      }\n    }\n  }\n\n  // Инициализация\n  function init() {\n    // Добавляем обработчик смены языка\n    window.addEventListener('languageChanged', handleLanguageChange);\n\n    // Вызываем первичный рендеринг\n    renderReviewCards();\n\n    // Устанавливаем правильное направление текста при инициализации\n    handleLanguageChange({ detail: { language: i18next.language } });\n\n    // Добавляем обработчик изменения размера окна с задержкой (debounce)\n    let resizeTimeout;\n    const debouncedResize = () => {\n      clearTimeout(resizeTimeout);\n      resizeTimeout = setTimeout(handleResize, 250);\n    };\n\n    window.addEventListener('resize', debouncedResize);\n\n    // Добавляем стили для анимации появления карточек\n    const style = document.createElement('style');\n    style.textContent = `\n      .review-card {\n        opacity: 0;\n        transform: translateY(30px);\n        transition: opacity 0.6s ease, transform 0.6s ease;\n      }\n      .review-card.animate-in {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    `;\n    document.head.appendChild(style);\n\n    // Запускаем обработчик сразу после загрузки для правильной инициализации\n    setTimeout(handleResize, 100);\n\n    // Добавляем базовую микроразметку для SEO (минимальное добавление)\n    const reviewsSection = document.getElementById('reviews');\n    if (reviewsSection && !reviewsSection.hasAttribute('itemscope')) {\n      reviewsSection.setAttribute('itemscope', '');\n      reviewsSection.setAttribute('itemtype', 'http://schema.org/Product');\n\n      // Добавляем только основные метатеги с поддержкой i18n\n      const metaName = document.createElement('meta');\n      metaName.setAttribute('itemprop', 'name');\n      metaName.setAttribute('data-i18n', 'reviews.meta.productName');\n      metaName.setAttribute('content', 'R36S Handheld Game Console');\n      reviewsSection.prepend(metaName);\n\n      const metaDesc = document.createElement('meta');\n      metaDesc.setAttribute('itemprop', 'description');\n      metaDesc.setAttribute('data-i18n', 'reviews.meta.productDescription');\n      metaDesc.setAttribute(\n        'content',\n        'R36S Handheld Game Console with 3.5-inch IPS screen and retro games'\n      );\n      reviewsSection.prepend(metaDesc);\n    }\n  }\n\n  // Запускаем инициализацию\n  init();\n\n  // Функция очистки (удаление слушателей событий, наблюдателей и т.д.)\n  function cleanup() {\n    // Удаляем обработчик изменения размера окна\n    window.removeEventListener('resize', handleResize);\n    window.removeEventListener('resize', () => {}); // Удаляем также debounced версию\n\n    // Удаляем обработчик смены языка\n    window.removeEventListener('languageChanged', handleLanguageChange);\n\n    // Если есть активный IntersectionObserver, отключаем его\n    if ('IntersectionObserver' in window) {\n      const observers = [];\n      const observer = new IntersectionObserver(() => {});\n      observer.disconnect();\n      observers.forEach(obs => obs.disconnect());\n    }\n\n    // Удаляем обработчики событий с карточек\n    document.querySelectorAll('.review-card').forEach(card => {\n      card.removeEventListener('click', handleReviewClick);\n      card.removeEventListener('mouseenter', () => {}); // Общий обработчик\n      card.removeEventListener('mouseleave', handleMouseLeave);\n\n      // Удаляем персональные обработчики mouseenter\n      reviews.forEach(review => {\n        card.removeEventListener('mouseenter', () =>\n          handleMouseEnter(review.id)\n        );\n      });\n\n      const helpfulButton = card.querySelector('.review-card__helpful');\n      if (helpfulButton) {\n        helpfulButton.removeEventListener('mouseenter', () => {});\n        helpfulButton.removeEventListener('mouseleave', () => {});\n      }\n    });\n\n    // Сообщаем о завершении очистки\n    console.log('Reviews section cleanup completed');\n  }\n\n  // Возвращаем методы, которые могут понадобиться снаружи\n  return {\n    cleanup,\n    renderReviewCards,\n    // Добавляем метод для принудительного обновления текстов при смене языка\n    updateTexts: () =>\n      handleLanguageChange({ detail: { language: i18next.language } }),\n  };\n}\n","// Инициализатор секции Products\nimport i18next from 'i18next';\n\nexport function initProducts() {\n  console.log('Products секция инициализирована');\n\n  // Определяем базовый путь с учетом режима разработки/продакшн\n  const isDevelopment = import.meta.env\n    ? import.meta.env.MODE === 'development'\n    : true;\n  const basename = isDevelopment ? '/' : '/R36S_STORE_JS/';\n\n  // Данные из constants/productData.js с исправленными путями\n  const productImages = {\n    i0_0: {\n      jpg: `${basename}img/products/i_0_0x.jpg`,\n      webp: `${basename}img/products/i_0_0x.webp`,\n    },\n    i1: {\n      jpg: `${basename}img/products/i_1_1x.jpg`,\n      webp: `${basename}img/products/i_1_1x.webp`,\n    },\n    i2: {\n      jpg: `${basename}img/products/i_2_1x.jpg`,\n      webp: `${basename}img/products/i_2_1x.webp`,\n    },\n    i3: {\n      jpg: `${basename}img/products/i_3_1x.jpg`,\n      webp: `${basename}img/products/i_3_1x.webp`,\n    },\n    i4: {\n      jpg: `${basename}img/products/i_4_1x.jpg`,\n      webp: `${basename}img/products/i_4_1x.webp`,\n    },\n    i5: {\n      jpg: `${basename}img/products/i_5_1x.jpg`,\n      webp: `${basename}img/products/i_5_1x.webp`,\n    },\n    i6: {\n      jpg: `${basename}img/products/i_6_1x.jpg`,\n      webp: `${basename}img/products/i_6_1x.webp`,\n    },\n    i7: {\n      jpg: `${basename}img/products/i_7_1x.jpg`,\n      webp: `${basename}img/products/i_7_1x.webp`,\n    },\n    i8: {\n      jpg: `${basename}img/products/i_8_1x.jpg`,\n      webp: `${basename}img/products/i_8_1x.webp`,\n    },\n    i9: {\n      jpg: `${basename}img/products/i_9_1x.jpg`,\n      webp: `${basename}img/products/i_9_1x.webp`,\n    },\n    i10: {\n      jpg: `${basename}img/products/i_10_1x.jpg`,\n      webp: `${basename}img/products/i_10_1x.webp`,\n    },\n  };\n\n  // Структура данных секций\n  // Теперь используем ключи i18n вместо жестко заданных текстов\n  const sections = [\n    {\n      id: 'getting-started',\n      title: 'products.start_guide.title',\n      content: {\n        text: 'products.start_guide.text',\n        images: {\n          jpg: productImages.i0_0.jpg,\n          webp: productImages.i0_0.webp,\n        },\n      },\n    },\n    {\n      id: 'original-backup',\n      title: 'products.original_backup.title',\n      content: {\n        text: 'products.original_backup.text',\n        subsections: [\n          {\n            id: 'backup-procedure',\n            title:\n              'products.original_backup.subsections.backup_procedure.title',\n            content: {\n              text: 'products.original_backup.subsections.backup_procedure.text',\n              images: {\n                jpg: productImages.i1.jpg,\n                webp: productImages.i1.webp,\n              },\n            },\n          },\n        ],\n      },\n    },\n    {\n      id: 'custom-installation',\n      title: 'products.custom_installation.title',\n      content: {\n        text: 'products.custom_installation.text',\n        subsections: [\n          {\n            id: 'method-balena',\n            title:\n              'products.custom_installation.subsections.method_balena.title',\n            content: {\n              text: 'products.custom_installation.subsections.method_balena.text',\n              images: {\n                jpg: productImages.i2.jpg,\n                webp: productImages.i2.webp,\n              },\n            },\n          },\n          {\n            id: 'method-win32',\n            title:\n              'products.custom_installation.subsections.method_win32.title',\n            content: {\n              text: 'products.custom_installation.subsections.method_win32.text',\n              images: {\n                jpg: productImages.i3.jpg,\n                webp: productImages.i3.webp,\n              },\n            },\n          },\n          {\n            id: 'method-raspberry',\n            title:\n              'products.custom_installation.subsections.method_raspberry.title',\n            content: {\n              text: 'products.custom_installation.subsections.method_raspberry.text',\n              images: {\n                jpg: productImages.i4.jpg,\n                webp: productImages.i4.webp,\n              },\n            },\n          },\n        ],\n      },\n    },\n    {\n      id: 'firmware-options',\n      title: 'products.firmware_options.title',\n      content: {\n        text: 'products.firmware_options.text',\n        subsections: [\n          {\n            id: 'option-arkos',\n            title: 'products.firmware_options.subsections.option_arkos.title',\n            content: {\n              text: 'products.firmware_options.subsections.option_arkos.text',\n              images: {\n                jpg: productImages.i5.jpg,\n                webp: productImages.i5.webp,\n              },\n            },\n          },\n          {\n            id: 'option-rocknix',\n            title: 'products.firmware_options.subsections.option_rocknix.title',\n            content: {\n              text: 'products.firmware_options.subsections.option_rocknix.text',\n              images: {\n                jpg: productImages.i6.jpg,\n                webp: productImages.i6.webp,\n              },\n            },\n          },\n          {\n            id: 'option-amber',\n            title: 'products.firmware_options.subsections.option_amber.title',\n            content: {\n              text: 'products.firmware_options.subsections.option_amber.text',\n              images: {\n                jpg: productImages.i7.jpg,\n                webp: productImages.i7.webp,\n              },\n            },\n          },\n        ],\n      },\n    },\n    {\n      id: 'game-setup',\n      title: 'products.game_setup.title',\n      content: {\n        text: 'products.game_setup.text',\n        images: {\n          jpg: productImages.i8.jpg,\n          webp: productImages.i8.webp,\n        },\n      },\n    },\n    {\n      id: 'helpful-tips',\n      title: 'products.helpful_tips.title',\n      content: {\n        text: 'products.helpful_tips.text',\n        images: {\n          jpg: productImages.i9.jpg,\n          webp: productImages.i9.webp,\n        },\n      },\n    },\n    {\n      id: 'downloads',\n      title: 'products.downloads.title',\n      content: {\n        downloads: [\n          {\n            file: 'Firmware v1.0.4 2024',\n            link: 'https://drive.google.com/file/d/10z7j7IZ7WX3y10ZJBW_a2-agcIe1Dx9m/edit',\n            date: '2024.04.13',\n            version: 'v1.0.4',\n          },\n          {\n            file: 'ArkOS_K36_v2.2025',\n            link: 'https://drive.google.com/file/d/1F93Q1jXYaTCftOlzAt0BaM43rmVexXsn/view',\n            date: '2023.12.22',\n            version: 'v1.0.3',\n          },\n          {\n            file: 'ArkOS_R35S-R36S_v2',\n            link: 'https://drive.google.com/file/d/18VL7uLNdyFKDH4_V8YM5zhHSjLiJdkUc/view',\n            date: '2023.11.16',\n            version: 'v1.0.2',\n          },\n          {\n            file: 'ArkOS_R35S-R36S_v2_P4',\n            link: 'https://drive.google.com/file/d/1MT1AGGch6Ou4RAfxDvVCxUI4aXX6Qa5v/view',\n            date: '2023.11.05',\n            version: 'v1.0.0',\n          },\n        ],\n      },\n    },\n  ];\n\n  let activeSection = 'downloads';\n  let isMobile = false;\n\n  // Получение DOM элементов\n  const productsNavList = document.getElementById('products-nav-list');\n  const productsSections = document.getElementById('products-sections');\n  const nav = document.getElementById('products-nav');\n\n  // Проверка на мобильное устройство\n  function checkMobile() {\n    isMobile = window.innerWidth <= 1024;\n    if (nav) {\n      if (isMobile) {\n        nav.classList.add('nav-mobile');\n      } else {\n        nav.classList.remove('nav-mobile');\n      }\n    }\n  }\n\n  // Обработчик переключения между секциями\n  function handleSectionClick(sectionId) {\n    activeSection = sectionId;\n\n    // Обновление активных классов в навигации\n    const navItems = document.querySelectorAll('.nav-item');\n    navItems.forEach(item => {\n      if (item.dataset.sectionId === sectionId) {\n        item.classList.add('nav-item-active');\n      } else {\n        item.classList.remove('nav-item-active');\n      }\n    });\n\n    // Обновление видимости секций\n    const sectionElements = document.querySelectorAll('.section');\n    sectionElements.forEach(section => {\n      if (section.id === sectionId) {\n        section.classList.add('section-active');\n      } else {\n        section.classList.remove('section-active');\n      }\n    });\n\n    // Прокрутка к активной секции с учетом мобильного устройства\n    setTimeout(() => {\n      const element = document.getElementById(sectionId);\n      if (element) {\n        const offset = isMobile ? 80 : 20; // Больший отступ для мобильных\n        const elementPosition = element.getBoundingClientRect().top;\n        const offsetPosition = elementPosition + window.pageYOffset - offset;\n\n        window.scrollTo({\n          top: offsetPosition,\n          behavior: 'smooth',\n        });\n      }\n    }, 100);\n  }\n\n  // Формирование HTML для меню навигации с поддержкой i18n\n  function renderNavigation() {\n    productsNavList.innerHTML = '';\n\n    sections.forEach(section => {\n      const navItem = document.createElement('button');\n      navItem.className = `nav-item ${\n        activeSection === section.id ? 'nav-item-active' : ''\n      }`;\n      navItem.dataset.sectionId = section.id;\n\n      // Добавление поддержки i18n\n      navItem.innerHTML = `\n          <svg class=\"nav-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n            <polyline points=\"9 18 15 12 9 6\"></polyline>\n          </svg>\n          <span data-i18n=\"${section.title}\">${i18next.t(section.title)}</span>\n        `;\n\n      navItem.addEventListener('click', () => handleSectionClick(section.id));\n      productsNavList.appendChild(navItem);\n    });\n  }\n\n  // Функция для разбиения текста на параграфы с поддержкой i18n\n  function translateAndSplitToParagraphs(i18nKey) {\n    const translatedText = i18next.t(i18nKey);\n    return translatedText\n      .split('\\n')\n      .filter(paragraph => paragraph.trim() !== '');\n  }\n\n  // В функции renderSectionContent для секции downloads\n  function renderSectionContent(section) {\n    if (section.id === 'downloads') {\n      let html = '<div class=\"download-list\">';\n\n      section.content.downloads.forEach(item => {\n        html += `\n          <div class=\"download-card\">\n            <div class=\"download-info\">\n              <svg class=\"download-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n                <polyline points=\"14 2 14 8 20 8\"></polyline>\n                <path d=\"M9 13h6\"></path>\n                <path d=\"M9 17h3\"></path>\n              </svg>\n              <div>\n                <div class=\"download-filename\">${item.file}</div>\n                <div class=\"download-meta\">\n                  <span class=\"update-label\" data-i18n=\"products.downloads.update_label\">${i18next.t(\n                    'products.downloads.update_label'\n                  )}</span>: ${item.date} • ${item.version}\n                </div>\n              </div>\n            </div>\n            <a href=\"${item.link}\" class=\"download-button\" target=\"_blank\" \n              data-i18n-aria=\"products.downloads.download_aria\"\n              aria-label=\"${i18next.t('products.downloads.download_aria')}\">\n              <svg class=\"button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n                <polyline points=\"7 10 12 15 17 10\"></polyline>\n                <line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line>\n              </svg>\n            </a>\n          </div>\n        `;\n      });\n\n      html += '</div>';\n      return html;\n    }\n\n    let html = '<div class=\"section-content\"><div class=\"text-content\">';\n\n    // Добавление текста с разбивкой на параграфы с переводом\n    const paragraphs = translateAndSplitToParagraphs(section.content.text);\n    paragraphs.forEach(paragraph => {\n      html += `<p>${paragraph.trim()}</p>`;\n    });\n\n    html += '</div>';\n\n    // Добавление изображений если они есть\n    if (section.content.images) {\n      html += `\n          <div class=\"image-container\">\n            <picture>\n              <source srcset=\"${section.content.images.webp}\" type=\"image/webp\">\n              <img src=\"${section.content.images.jpg}\" alt=\"${i18next.t(\n        section.title\n      )}\" class=\"section-image\" loading=\"lazy\">\n            </picture>\n          </div>\n        `;\n    }\n\n    // Добавление подразделов если они есть\n    if (section.content.subsections) {\n      html += '<div class=\"subsections\">';\n\n      section.content.subsections.forEach(subsection => {\n        html += `\n            <div class=\"subsection\">\n              <h3 class=\"subsection-title\" data-i18n=\"${\n                subsection.title\n              }\">${i18next.t(subsection.title)}</h3>\n              <div class=\"subsection-content\">\n                <div class=\"text-content\">\n          `;\n\n        // Добавление текста подраздела с переводом\n        const subParagraphs = translateAndSplitToParagraphs(\n          subsection.content.text\n        );\n        subParagraphs.forEach(paragraph => {\n          html += `<p>${paragraph.trim()}</p>`;\n        });\n\n        html += '</div>';\n\n        // Добавление изображений подраздела\n        if (subsection.content.images) {\n          html += `\n              <div class=\"image-container\">\n                <picture>\n                  <source srcset=\"${\n                    subsection.content.images.webp\n                  }\" type=\"image/webp\">\n                  <img src=\"${subsection.content.images.jpg}\" alt=\"${i18next.t(\n            subsection.title\n          )}\" class=\"subsection-image\" loading=\"lazy\">\n                </picture>\n              </div>\n            `;\n        }\n\n        html += '</div></div>';\n      });\n\n      html += '</div>';\n    }\n\n    html += '</div>';\n    return html;\n  }\n\n  // Формирование HTML для всех секций с поддержкой i18n\n  function renderSections() {\n    productsSections.innerHTML = '';\n\n    sections.forEach(section => {\n      const sectionElement = document.createElement('section');\n      sectionElement.id = section.id;\n      sectionElement.className = `section ${\n        activeSection === section.id ? 'section-active' : ''\n      }`;\n\n      sectionElement.innerHTML = `\n          <h2 class=\"section-title\" data-i18n=\"${section.title}\">${i18next.t(\n        section.title\n      )}</h2>\n          ${renderSectionContent(section)}\n        `;\n\n      productsSections.appendChild(sectionElement);\n    });\n  }\n\n  function updateContent() {\n    renderNavigation();\n    renderSections();\n\n    // Обновление элементов секции загрузок после рендеринга\n    document.querySelectorAll('.update-label').forEach(el => {\n      if (el.hasAttribute('data-i18n')) {\n        const key = el.getAttribute('data-i18n');\n        el.textContent = i18next.t(key);\n      }\n    });\n\n    document.querySelectorAll('[data-i18n-aria]').forEach(el => {\n      const key = el.getAttribute('data-i18n-aria');\n      el.setAttribute('aria-label', i18next.t(key));\n    });\n  }\n\n  // Инициализация компонента\n  function initialize() {\n    checkMobile();\n    renderNavigation();\n    renderSections();\n\n    // Обновляем навигационный заголовок для поддержки i18n\n    const navTitle = document.querySelector('.nav-title');\n    if (navTitle) {\n      navTitle.setAttribute('data-i18n', 'products.guide_nav_title');\n      navTitle.textContent = i18next.t('products.guide_nav_title', 'Guide');\n    }\n\n    // Обновляем заголовок секции\n    const sectionTitle = document.querySelector('.section-label');\n    if (sectionTitle) {\n      sectionTitle.setAttribute('data-i18n', 'products.section_label');\n      sectionTitle.textContent = i18next.t(\n        'products.section_label',\n        'FIRMWARE'\n      );\n    }\n\n    // Обновляем основной заголовок руководства\n    const guideTitle = document.querySelector('.title');\n    if (guideTitle) {\n      guideTitle.setAttribute('data-i18n', 'products.guide_title');\n      guideTitle.textContent = i18next.t(\n        'products.guide_title',\n        'R36S Console Firmware Installation & Customization Guide'\n      );\n    }\n\n    // Обновляем введение\n    const guideIntro = document.querySelector('.guide-intro p');\n    if (guideIntro) {\n      guideIntro.setAttribute('data-i18n', 'products.guide_intro');\n      guideIntro.textContent = i18next.t('products.guide_intro');\n    }\n\n    // Обновляем заголовок связанных ресурсов\n    const relatedResourcesTitle = document.querySelector(\n      '.related-resources h2'\n    );\n    if (relatedResourcesTitle) {\n      relatedResourcesTitle.setAttribute(\n        'data-i18n',\n        'products.related_resources_title'\n      );\n      relatedResourcesTitle.textContent = i18next.t(\n        'products.related_resources_title',\n        'Related Resources'\n      );\n    }\n\n    // Обновляем список связанных ресурсов\n    const relatedLinks = document.querySelectorAll('.related-resources a');\n    const relatedLinkIds = [\n      'products.related_resources.custom_installation',\n      'products.related_resources.firmware_options',\n      'products.related_resources.game_setup',\n      'products.related_resources.downloads',\n    ];\n\n    relatedLinks.forEach((link, index) => {\n      if (index < relatedLinkIds.length) {\n        link.setAttribute('data-i18n', relatedLinkIds[index]);\n        link.textContent = i18next.t(relatedLinkIds[index]);\n      }\n    });\n\n    // Добавление слушателя для изменения размера окна\n    window.addEventListener('resize', checkMobile);\n\n    // Добавляем слушатель события изменения языка\n    window.addEventListener('languageChanged', updateContent);\n\n    console.log('Products: Инициализация завершена с поддержкой i18n');\n  }\n\n  // Запуск инициализации, если DOM элементы найдены\n  if (productsNavList && productsSections && nav) {\n    initialize();\n  } else {\n    console.error('Не найдены необходимые DOM элементы для секции Products');\n  }\n\n  // Функция очистки при уничтожении компонента\n  function cleanup() {\n    // Удаляем слушатели событий\n    window.removeEventListener('resize', checkMobile);\n    window.removeEventListener('languageChanged', updateContent);\n    console.log('Products: Слушатели событий удалены');\n  }\n\n  // Возвращаем методы, которые могут быть полезны для внешнего использования\n  return cleanup;\n}\n","// Импортируем функции для обработки смены языка\nimport { supportedLanguages } from './i18n/i18n.js';\n\n/**\n * Инициализация функциональности футера\n * @returns {Function|undefined} Функция очистки (если необходимо)\n */\nexport function initFooter() {\n  console.log('Инициализация Footer');\n\n  // Получаем элемент footer\n  const footer = document.querySelector('.footer');\n\n  if (!footer) {\n    console.error('Элемент footer не найден');\n    return;\n  }\n\n  // Находим кнопку Partnership и добавляем обработчик события\n  const partnershipButton = footer.querySelector('.partnership-button');\n\n  if (partnershipButton) {\n    partnershipButton.addEventListener('click', () => {\n      // Находим модальное окно\n      const modalOverlay = document.querySelector('.partnership-modal-overlay');\n\n      if (modalOverlay) {\n        // Добавляем класс active для отображения модального окна\n        modalOverlay.classList.add('active');\n\n        // Находим контент модального окна и делаем его активным\n        const modalContent = modalOverlay.querySelector(\n          '.partnership-modal-content'\n        );\n        if (modalContent) {\n          modalContent.classList.add('active');\n        }\n\n        // Запрещаем прокрутку body\n        document.body.style.overflow = 'hidden';\n      }\n    });\n  }\n\n  // Инициализируем обработчики для модального окна\n  initPartnershipModal();\n\n  // Регистрируем обработчик события смены языка\n  window.addEventListener('languageChanged', handleLanguageChange);\n\n  // Возвращаем функцию очистки\n  return function cleanup() {\n    // Удаляем обработчик события при выгрузке компонента\n    window.removeEventListener('languageChanged', handleLanguageChange);\n\n    // Если есть ссылки на DOM-элементы или слушатели, очищаем их здесь\n    if (partnershipButton) {\n      partnershipButton.removeEventListener('click', openModal);\n    }\n  };\n}\n\n/**\n * Обработчик события смены языка\n * @param {CustomEvent} event - Событие смены языка\n */\nfunction handleLanguageChange(event) {\n  // Если есть детали события и язык в них\n  if (event.detail && event.detail.language) {\n    const newLanguage = event.detail.language;\n    console.log(`Footer: Язык изменен на ${newLanguage}`);\n\n    // Проверяем, является ли язык RTL\n    const rtlLanguages = ['ar'];\n    const isRTL = rtlLanguages.includes(newLanguage);\n\n    // Получаем footer\n    const footer = document.querySelector('.footer');\n    if (footer) {\n      // Обновляем направление текста для футера\n      if (isRTL) {\n        footer.classList.add('rtl');\n        footer.style.direction = 'rtl';\n      } else {\n        footer.classList.remove('rtl');\n        footer.style.direction = 'ltr';\n      }\n    }\n\n    // Также можем обновить модальное окно\n    const modal = document.querySelector('.partnership-modal-content');\n    if (modal) {\n      if (isRTL) {\n        modal.classList.add('rtl');\n        modal.style.direction = 'rtl';\n      } else {\n        modal.classList.remove('rtl');\n        modal.style.direction = 'ltr';\n      }\n    }\n  }\n}\n\n/**\n * Инициализация модального окна партнерства\n */\nfunction initPartnershipModal() {\n  // Находим модальное окно и кнопку закрытия\n  const modalOverlay = document.querySelector('.partnership-modal-overlay');\n\n  if (!modalOverlay) {\n    console.warn('Модальное окно не найдено');\n    return;\n  }\n\n  // Находим кнопку закрытия\n  const closeButton = modalOverlay.querySelector('.partnership-modal-close');\n\n  if (closeButton) {\n    closeButton.addEventListener('click', closeModal);\n  }\n\n  // Закрытие модального окна по клику на оверлей\n  modalOverlay.addEventListener('click', event => {\n    // Если клик был по оверлею, а не по контенту, закрываем модальное окно\n    if (event.target === modalOverlay) {\n      closeModal();\n    }\n  });\n\n  // Закрытие модального окна по нажатию Escape\n  document.addEventListener('keydown', event => {\n    if (event.key === 'Escape' && modalOverlay.classList.contains('active')) {\n      closeModal();\n    }\n  });\n}\n\n/**\n * Функция открытия модального окна\n */\nfunction openModal() {\n  const modalOverlay = document.querySelector('.partnership-modal-overlay');\n  if (modalOverlay) {\n    // Добавляем класс active для отображения модального окна\n    modalOverlay.classList.add('active');\n\n    // Находим контент модального окна и делаем его активным\n    const modalContent = modalOverlay.querySelector(\n      '.partnership-modal-content'\n    );\n    if (modalContent) {\n      modalContent.classList.add('active');\n    }\n\n    // Запрещаем прокрутку body\n    document.body.style.overflow = 'hidden';\n  }\n}\n\n/**\n * Функция закрытия модального окна\n */\nfunction closeModal() {\n  const modalOverlay = document.querySelector('.partnership-modal-overlay');\n  if (!modalOverlay) return;\n\n  const modalContent = modalOverlay.querySelector('.partnership-modal-content');\n\n  // Убираем классы active\n  modalOverlay.classList.remove('active');\n\n  if (modalContent) {\n    modalContent.classList.remove('active');\n  }\n\n  // Возвращаем прокрутку body\n  document.body.style.overflow = '';\n}\n","// main.js - Точка входа в приложение\n// Импорт всех стилей\nimport './css/styles.css';\nimport { initScrollToTop } from './js/scroll-to-top.js'; // Импортируем модуль кнопки скролла вверх\n// Импорт i18n системы\nimport {\n  setupI18n,\n  setupLanguageSelector,\n  supportedLanguages,\n} from './js/i18n/i18n.js';\nimport { getLanguageFromURL } from './js/utils/urlManager.js';\n\n// Импорт компонентов js\nimport { initHeader } from './js/header.js';\nimport { initMobileMenu } from './js/mobilemenu.js';\nimport { initHero } from './js/hero.js';\nimport { initAbout } from './js/about.js';\nimport { initFeatures } from './js/features.js';\nimport { initCategories } from './js/categories.js';\nimport { initArticles } from './js/articles.js';\nimport { initThemeToggle } from './js/theme-toggle.js';\nimport { initContact } from './js/contact.js';\nimport { initIcons } from './js/iconscontact.js';\nimport { initReviews } from './js/reviews.js';\nimport { initProducts } from './js/products.js';\nimport { initFooter } from './js/footer.js';\n\nconsole.log('Main.js инициализирован');\n\n// Получаем initialLanguage из window, если он был установлен в HTML\nlet initialLanguage = window.initialLanguage || null;\nif (initialLanguage) {\n  console.log('Found initial language from HTML:', initialLanguage);\n}\n\n// Хранение функций очистки для компонентов\nlet cleanupFunctions = [];\n\n// Вспомогательная функция для определения поддержки браузером\nfunction checkBrowserCompatibility() {\n  // Проверка поддержки IntersectionObserver (для анимаций при скролле)\n  const hasIntersectionObserver = 'IntersectionObserver' in window;\n  // Проверка поддержки Flexbox\n  const hasFlexbox = (function () {\n    const el = document.createElement('div');\n    el.style.display = 'flex';\n    return el.style.display === 'flex';\n  })();\n  // Проверка поддержки CSS Grid\n  const hasGrid = (function () {\n    const el = document.createElement('div');\n    el.style.display = 'grid';\n    return el.style.display === 'grid';\n  })();\n  // Логирование результатов проверок\n  console.log('Поддержка браузера:');\n  console.log('- IntersectionObserver:', hasIntersectionObserver);\n  console.log('- Flexbox:', hasFlexbox);\n  console.log('- CSS Grid:', hasGrid);\n  // Добавление классов к body для условного стилизования\n  if (!hasIntersectionObserver)\n    document.body.classList.add('no-intersection-observer');\n  if (!hasFlexbox) document.body.classList.add('no-flexbox');\n  if (!hasGrid) document.body.classList.add('no-grid');\n  return {\n    hasIntersectionObserver,\n    hasFlexbox,\n    hasGrid,\n  };\n}\n\n// Глобальная функция очистки\nfunction globalCleanup() {\n  try {\n    // Вызываем все функции очистки\n    cleanupFunctions.forEach(cleanupFn => {\n      if (typeof cleanupFn === 'function') {\n        cleanupFn();\n      }\n    });\n    // Очищаем массив\n    cleanupFunctions = [];\n  } catch (error) {\n    console.warn('Error during global cleanup:', error);\n  }\n}\n\n// Инициализация i18n системы перед загрузкой DOM\nasync function initializeI18n() {\n  try {\n    // Получаем язык из URL (из пути)\n    const urlLanguage =\n      getLanguageFromURL(supportedLanguages) || initialLanguage;\n    console.log('Language from URL or initial:', urlLanguage);\n\n    // Установка атрибутов lang и dir перед инициализацией i18n\n    // для предотвращения мигания контента\n    const savedLanguage =\n      localStorage.getItem('userLanguage') || urlLanguage || 'en';\n    const rtlLanguages = ['ar'];\n    document.documentElement.setAttribute('lang', savedLanguage);\n    document.documentElement.dir = rtlLanguages.includes(savedLanguage)\n      ? 'rtl'\n      : 'ltr';\n\n    // Инициализируем i18n с тайм-аутом для защиты от зависания\n    const i18nInitPromise = setupI18n({ forcedLanguage: urlLanguage });\n\n    // Создаем таймаут для защиты от бесконечного ожидания\n    const timeoutPromise = new Promise((_, reject) => {\n      setTimeout(() => {\n        reject(new Error('i18n initialization timed out after 5 seconds'));\n      }, 5000);\n    });\n\n    // Используем Promise.race для ограничения времени ожидания\n    await Promise.race([i18nInitPromise, timeoutPromise]);\n\n    // Настраиваем селектор языка\n    setupLanguageSelector();\n\n    // Добавляем класс для указания, что i18n инициализирован\n    document.documentElement.classList.add('i18n-initialized');\n\n    return true;\n  } catch (error) {\n    console.error('Error initializing i18n:', error);\n\n    // В случае ошибки все равно пытаемся установить базовый язык\n    try {\n      document.documentElement.setAttribute('lang', 'en');\n      document.documentElement.dir = 'ltr';\n\n      // Добавляем класс для индикации сбоя i18n\n      document.documentElement.classList.add('i18n-failed');\n    } catch (fallbackError) {\n      console.error(\n        'Failed to set fallback language attributes:',\n        fallbackError\n      );\n    }\n\n    return false;\n  }\n}\n\n// Инициализация страницы после загрузки DOM\ndocument.addEventListener('DOMContentLoaded', async () => {\n  console.log('DOM загружен');\n\n  try {\n    // Добавляем класс для индикации загрузки\n    document.documentElement.classList.add('loading-i18n');\n\n    // Сначала инициализируем i18n\n    const i18nSuccess = await initializeI18n();\n\n    // Убираем класс загрузки\n    document.documentElement.classList.remove('loading-i18n');\n\n    // Если i18n не удалось инициализировать, все равно продолжаем загрузку страницы\n    if (!i18nSuccess) {\n      console.warn('Continuing page initialization with failed i18n');\n    }\n\n    // Создаем массив промисов для всех инициализаций компонентов\n    // чтобы обработать случай, когда один из них вызывает ошибку\n    const componentInitPromises = [];\n\n    // Добавляем инициализацию header\n    componentInitPromises.push(\n      (async () => {\n        try {\n          const headerCleanup = initHeader();\n          if (typeof headerCleanup === 'function') {\n            cleanupFunctions.push(headerCleanup);\n          }\n          return true;\n        } catch (error) {\n          console.error('Failed to initialize header:', error);\n          return false;\n        }\n      })()\n    );\n\n    // Аналогично для мобильного меню\n    componentInitPromises.push(\n      (async () => {\n        try {\n          const mobileMenuCleanup = initMobileMenu();\n          if (typeof mobileMenuCleanup === 'function') {\n            cleanupFunctions.push(mobileMenuCleanup);\n          }\n          return true;\n        } catch (error) {\n          console.error('Failed to initialize mobile menu:', error);\n          return false;\n        }\n      })()\n    );\n\n    // Инициализация иконок\n    componentInitPromises.push(\n      (async () => {\n        try {\n          initIcons();\n          return true;\n        } catch (error) {\n          console.error('Failed to initialize icons:', error);\n          return false;\n        }\n      })()\n    );\n\n    // Проверка совместимости браузера\n    componentInitPromises.push(\n      (async () => {\n        try {\n          const compatibility = checkBrowserCompatibility();\n          return true;\n        } catch (error) {\n          console.error('Failed to check browser compatibility:', error);\n          return false;\n        }\n      })()\n    );\n\n    // Добавляем все остальные компоненты в массив промисов\n    const components = [\n      { name: 'hero', init: initHero },\n      { name: 'about', init: initAbout },\n      { name: 'features', init: initFeatures },\n      { name: 'categories', init: initCategories },\n      { name: 'articles', init: initArticles },\n      { name: 'themeToggle', init: initThemeToggle },\n      { name: 'contact', init: initContact },\n      { name: 'reviews', init: initReviews },\n      { name: 'products', init: initProducts },\n      { name: 'footer', init: initFooter },\n      { name: 'scrollToTop', init: initScrollToTop },\n    ];\n\n    // Инициализируем все компоненты с обработкой ошибок\n    components.forEach(component => {\n      componentInitPromises.push(\n        (async () => {\n          try {\n            const cleanup = component.init();\n            if (typeof cleanup === 'function') {\n              cleanupFunctions.push(cleanup);\n            }\n            return true;\n          } catch (error) {\n            console.error(`Failed to initialize ${component.name}:`, error);\n            return false;\n          }\n        })()\n      );\n    });\n\n    // Ждем завершения всех инициализаций\n    const results = await Promise.allSettled(componentInitPromises);\n\n    // Проверяем результаты инициализации\n    const totalComponents = results.length;\n    const successfulComponents = results.filter(\n      result => result.status === 'fulfilled' && result.value === true\n    ).length;\n\n    console.log(\n      `Инициализация завершена: ${successfulComponents}/${totalComponents} компонентов успешно загружены`\n    );\n\n    // Добавим информацию о загрузке страницы в консоль для отладки\n    const loadTime = performance.now();\n    console.log(`Страница загружена за ${loadTime.toFixed(2)}ms`);\n\n    // Удаляем класс загрузки с документа\n    document.documentElement.classList.remove('loading');\n    document.documentElement.classList.add('loaded');\n\n    // Регистрируем обработчик для очистки при закрытии/перезагрузке\n    window.addEventListener('beforeunload', globalCleanup);\n  } catch (error) {\n    console.error('Критическая ошибка при инициализации страницы:', error);\n\n    // Удаляем класс загрузки даже при ошибке\n    document.documentElement.classList.remove('loading');\n    document.documentElement.classList.add('error');\n\n    // Показываем сообщение об ошибке для пользователя только в режиме разработки\n    if (import.meta.env.DEV) {\n      const errorElement = document.createElement('div');\n      errorElement.className = 'critical-error';\n      errorElement.innerHTML = `\n        <div class=\"critical-error__content\">\n          <h2>Ошибка инициализации</h2>\n          <p>Произошла ошибка при загрузке страницы. Пожалуйста, обновите страницу или свяжитесь с администратором.</p>\n          <button onclick=\"window.location.reload()\">Обновить страницу</button>\n        </div>\n      `;\n      document.body.appendChild(errorElement);\n    }\n  }\n});\n\n// Обработка ошибок на уровне window\nwindow.onerror = function (message, source, lineno, colno, error) {\n  console.error('Глобальная ошибка:', {\n    message,\n    source,\n    lineno,\n    colno,\n    error,\n  });\n  return false; // Пусть браузер также показывает ошибки в консоли\n};\n\n// Обработка непойманных промисов\nwindow.addEventListener('unhandledrejection', function (event) {\n  console.warn(\n    'Непойманное отклонение промиса (unhandled promise rejection):',\n    event.reason\n  );\n});\n\n// Экспорт версии приложения для отладки\nwindow.appVersion = {\n  version: '1.0.0',\n  buildDate: new Date().toISOString(),\n  environment: import.meta.env.MODE,\n  basePath: import.meta.env.DEV ? '/' : '/R36S_CONSOLE_STORE_JS/',\n};\n\n// Регистрация обработчика cleanup при выгрузке модуля (для hot-reload)\nif (import.meta.hot) {\n  import.meta.hot.dispose(() => {\n    globalCleanup();\n  });\n}\n\nconsole.log('Main.js выполнение завершено');\n"],"names":["initScrollToTop","flagsSVG","supportedLanguages","languageNames","cornerButtonsContainer","languageSelectorContainer","languageButton","currentLangFlag","languageDropdown","scrollButton","initLanguageSelector","throttle","func","limit","inThrottle","args","context","handleScroll","handleScrollButtonClick","e","updateLanguageButtonAppearance","langCode","updateError","createLanguageDropdownItems","code","item","currentLang","flag","name","originalSelector","changeEvent","eventError","el","itemClickError","createError","lang","option","clickError","documentClickError","event","error","detectUserLanguage","defaultLanguage","cachedDetection","isLanguageSupported","language","languageCode","savedLanguage","supportedSavedLanguage","browserLanguages","supportedBrowserLanguage","getLanguageFromURL","path","baseUrl","pathWithoutBase","pathParts","part","possibleLang","updateLanguageURL","translationsCache","translationSections","getTranslationPath","section","loadSectionTranslation","cacheKey","maxAttempts","attemptLoad","sect","attempts","controller","timeoutId","response","data","loadAllTranslations","successCount","failCount","results","translations","result","index","sectionData","sectionName","updateTextElements","elements","element","key","matches","attr","translationKey","translation","i18next","elementError","updateRTLSupport","direction","selector","container","updateAllContent","updatePromises","setupI18n","options","forcedLanguage","savedValid","userLanguage","loadError","fallbackTranslations","fallbackError","resources","lng","ns","fallbackValue","safeLanguageChangeHandler","innerError","contentError","basicError","setupLanguageSelector","fragment","newLanguage","initHeader","isMenuOpen","prevScrollPos","scrollTimeout","header","burgerBtn","burgerLine","mobileMenu","menuLinks","currentScrollPos","isScrolledDown","setHeaderVisibility","setHeaderScrolled","toggleMenu","updateMenuState","scrolled","visible","smoothScrollToSection","href","targetId","offsetPosition","handleInitialHash","headerHeight","handleLanguageChange","rtlLanguages","_a","ariaLabel","translatedLabel","link","initMobileMenu","closeButton","closeMobileMenu","menuBackground","setupIconAnimations","icon","mutations","mutation","getLocalizedPrice","priceType","initHero","heroSection","heroImage","heroContent","desktopDescription","mobileDescription","buyButton","moreDetailsButton","currentPrice","originalPrice","discountBadge","contentObserver","resizeTimeout","languageChangeHandler","updatePrices","formattedCurrentPrice","formattedOriginalPrice","formattedDiscount","setupHeroImage","adjustForViewport","isDesktop","setupContentAnimation","nonCriticalElements","entries","entry","setupButtonHandlers","handleBuyButtonClick","handleMoreDetailsClick","setupLanguageChangeListener","featuresSection","cleanup","handleResize","createModalAbout","parentElement","modalElement","feature","isOpen","currentImageIndex","colorImagesInterval","getLocalizedText","defaultText","getStaticDiscountText","type","discountTranslations","isRTL","handleEscPress","close","createModalElement","modalDiv","updateModalRTLStyles","iconWrapper","title","renderMedia","setupColorImagesRotation","imageElement","updateModalContent","structuredData","structuredDataScript","buyNowText","discountText","rtlDirection","buttonContent","headerContent","modalContent","open","featureData","currentUrl","newUrl","handlePopState","destroy","displayControls","videoGif","untitled1","untitled2","untitled3","untitled4","videoBattery","videoModa6","videoOption2","globalModalInstance","preloadImages","cb","aboutSection","isElementInViewport","actuallyPreloadImages","observer","rect","imagesToPreload","imageQueue","src","img","loadNextImage","initAbout","modalInstance","features","getLocalizedFeature","basePath","updateButtonsText","buttonText","buttons","button","renderCards","currentContainer","cardsHTML","localizedFeature","renderedCards","handleMouseMove","card","mouseX","mouseY","err","handleButtonClick","featureId","f","debounce","wait","timeout","cleanupCardEvents","cards","dataId","content","clone","newContainer","html","parent","setupGlowEffect","glowElement","setupCardEvents","currentCardsContainer","isMobile","newGlowElement","cleanupEvents","debouncedResize","asyncInit","currentIsMobile","cardWithoutGlow","initFeatures","featuresVideo","featuresVideoMobile","soundToggleButton","volumeOffIcon","volumeOnIcon","soundToggleButtonMobile","volumeOffIconMobile","volumeOnIconMobile","moreInfoButton","desktopVideoLoaded","mobileVideoLoaded","loadAndPlayVideo","playPromise","handleBuyClick","handleMoreInfoClick","toggleMute","scrollHandler","resizeHandler","languageChangedHandler","keyDesktop","keyMobile","videoElement","soundToggle","sectionElement","elementPosition","currentScrollY","initCategories","updatePlayButtonIcon","playButton","isPlaying","i18nKey","updateMuteButtonIcon","muteButton","isMuted","togglePlay","videoError","source","createVideoFallback","videoContainer","fallbackText","sectionRef","contentRef","videoSlider","currentTimeElement","durationElement","LANGUAGE_CHANGE_EVENT","videoLoaded","formatTime","time","minutes","seconds","langError","sourceTags","videoSrc","videoObserver","handleRTLChange","rtlError","currentAccordionInstance","initFaqAccordion","accordionItems","clickHandlers","closeAllItems","exceptItem","checkAndApplyRTL","toggleBtn","handleClick","itemElement","headerElement","toggleBtnElement","contentElement","headerRect","child","questionId","answerId","handleKeyboardNavigation","activeItem","items","currentIndex","targetIndex","targetHeader","accordionAPI","handler","isInitialized","initArticles","forceReinitialize","articlesSection","alternativeId","getLocalizedContent","articles","articlesGrid","updateArticlesText","addMetaTags","metaDesc","metaKeywords","article","articleElement","titleElement","contentContainer","sectionContainer","subtitleElement","articleFooter","ctaButton","addSectionHeading","sectionHeading","headingKey","titleKey","titleTranslation","currentLanguage","heading","question","answer","initThemeToggle","officialWebsiteSection","retroGamingSection","createdButtons","addTogglesToSection","preferredStyle","blocks","block","buttonStyle","brightnessToggle","titleContainer","clonedTitle","titleElement2","titleEl","retroGamingStyle","retroGamingBlocks","retroButton","clonedButton","articleBlock","label","blockId","sectionId","currentBrightness","styleElement","iconsSVG","renderIcon","size","initIcons","iconName","iconSize","initContact","contactForm","nameInput","emailInput","phoneInput","messageInput","submitButton","errorContainer","formData","showError","messageKey","fallbackMessage","message","hideError","handleInputChange","value","handleSubmit","updateFormState","resolve","isSubmitting","input","initReviews","basename","reviewImages","reviews","animatedCards","hoveredCardId","createStarIcon","filled","svg","polygon","createVerifiedIcon","getTranslation","fallback","createReviewCard","review","template","ratingContainer","i","colorText","reviewText","picture","nameElement","authorText","dateText","helpfulText","handleReviewClick","handleMouseEnter","handleMouseLeave","helpfulButton","id","arrow","renderReviewCards","grid","existingCards","displayedReviews","cardsToDisplay","updateCardTexts","observeReviewCards","colorElement","textElement","verifiedIcon","dateElement","helpfulElement","helpfulTemplate","reviewsSection","_b","init","style","metaName","observers","obs","initProducts","__vite_import_meta_env__","productImages","sections","activeSection","productsNavList","productsSections","nav","checkMobile","handleSectionClick","offset","renderNavigation","navItem","translateAndSplitToParagraphs","paragraph","renderSectionContent","subsection","renderSections","updateContent","initialize","navTitle","sectionTitle","guideTitle","guideIntro","relatedResourcesTitle","relatedLinks","relatedLinkIds","initFooter","footer","partnershipButton","modalOverlay","initPartnershipModal","openModal","modal","closeModal","initialLanguage","cleanupFunctions","checkBrowserCompatibility","hasIntersectionObserver","hasFlexbox","hasGrid","globalCleanup","cleanupFn","initializeI18n","urlLanguage","i18nInitPromise","timeoutPromise","_","reject","i18nSuccess","componentInitPromises","headerCleanup","mobileMenuCleanup","compatibility","component","totalComponents","successfulComponents","loadTime","lineno","colno"],"mappings":"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,EACvD,MACN,CAGSA,EAAc,KACjBA,EAAc,GAAK,YAGrB,QAAQ,IACN,qDACAA,CACD,CACL,CAEE,QAAQ,IACN,oEACD,EAGD,MAAMC,EAAsB,CAACvS,EAAK+G,IAAgB,CAChD,MAAM3G,EAAcC,EAAQ,EAAEL,EAAK,CAAE,aAAc+G,EAAa,EAChE,OAAO3G,IAAgBJ,EAAMI,EAAc2G,CAC5C,EAGKyL,EAAW,CACf,CACE,GAAI,EACJ,MAAOD,EACL,2BACA,mBACD,EACD,SAAU,CACR,CACE,SAAUA,EACR,yCACA,yEACD,EACD,QAASA,EACP,wCACA,21BACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,kEACD,EACD,QAASA,EACP,wCACA,2sCACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,4DACD,EACD,QAASA,EACP,wCACA,0uCACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,uEACD,EACD,QAASA,EACP,wCACA,itCACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,+DACD,EACD,QAASA,EACP,wCACA,s2CACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,sCACD,EACD,QAASA,EACP,wCACA,uiFACD,CACF,CACF,CACF,EACD,CACE,GAAI,EACJ,MAAOA,EACL,2BACA,uBACD,EACD,SAAU,CACR,CACE,SAAUA,EACR,yCACA,2EACD,EACD,QAASA,EACP,wCACA,+2BACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,4DACD,EACD,QAASA,EACP,wCACA,uvCACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,gDACD,EACD,QAASA,EACP,wCACA,srCACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,wEACD,EACD,QAASA,EACP,wCACA,4qCACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,8EACD,EACD,QAASA,EACP,wCACA,o2CACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,8EACD,EACD,QAASA,EACP,wCACA,69CACD,CACF,EACD,CACE,SAAUA,EACR,yCACA,oCACD,EACD,QAASA,EACP,wCACA,+sDACD,CACF,CACF,CACF,CACF,EAEKE,EAAeJ,EAAgB,cAAc,iBAAiB,EAEpE,GAAI,CAACI,EAAc,CACjB,QAAQ,MAAM,qDAAqD,EACnE,MACJ,CAIE,GAAIL,GAAqB,CAACF,EACxB,QAAQ,IAAI,0CAA0C,EAEtDO,EAAa,UAAY,OACpB,CACL,QAAQ,IAAI,4CAA4C,EAExDC,EAAoB,EACpB,MACJ,CAGE,MAAMC,EAAc,IAAM,CAExB,GAAI,CAAC,SAAS,cAAc,0BAA0B,EAAG,CACvD,MAAMC,EAAW,SAAS,cAAc,MAAM,EAC9CA,EAAS,KAAO,cAChBA,EAAS,QAAUL,EACjB,4BACA,oIACD,EACD,SAAS,KAAK,YAAYK,CAAQ,CACxC,CAGI,GAAI,CAAC,SAAS,cAAc,uBAAuB,EAAG,CACpD,MAAMC,EAAe,SAAS,cAAc,MAAM,EAClDA,EAAa,KAAO,WACpBA,EAAa,QACX,uHACF,SAAS,KAAK,YAAYA,CAAY,CAC5C,CACG,EAGDF,EAAa,EAGbH,EAAS,QAAQM,GAAW,CAC1B,MAAMC,EAAiB,SAAS,cAAc,SAAS,EACvDA,EAAe,UAAY,UAC3BA,EAAe,GAAK,WAAWD,EAAQ,EAAE,GACzCC,EAAe,QAAQ,UAAYD,EAAQ,GAG3CC,EAAe,aAAa,YAAa,EAAE,EAC3CA,EAAe,aAAa,WAAY,2BAA2B,EAGnE,MAAMC,EAAe,SAAS,cAAc,IAAI,EAChDA,EAAa,UAAY,iBACzBA,EAAa,aAAa,WAAY,UAAU,EAEhDA,EAAa,aACX,YACA,oBAAoBF,EAAQ,EAAE,QAC/B,EACDE,EAAa,UAAYF,EAAQ,MACjCC,EAAe,YAAYC,CAAY,EAGvC,MAAMC,EAAmB,SAAS,cAAc,KAAK,EACrDA,EAAiB,UAAY,2BAC7BA,EAAiB,aAAa,WAAY,aAAa,EAGvDH,EAAQ,SAAS,QAAQ,CAACrU,EAASiB,IAAU,CAC3C,MAAMwT,EAAmB,SAAS,cAAc,SAAS,EAKzD,GAJAA,EAAiB,UAAY,mBAC7BA,EAAiB,GAAK,WAAWJ,EAAQ,EAAE,IAAIpT,EAAQ,CAAC,GAGpDA,IAAU,GAAKjB,EAAQ,WAAaqU,EAAQ,MAAO,CACrD,MAAMK,EAAkB,SAAS,cAAc,IAAI,EACnDA,EAAgB,UAAY,oBAE5BA,EAAgB,aACd,YACA,oBAAoBL,EAAQ,EAAE,aAAapT,EAAQ,CAAC,WACrD,EACDyT,EAAgB,UAAY1U,EAAQ,SACpCyU,EAAiB,YAAYC,CAAe,CACpD,CAEM,MAAM9B,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,mBAI3BA,EAAe,aACb,iBACA,oBAAoByB,EAAQ,EAAE,aAAapT,EAAQ,CAAC,UACrD,EAGD2R,EAAe,UAAY5S,EAAQ,QAEnCyU,EAAiB,YAAY7B,CAAc,EAC3C4B,EAAiB,YAAYC,CAAgB,CACnD,CAAK,EAEDH,EAAe,YAAYE,CAAgB,EAG3C,MAAMjL,EAAuB,SAAS,cAAc,QAAQ,EAC5DA,EAAqB,KAAO,sBAC5B,MAAMD,EAAiB,CACrB,WAAY,qBACZ,QAAS,UACT,SAAU+K,EAAQ,MAClB,YAAaA,EAAQ,SAAS,CAAC,EAAE,QAAQ,UAAU,EAAG,GAAG,EAAI,MAC7D,SAAU,wDACV,OAAQ,CACN,QAAS,eACT,KAAMP,EAAoB,2BAA4B,eAAe,CACtE,EACD,UAAW,CACT,QAAS,eACT,KAAMA,EAAoB,2BAA4B,MAAM,EAC5D,KAAM,CACJ,QAAS,cACT,IAAK,8BACN,CACF,EACD,cAAe,IAAI,KAAM,EAAC,YAAa,EACvC,aAAc,IAAI,KAAM,EAAC,YAAa,CACvC,EACDvK,EAAqB,YAAc,KAAK,UAAUD,CAAc,EAChEgL,EAAe,YAAY/K,CAAoB,EAG/C,MAAMoL,EAAgB,SAAS,cAAc,QAAQ,EACrDA,EAAc,UAAY,kBAG1B,MAAMC,EAAY,SAAS,cAAc,GAAG,EAC5CA,EAAU,KAAO,wDACjBA,EAAU,UAAY,eACtBA,EAAU,YAAcd,EACtB,2BACA,gBACD,EACDc,EAAU,aAAa,YAAa,0BAA0B,EAC9DA,EAAU,aAAa,WAAY,KAAK,EACxCA,EAAU,aACR,QACAd,EACE,4BACA,2BACR,CACK,EACDc,EAAU,aAAa,kBAAmB,2BAA2B,EACrEA,EAAU,aAAa,MAAO,UAAU,EACxCA,EAAU,aAAa,SAAU,QAAQ,EACzCD,EAAc,YAAYC,CAAS,EAEnCN,EAAe,YAAYK,CAAa,EAExCX,EAAa,YAAYM,CAAc,CAC3C,CAAG,EAGD,MAAMO,EAAoB,IAAM,CAE9B,IAAIC,EAAiBlB,EAAgB,cAAc,oBAAoB,EAElEkB,EAkBHA,EAAe,YAAchB,EAC3B,mBACA,4CACD,GApBDgB,EAAiB,SAAS,cAAc,IAAI,EAC5CA,EAAe,UAAY,oBAC3BA,EAAe,aAAa,YAAa,kBAAkB,EAC3DA,EAAe,YAAchB,EAC3B,mBACA,4CACD,EAGDF,EACG,cAAc,sBAAsB,EACpC,aACCkB,EACAlB,EAAgB,cAAc,iBAAiB,CAChD,EAQN,EAGDiB,EAAmB,EAGnB,WAAW,IAAM,CACf,GAAI,CACF,QAAQ,IAAI,6BAA6B,EAKvC,OAAO,cACP,OAAO,OAAO,aAAa,SAAY,aAEvC,QAAQ,IACN,6DACD,EACD,OAAO,aAAa,QAAS,EAC7B,OAAO,aAAe,MAIxB,WAAW,IAAM,CACf,OAAO,aAAe5C,EAAkB,EACxC,QAAQ,IAAI,qCAAsC,OAAO,YAAY,CACtE,EAAE,GAAG,CACP,OAAQvT,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,CACjE,CACG,EAAE,GAAG,EAEN+U,EAAgB,GAGhB,MAAM3O,EAAuBrG,GAAS,CACpC,QAAQ,IAAI,gDAAiDA,CAAK,EAGlEyV,EAAa,EAGbW,EAAmB,EAGnB/S,EAAkB,EAGlBmS,EAAoB,EAIpB,WAAW,IAAM,CAEb,OAAO,cACP,OAAO,OAAO,aAAa,eAAkB,YAE7C,QAAQ,IAAI,qDAAqD,EACjE,OAAO,aAAa,cAAe,IAEnC,QAAQ,IACN,gEACD,EAEC,OAAO,cACP,OAAO,OAAO,aAAa,SAAY,YAEvC,OAAO,aAAa,QAAS,EAE/B,OAAO,aAAehC,EAAkB,EAE3C,EAAE,GAAG,CACP,EAGD,SAASgC,GAAqB,CAC5B,GAAI,CACF,QAAQ,IACN,+DACD,EAGD,MAAMa,EACJlB,EAAgB,cAAc,oBAAoB,EACpD,GAAIkB,EAAgB,CAClB,MAAMC,EAAaD,EAAe,aAAa,WAAW,EAC1D,GAAIC,EAAY,CACd,MAAMpT,EAAcC,EAAQ,EAAEmT,CAAU,EACpCpT,GAAeA,IAAgBoT,IACjCD,EAAe,YAAcnT,EAEzC,CACA,CAGM,SAAS,iBAAiB,iBAAiB,EAAE,QAAQL,GAAW,CAC9D,MAAMC,EAAMD,EAAQ,aAAa,WAAW,EAC5C,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,YAAcK,EAElC,CACA,CAAO,EAGD,SAAS,iBAAiB,oBAAoB,EAAE,QAAQL,GAAW,CACjE,MAAMC,EAAMD,EAAQ,aAAa,WAAW,EAC5C,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,YAAcK,EAElC,CACA,CAAO,EAGD,SAAS,iBAAiB,mBAAmB,EAAE,QAAQL,GAAW,CAChE,MAAMC,EAAMD,EAAQ,aAAa,gBAAgB,EACjD,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,UAAYK,EAEhC,CACA,CAAO,EAGD,SAAS,iBAAiB,eAAe,EAAE,QAAQL,GAAW,CAC5D,MAAMC,EAAMD,EAAQ,aAAa,WAAW,EAC5C,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,YAAcK,EAElC,CAGQ,MAAMqT,EAAW1T,EAAQ,aAAa,iBAAiB,EACvD,GAAI0T,EAAU,CACZ,MAAMC,EAAmBrT,EAAQ,EAAEoT,CAAQ,EACvCC,GAAoBA,IAAqBD,GAC3C1T,EAAQ,aAAa,QAAS2T,CAAgB,CAE1D,CACA,CAAO,EAGD,SAAS,iBAAiB,yBAAyB,EAAE,QAAQ3T,GAAW,CACtE,MAAMC,EAAMD,EAAQ,aAAa,WAAW,EAC5C,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,YAAcK,EAElC,CACA,CAAO,EAED,SAAS,iBAAiB,yBAAyB,EAAE,QAAQL,GAAW,CACtE,MAAMC,EAAMD,EAAQ,aAAa,WAAW,EAC5C,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,YAAcK,EAElC,CACA,CAAO,EAGD,SACG,iBAAiB,2BAA2B,EAC5C,QAAQL,GAAW,CAClB,MAAMC,EAAMD,EAAQ,aAAa,WAAW,EAC5C,GAAIC,EAAK,CACP,MAAMI,EAAcC,EAAQ,EAAEL,CAAG,EAC7BI,GAAeA,IAAgBJ,IACjCD,EAAQ,YAAcK,EAEpC,CAGU,MAAMqT,EAAW1T,EAAQ,aAAa,iBAAiB,EACvD,GAAI0T,EAAU,CACZ,MAAMC,EAAmBrT,EAAQ,EAAEoT,CAAQ,EACvCC,GAAoBA,IAAqBD,GAC3C1T,EAAQ,aAAa,QAAS2T,CAAgB,CAE5D,CACA,CAAS,EAEH,QAAQ,IAAI,+CAA+C,CAC5D,OAAQvW,EAAO,CACd,QAAQ,MAAM,gDAAiDA,CAAK,CAC1E,CACA,CAGE,MAAMoD,EAAmB,IAAM,CAC7B,GAAI,CACF,MAAMiD,EAAe,CAAC,IAAI,EACpBmQ,EAAkBtT,EAAQ,SAClBmD,EAAa,SAASmQ,CAAe,GAIjDtB,EAAgB,UAAU,IAAI,KAAK,EAGjCA,EAAgB,iBAAiB,mBAAmB,EAC/B,QAAQtS,GAAW,CACxCA,EAAQ,MAAM,UAAY,QAC1BA,EAAQ,MAAM,UAAY,KACpC,CAAS,EAGgBsS,EAAgB,iBAC/B,yDACD,EACQ,QAAQuB,GAAW,CAC1BA,EAAQ,MAAM,UAAY,OACpC,CAAS,EAGoBvB,EAAgB,iBACnC,yBACD,EACY,QAAQwB,GAAY,CAC/BA,EAAS,MAAM,UAAY,OACrC,CAAS,EAEkBxB,EAAgB,iBACjC,uBACD,EACU,QAAQyB,GAAU,CAC3BA,EAAO,MAAM,UAAY,QACzBA,EAAO,MAAM,UAAY,KACnC,CAAS,IAEDzB,EAAgB,UAAU,OAAO,KAAK,EAErBA,EAAgB,iBAC/B,4HACD,EACQ,QAAQtS,GAAW,CAC1BA,EAAQ,MAAM,UAAY,GAC1BA,EAAQ,MAAM,UAAY,EACpC,CAAS,EAEJ,OAAQ5C,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,CACjE,CACG,EAGD,OAAI,OAAO,gCACT,OAAO,oBACL,kBACA,OAAO,8BACR,EAIH,OAAO,+BAAiCoG,EAGxC,OAAO,iBACL,kBACA,OAAO,8BACR,EAGDhD,EAAkB,EAGlB,OAAO,aAAe4R,GAGtB,WAAW,IAAM,CACf,QAAQ,IAAI,4DAA4D,EACxE,MAAMP,EAAQ,SAAS,iBAAiB,kBAAkB,EAC1D,QAAQ,IAAI,WAAWA,EAAM,MAAM,uBAAuB,EAEtDA,EAAM,OAAS,IACjB,QAAQ,IAAI,6BAA6B,EACzC,QAAQ,IAAI,eAAgBA,EAAM,CAAC,EAAE,cAAc,oBAAoB,CAAC,EACxE,QAAQ,IAAI,YAAaA,EAAM,CAAC,EAAE,cAAc,oBAAoB,CAAC,EACrE,QAAQ,IAAI,aAAcA,EAAM,CAAC,EAAE,cAAc,qBAAqB,CAAC,EAE1E,EAAE,GAAI,EAEP,QAAQ,IAAI,iDAAiD,EAGtD,IAAM,CACP,OAAO,iCACT,OAAO,oBACL,kBACA,OAAO,8BACR,EACD,OAAO,+BAAiC,MAE1C,QAAQ,IAAI,kCAAkC,CAC/C,CACH,CCjsBO,SAASmC,IAAkB,CAIhC,GAHA,QAAQ,IAAI,+DAA+D,EAGvE,OAAO,wBACT,eAAQ,KACN,0EACD,EACM,OAAO,oBAIhB,OAAO,wBAA0B,GAGjC,MAAM1B,EACJ,SAAS,eAAe,UAAU,GAAK,SAAS,cAAc,WAAW,EACrE2B,EACJ,SAAS,eAAe,kBAAkB,GAC1C,SAAS,cAAc,mBAAmB,EACtCC,EACJ,SAAS,eAAe,cAAc,GACtC,SAAS,cAAc,eAAe,EAExC,GAAI,CAAC5B,GAAmB,CAAC2B,GAA0B,CAACC,EAAoB,CACtE,QAAQ,MACN,gEACD,EACD,MACJ,CAGE,MAAMC,EAAiB,CAAE,EAGzB,SAASC,EAAoB1V,EAAS2V,EAAgB,CACpD,GAAI,CAAC3V,EAAS,OAEd,QAAQ,IACN,sCAAsCA,EAAQ,IAAMA,EAAQ,SAAS,EACtE,EAGD,MAAM4V,EAAS5V,EAAQ,iBAAiB,UAAU,EAClD,QAAQ,IACN,WAAW4V,EAAO,MAAM,kDACtB5V,EAAQ,IAAMA,EAAQ,SACvB,EACF,EAGD4V,EAAO,QAAQ,CAACC,EAAO5U,IAAU,CAE/B,MAAM6U,EACJH,IAAmB,OAAYA,EAAiB1U,EAAQ,EAM1D,GAHuB4U,EAAM,cAC3B,8EACD,EACmB,CAClB,QAAQ,KACN,SAAS5U,CAAK,yDACf,EACD,MACR,CAGM,MAAM8U,EAAmB,SAAS,cAAc,QAAQ,EAGxD,OAFAA,EAAiB,aAAa,OAAQ,QAAQ,EAEtCD,EAAW,CACjB,IAAK,GACHC,EAAiB,UAAY,oBAG7BA,EAAiB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,YAQ7B,MAAMxB,EAAesB,EAAM,cAAc,iBAAiB,EAE1D,GAAItB,EAAc,CAEhB,MAAMyB,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,2BAG3B,MAAMC,EAAc1B,EAAa,UAAU,EAAI,EAC/CyB,EAAe,YAAYC,CAAW,EACtCD,EAAe,YAAYD,CAAgB,EAG3CxB,EAAa,WAAW,aAAayB,EAAgBzB,CAAY,CAC7E,MAEYsB,EAAM,aAAaE,EAAkBF,EAAM,UAAU,EAEvD,MAEF,IAAK,GACHE,EAAiB,UAAY,oBAG7BA,EAAiB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA,YAQ7B,MAAMG,EAAgBL,EAAM,cAAc,iBAAiB,EAE3D,GAAIK,EAAe,CAEjB,MAAMF,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,2BAG3B,MAAMC,EAAcC,EAAc,UAAU,EAAI,EAChDF,EAAe,YAAYC,CAAW,EACtCD,EAAe,YAAYD,CAAgB,EAG3CG,EAAc,WAAW,aACvBF,EACAE,CACD,CACb,MAEYL,EAAM,aAAaE,EAAkBF,EAAM,UAAU,EAEvD,MAEF,IAAK,GACHE,EAAiB,UAAY,+BAG7BA,EAAiB,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAS7B,MAAMI,EAAUN,EAAM,cAAc,iBAAiB,EAErD,GAAIM,EAAS,CAEX,MAAMH,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAY,2BAG3B,MAAMC,EAAcE,EAAQ,UAAU,EAAI,EAC1CH,EAAe,YAAYC,CAAW,EACtCD,EAAe,YAAYD,CAAgB,EAG3CI,EAAQ,WAAW,aAAaH,EAAgBG,CAAO,CACnE,MAEYN,EAAM,aAAaE,EAAkBF,EAAM,UAAU,EAEvD,KACV,CAGMJ,EAAe,KAAKM,CAAgB,CAC1C,CAAK,CACL,CAGMnC,GACF8B,EAAoB9B,CAAe,EAIrC,IAAIwC,EACJ,GAAIZ,EAAoB,CACtB,MAAMa,EAAoBb,EAAmB,iBAAiB,UAAU,EACxE,GAAIa,EAAkB,OAAS,EAAG,CAChC,MAAMC,EAAcD,EAAkB,CAAC,EAAE,cACvC,8EACD,EAEGC,IAEEA,EAAY,UAAU,SAAS,0BAA0B,EAC3DF,EAAmB,EAEnBE,EAAY,UAAU,SAAS,8BAA8B,EAE7DF,EAAmB,EAEnBA,EAAmB,EAErB,QAAQ,IACN,sDAAsDA,CAAgB,EACvE,EAET,CACA,CAGMb,GACFG,EACEH,EACAa,IAAqB,OAAYA,EAAmB,CACrD,EAIH,QAAQ,IAAI,WAAWX,EAAe,MAAM,sBAAsB,EAGlEA,EAAe,QAAQvJ,GAAU,CAC/B,MAAMqK,EAAerK,EAAO,UAAU,EAAI,EACtCA,EAAO,YACTA,EAAO,WAAW,aAAaqK,EAAcrK,CAAM,EAGrD,MAAMjL,EAAQwU,EAAe,QAAQvJ,CAAM,EACvCjL,IAAU,KACZwU,EAAexU,CAAK,EAAIsV,EAE9B,CAAG,EAGDd,EAAe,QAAQM,GAAoB,CAEzC,MAAMS,EAAeT,EAAiB,QAAQ,UAAU,EAExD,GAAI,CAACS,EAAc,CACjB,QAAQ,MACN,8DACD,EACD,MACN,CAEIT,EAAiB,iBAAiB,QAAS,SAAUtX,EAAO,CAuB1D,GArBAA,EAAM,eAAgB,EACtBA,EAAM,gBAAiB,EAEvB,QAAQ,IAAI,qCAAqC,EACjD,QAAQ,IACN,6BACA+X,EAAa,UAAU,SAAS,aAAa,EAAI,QAAU,SAC5D,EAGDA,EAAa,UAAU,OAAO,aAAa,EAG3CT,EAAiB,UAAU,OAAO,QAAQ,EAE1C,QAAQ,IACN,gCACAS,EAAa,UAAU,SAAS,aAAa,EAAI,QAAU,SAC5D,EAGGT,EAAiB,UAAU,SAAS,8BAA8B,EAAG,CACvE,MAAMU,EAAQV,EAAiB,cAC7B,0BACD,EACGU,IACFA,EAAM,YAAcD,EAAa,UAAU,SAAS,aAAa,EAC7D,UACA,OACJ,QAAQ,IAAI,2BAA4BC,EAAM,WAAW,EAEnE,CAGM,MAAMC,EACJF,EAAa,aAAa,iBAAiB,GAC3CA,EAAa,IACb,MAAM,KACJA,EAAa,QAAQ,SAAS,EAAE,iBAAiB,UAAU,CACrE,EAAU,QAAQA,CAAY,EAGlBG,EAAYH,EAAa,QAAQ,SAAS,EAC5CA,EAAa,QAAQ,SAAS,EAAE,IAChCA,EAAa,QAAQ,SAAS,EAAE,UAAU,MAAM,GAAG,EAAE,CAAC,EACtD,UAEEI,EAAoBJ,EAAa,UAAU,SAAS,aAAa,EACnE,SACA,SACJ,aAAa,QACX,QAAQG,CAAS,uBAAuBD,CAAO,GAC/CE,CACD,EAED,QAAQ,IACN,0BAA0BF,CAAO,WAAWC,CAAS,iBAAiBC,CAAiB,EACxF,CACP,CAAK,EAGD,MAAMF,EACJF,EAAa,aAAa,iBAAiB,GAC3CA,EAAa,IACb,MAAM,KACJA,EAAa,QAAQ,SAAS,EAAE,iBAAiB,UAAU,CACnE,EAAQ,QAAQA,CAAY,EAGlBG,EAAYH,EAAa,QAAQ,SAAS,EAC5CA,EAAa,QAAQ,SAAS,EAAE,IAChCA,EAAa,QAAQ,SAAS,EAAE,UAAU,MAAM,GAAG,EAAE,CAAC,EACtD,UAOJ,GAL6B,aAAa,QACxC,QAAQG,CAAS,uBAAuBD,CAAO,EAChD,IAG4B,SAAU,CAKrC,GAJAF,EAAa,UAAU,IAAI,aAAa,EACxCT,EAAiB,UAAU,IAAI,QAAQ,EAGnCA,EAAiB,UAAU,SAAS,8BAA8B,EAAG,CACvE,MAAMU,EAAQV,EAAiB,cAC7B,0BACD,EACGU,IACFA,EAAM,YAAc,UAE9B,CACM,QAAQ,IACN,qCAAqCC,CAAO,aAAaC,CAAS,SACnE,CACP,MACM,QAAQ,IAAI,QAAQD,CAAO,aAAaC,CAAS,mBAAmB,CAE1E,CAAG,EAGD,MAAME,EAAe,SAAS,cAAc,OAAO,EACnDA,EAAa,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAwM3B,SAAS,KAAK,YAAYA,CAAY,EAGtC,MAAMjP,EAAU,UAAY,CAE1B6N,EAAe,QAAQvJ,GAAU,CAC/B,GAAIA,GAAUA,EAAO,WAAY,CAC/B,MAAM8J,EAAiB9J,EAAO,QAAQ,2BAA2B,EACjE,GAAI8J,EAAgB,CAElB,MAAM/M,EAAQ+M,EAAe,cAAc,iBAAiB,EACxD/M,GAAS+M,EAAe,YAC1BA,EAAe,WAAW,aAAa/M,EAAO+M,CAAc,CAExE,MAEU9J,EAAO,WAAW,YAAYA,CAAM,CAE9C,CACA,CAAK,EAGG2K,GAAgBA,EAAa,YAC/BA,EAAa,WAAW,YAAYA,CAAY,EAIlD,OAAO,wBAA0B,GAEjC,QAAQ,IAAI,0CAA0C,CACvD,EAGD,cAAO,oBAAsBjP,EAE7B,QAAQ,IACN,kEACD,EAEMA,CACT,CC5kBA,MAAMkP,GAAW,CACf,aAAc,mmBACd,KAAM,2UACN,UAAW,mUACX,iBAAkB,yRAClB,KAAM,2RACN,eAAgB,qWAChB,OAAQ,mnBACV,EAQO,SAASC,EAAWjZ,EAAMkZ,EAAO,GAAI,CAC1C,OAAKF,GAAShZ,CAAI,EAMXgZ,GAAShZ,CAAI,EACjB,QAAQ,aAAc,UAAUkZ,CAAI,GAAG,EACvC,QAAQ,cAAe,WAAWA,CAAI,GAAG,GAP1C,QAAQ,MAAM,SAASlZ,CAAI,aAAa,EACjC,GAOX,CAMO,SAASmZ,IAAY,CACL,SAAS,iBAAiB,aAAa,EAE/C,QAAQ3V,GAAW,CAC9B,MAAM4V,EAAW5V,EAAQ,aAAa,WAAW,EAC3C6V,EAAW,SAAS7V,EAAQ,aAAa,WAAW,GAAK,KAAM,EAAE,EAEnE4V,IACF5V,EAAQ,UAAYyV,EAAWG,EAAUC,CAAQ,EAEvD,CAAG,CACH,CCzCO,SAASC,IAAc,CAC5B,QAAQ,IAAI,8BAA8B,EAE1C,MAAMC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAY,SAAS,eAAe,MAAM,EAC1CC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAe,SAAS,eAAe,SAAS,EAChDC,EAAe,SAAS,cAAc,eAAe,EACrDC,EAAiB,SAAS,cAAc,KAAK,EAEnDA,EAAe,UAAY,cAC3BA,EAAe,MAAM,QAAU,OAC/BA,EAAe,UAAY;AAAA,oCACOZ,EAAW,eAAgB,EAAE,CAAC;AAAA;AAAA,IAKhEM,EAAY,aAAaM,EAAgBN,EAAY,UAAU,EAG/D,MAAMO,EAAW,CACf,KAAM,GACN,MAAO,GACP,MAAO,GACP,QAAS,EACV,EAGD,SAASC,EAAUC,EAAYC,EAAiB,CAC9C,MAAMC,EAAUpW,EAAQ,EAAEkW,EAAY,CAAE,aAAcC,EAAiB,EACvEJ,EAAe,cAAc,MAAM,EAAE,YAAcK,EACnDL,EAAe,MAAM,QAAU,MACnC,CAGE,SAASM,GAAY,CACnBN,EAAe,MAAM,QAAU,MACnC,CAGE,SAASO,EAAkB7a,EAAG,CAC5B,KAAM,CAAE,KAAAS,EAAM,MAAAqa,CAAO,EAAG9a,EAAE,OAC1Bua,EAAS9Z,CAAI,EAAIqa,EAGjBF,EAAW,CACf,CAGEX,EAAU,iBAAiB,QAASY,CAAiB,EACrDX,EAAW,iBAAiB,QAASW,CAAiB,EACtDV,EAAW,iBAAiB,QAASU,CAAiB,EACtDT,EAAa,iBAAiB,QAASS,CAAiB,EAGxD,eAAeE,EAAa/a,EAAG,CAC7BA,EAAE,eAAgB,EAIlBgb,EADqB,EACO,EAE5B,GAAI,CAEF,GACE,CAACT,EAAS,MACV,CAACA,EAAS,OACV,CAACA,EAAS,OACV,CAACA,EAAS,QAEV,MAAM,IAAI,MACRhW,EAAQ,EAAE,+BAAgC,2BAA2B,CACtE,EAKH,GAAI,CADe,6BACH,KAAKgW,EAAS,KAAK,EACjC,MAAM,IAAI,MACRhW,EAAQ,EACN,gCACA,4BACZ,CACS,EAKH,GAAI,CADe,oBACH,KAAKgW,EAAS,MAAM,QAAQ,MAAO,EAAE,CAAC,EACpD,MAAM,IAAI,MACRhW,EAAQ,EACN,gCACA,oCACZ,CACS,EAIH,MAAM,IAAI,QAAQ0W,GAAW,WAAWA,EAAS,GAAI,CAAC,EAGtDhB,EAAU,MAAQ,GAClBC,EAAW,MAAQ,GACnBC,EAAW,MAAQ,GACnBC,EAAa,MAAQ,GAGrB,OAAO,KAAKG,CAAQ,EAAE,QAAQrW,GAAO,CACnCqW,EAASrW,CAAG,EAAI,EACxB,CAAO,EAED,MACEK,EAAQ,EACN,uBACA,yDACV,CACO,CACF,OAAQlD,EAAO,CACdmZ,EACE,6BACAnZ,EAAM,SACJ,kEACH,EACD,QAAQ,MAAM,yBAA0BA,CAAK,CACnD,QAAc,CAER2Z,EAAgB,EAAK,CAC3B,CACA,CAGE,SAASA,EAAgBE,EAAc,CACtB,CAACjB,EAAWC,EAAYC,EAAYC,CAAY,EAExD,QAAQe,GAAS,CACtBA,EAAM,SAAWD,CACvB,CAAK,EAEDb,EAAa,SAAWa,EAEpBA,EACFb,EAAa,UAAY,8BAA8BX,EACrD,SACA,EACR,CAAO,WAAWnV,EAAQ,EAAE,uBAAwB,YAAY,CAAC,GAE3D8V,EAAa,UAAY,8BAA8BX,EACrD,OACA,EACR,CAAO,WAAWnV,EAAQ,EAAE,sBAAuB,cAAc,CAAC,EAElE,CAGE,OAAAyV,EAAY,iBAAiB,SAAUe,CAAY,EAGnD,OAAO,iBAAiB,kBAAmB,SAAU3Z,EAAO,CAC1D4Z,EAAgBX,EAAa,QAAQ,CACzC,CAAG,EAGM,UAAmB,CACxBJ,EAAU,oBAAoB,QAASY,CAAiB,EACxDX,EAAW,oBAAoB,QAASW,CAAiB,EACzDV,EAAW,oBAAoB,QAASU,CAAiB,EACzDT,EAAa,oBAAoB,QAASS,CAAiB,EAC3Db,EAAY,oBAAoB,SAAUe,CAAY,EACtD,OAAO,oBAAoB,kBAAmBC,CAAe,CAC9D,CACH,CC5KO,SAASI,IAAc,CAGtB,MAAAC,EAAiC,kBAMjCC,EAAe,CACnB,QAAS,CACP,KAAM,GAAGD,CAAQ,4BACjB,IAAK,GAAGA,CAAQ,0BAClB,EACA,QAAS,CACP,KAAM,GAAGA,CAAQ,4BACjB,IAAK,GAAGA,CAAQ,0BAClB,EACA,QAAS,CACP,KAAM,GAAGA,CAAQ,4BACjB,IAAK,GAAGA,CAAQ,0BAClB,EACA,QAAS,CACP,KAAM,GAAGA,CAAQ,4BACjB,IAAK,GAAGA,CAAQ,0BAAA,CAEpB,EAGME,EAAU,CACd,CACE,GAAI,EACJ,OAAQ,EACR,SAAU,8BACV,MAAO,cACP,UAAW,+BACX,OAAQ,qBACR,QAAS,6BACT,KAAM,cACN,QAAS,6BACT,KAAM,0OACN,OAAQ,CACN,KAAMD,EAAa,QAAQ,KAC3B,KAAMA,EAAa,QAAQ,GAC7B,EACA,QAAS,GACT,SAAU,EACZ,EACA,CACE,GAAI,EACJ,OAAQ,EACR,SAAU,8BACV,MAAO,cACP,UAAW,+BACX,OAAQ,QACR,QAAS,6BACT,KAAM,cACN,QAAS,6BACT,KAAM,0OACN,OAAQ,CACN,KAAMA,EAAa,QAAQ,KAC3B,KAAMA,EAAa,QAAQ,GAC7B,EACA,QAAS,EACT,SAAU,EACZ,EACA,CACE,GAAI,EACJ,OAAQ,EACR,SAAU,8BACV,MAAO,aACP,UAAW,+BACX,OAAQ,QACR,QAAS,6BACT,KAAM,cACN,QAAS,6BACT,KAAM,gOACN,OAAQ,CACN,KAAMA,EAAa,QAAQ,KAC3B,KAAMA,EAAa,QAAQ,GAC7B,EACA,QAAS,GACT,SAAU,EACZ,EACA,CACE,GAAI,EACJ,OAAQ,EACR,SAAU,8BACV,MAAO,cACP,UAAW,+BACX,OAAQ,QACR,QAAS,6BACT,KAAM,cACN,QAAS,6BACT,KAAM,kOACN,OAAQ,CACN,KAAMA,EAAa,QAAQ,KAC3B,KAAMA,EAAa,QAAQ,GAC7B,EACA,QAAS,GACT,SAAU,GACV,WAAY,EAAA,CAEhB,EAGME,MAAoB,IAG1B,IAAIC,EAAgB,KAGhB/K,EAAW,OAAO,YAAc,KAG3B,SAAAgL,EAAeC,EAAS,GAAO,CACtC,MAAMC,EAAM,SAAS,gBAAgB,6BAA8B,KAAK,EACpEA,EAAA,UAAU,IAAI,mBAAmB,EACjCA,EAAA,aAAa,UAAW,WAAW,EACvCA,EAAI,aAAa,OAAQD,EAAS,eAAiB,MAAM,EACrDC,EAAA,aAAa,SAAU,cAAc,EACrCA,EAAA,aAAa,eAAgB,GAAG,EAEpC,MAAMC,EAAU,SAAS,gBACvB,6BACA,SACF,EACQ,OAAAA,EAAA,aACN,SACA,gGACF,EACAD,EAAI,YAAYC,CAAO,EAEhBD,CAAA,CAIT,SAASE,GAAqB,CAC5B,MAAMF,EAAM,SAAS,gBAAgB,6BAA8B,KAAK,EACpEA,EAAA,UAAU,IAAI,uBAAuB,EACrCA,EAAA,aAAa,QAAS,IAAI,EAC1BA,EAAA,aAAa,SAAU,IAAI,EAC3BA,EAAA,aAAa,UAAW,WAAW,EACnCA,EAAA,aAAa,OAAQ,MAAM,EAC3BA,EAAA,aAAa,SAAU,cAAc,EACrCA,EAAA,aAAa,eAAgB,GAAG,EAEpC,MAAM3Z,EAAO,SAAS,gBAAgB,6BAA8B,MAAM,EACrE,OAAAA,EAAA,aAAa,IAAK,iBAAiB,EACxC2Z,EAAI,YAAY3Z,CAAI,EAEb2Z,CAAA,CAIA,SAAAG,EAAe7X,EAAK8X,EAAU,CACjC,GAAA,CAAC9X,EAAY,OAAA8X,EACX,MAAA1X,EAAcC,EAAQ,EAAEL,CAAG,EAE1B,OAAAI,GAAeA,IAAgBJ,EAAMI,EAAc0X,CAAA,CAI5D,SAASC,EAAiBC,EAAQ,CAC1B,MAAAC,EAAW,SAAS,eAAe,oBAAoB,EAC7D,GAAI,CAACA,EACH,eAAQ,MAAM,kCAAkC,EACzC,KAGT,MAAM/M,EAAO+M,EAAS,QAAQ,UAAU,EAAI,EAAE,cAAc,cAAc,EAGrE/M,EAAA,QAAQ,GAAK8M,EAAO,GAGrBA,EAAO,aACJ9M,EAAA,UAAU,IAAI,aAAa,EAC3BsB,IACHtB,EAAK,MAAM,QAAU,SAKnB,MAAAgN,EAAkBhN,EAAK,cAAc,sBAAsB,EACjE,QAASiN,EAAI,EAAGA,EAAI,EAAGA,IACrBD,EAAgB,YAAYV,EAAeW,EAAIH,EAAO,MAAM,CAAC,EAI/D,MAAMI,EAAYP,EAAeG,EAAO,SAAUA,EAAO,KAAK,EACzD9M,EAAA,cAAc,uBAAuB,EAAE,YAAckN,EAG1D,MAAMC,EAAaR,EAAeG,EAAO,QAASA,EAAO,IAAI,EACxD9M,EAAA,cAAc,oBAAoB,EAAE,YAAcmN,EAGjD,MAAAC,EAAUpN,EAAK,cAAc,SAAS,EAC5CoN,EAAQ,cAAc,QAAQ,EAAE,aAAa,SAAUN,EAAO,OAAO,IAAI,EACnE,MAAA/N,EAAMqO,EAAQ,cAAc,KAAK,EACvCrO,EAAI,aAAa,MAAO+N,EAAO,OAAO,IAAI,EAC1C/N,EAAI,aAAa,MAAO,UAAU+N,EAAO,EAAE,EAAE,EAGvC,MAAAO,EAAcrN,EAAK,cAAc,oBAAoB,EACvD8M,EAAO,UACGO,EAAA,QAAQX,GAAoB,EAE1C,MAAMY,EAAaX,EAAeG,EAAO,UAAWA,EAAO,MAAM,EACjEO,EAAY,YAAY,SAAS,eAAeC,CAAU,CAAC,EAG3D,MAAMC,EAAWZ,EAAeG,EAAO,QAASA,EAAO,IAAI,EACtD9M,EAAA,cAAc,oBAAoB,EAAE,YAAcuN,EAQvD,MAAMC,GAJkBb,EACtB,kBACA,qBACF,EACoC,QAAQ,YAAaG,EAAO,OAAO,EAClE9M,EAAA,cAAc,6BAA6B,EAAE,YAAcwN,GAG3DxN,EAAA,iBAAiB,QAASyN,CAAiB,EAChDzN,EAAK,iBAAiB,aAAc,IAAM0N,EAAiBZ,EAAO,EAAE,CAAC,EAChE9M,EAAA,iBAAiB,aAAc2N,CAAgB,EAG9C,MAAAC,EAAgB5N,EAAK,cAAc,uBAAuB,EAClD,OAAA4N,EAAA,iBAAiB,aAAc,IAAM,CACjDA,EAAc,cAAc,KAAK,EAAE,aAAa,OAAQ,cAAc,EACtEA,EAAc,cAAc,KAAK,EAAE,UAAU,IAAI,WAAW,EAC5DA,EAAc,cAAc,KAAK,EAAE,UAAU,OAAO,WAAW,CAAA,CAChE,EAEaA,EAAA,iBAAiB,aAAc,IAAM,CACjDA,EAAc,cAAc,KAAK,EAAE,aAAa,OAAQ,MAAM,EAC9DA,EAAc,cAAc,KAAK,EAAE,UAAU,OAAO,WAAW,EAC/DA,EAAc,cAAc,KAAK,EAAE,UAAU,IAAI,WAAW,CAAA,CAC7D,EAEM5N,CAAA,CAIT,SAASyN,GAAoB,CACpB,OAAA,KACL,iEACA,SACA,qBACF,CAAA,CAIF,SAASC,EAAiBG,EAAI,CACZxB,EAAAwB,EAChB,MAAM7N,EAAO,SAAS,cAAc,yBAAyB6N,CAAE,IAAI,EACnE,GAAI7N,EAAM,CACF,MAAA8N,EAAQ9N,EAAK,cAAc,6BAA6B,EAC1D8N,IACFA,EAAM,MAAM,QAAU,OACxB,CACF,CAIF,SAASH,GAAmB,CAC1B,MAAM3N,EAAO,SAAS,cACpB,yBAAyBqM,CAAa,IACxC,EACA,GAAIrM,EAAM,CACF,MAAA8N,EAAQ9N,EAAK,cAAc,6BAA6B,EAC1D8N,IACFA,EAAM,MAAM,QAAU,OACxB,CAEczB,EAAA,IAAA,CAIlB,SAAS0B,GAAoB,CACrB,MAAAC,EAAO,SAAS,eAAe,aAAa,EAClD,GAAI,CAACA,EAAM,CACT,QAAQ,MAAM,iCAAiC,EAC/C,MAAA,CAII,MAAAjB,EAAW,SAAS,eAAe,oBAAoB,EAIvDkB,EAAgB,CAAC,EACvBD,EAAK,iBAAiB,cAAc,EAAE,QAAgBhO,GAAA,CAChDA,EAAK,QAAQ,KACDiO,EAAAjO,EAAK,QAAQ,EAAE,EAAIA,EACnC,CACD,EAGD,MAAMkO,EAAmB/B,EAAQ,OACrBW,GAAA,CAACA,EAAO,YAAeA,EAAO,YAAcxL,CACxD,EAGM6M,EAAiB,CAAC,EAGxBD,EAAiB,QAAkBpB,GAAA,CAE7B,GAAAmB,EAAcnB,EAAO,EAAE,EAAG,CAEtB,MAAA9M,EAAOiO,EAAcnB,EAAO,EAAE,EACpC9M,EAAK,MAAM,QAAU,QAGrBoO,EAAgBpO,EAAM8M,CAAM,EAE5BqB,EAAe,KAAKnO,CAAI,EACjB,OAAAiO,EAAcnB,EAAO,EAAE,CAAA,KACzB,CAEC,MAAA9M,EAAO6M,EAAiBC,CAAM,EAChC9M,GACFmO,EAAe,KAAKnO,CAAI,CAC1B,CACF,CACD,EAGD,OAAO,OAAOiO,CAAa,EAAE,QAAgBjO,GAAA,CACvCA,IAAS+M,IACX/M,EAAK,MAAM,QAAU,OACvB,CACD,EAGDgO,EAAK,UAAY,GACjBA,EAAK,YAAYjB,CAAQ,EAGzBoB,EAAe,QAAgBnO,GAAA,CAC7BgO,EAAK,YAAYhO,CAAI,CAAA,CACtB,EAGkBqO,EAAA,CAAA,CAIZ,SAAAD,EAAgBpO,EAAM8M,EAAQ,CACjC,GAAA,CAAC9M,GAAQ,CAAC8M,EAAQ,OAGhB,MAAAwB,EAAetO,EAAK,cAAc,uBAAuB,EAC3DsO,IACFA,EAAa,YAAc3B,EAAeG,EAAO,SAAUA,EAAO,KAAK,GAInE,MAAAyB,EAAcvO,EAAK,cAAc,oBAAoB,EACvDuO,IACFA,EAAY,YAAc5B,EAAeG,EAAO,QAASA,EAAO,IAAI,GAIhE,MAAAO,EAAcrN,EAAK,cAAc,oBAAoB,EAC3D,GAAIqN,EAAa,CAET,MAAAmB,EAAenB,EAAY,cAAc,wBAAwB,EAGvEA,EAAY,YAAc,GAGtBmB,GACFnB,EAAY,YAAYmB,CAAY,EAI1BnB,EAAA,YACV,SAAS,eAAeV,EAAeG,EAAO,UAAWA,EAAO,MAAM,CAAC,CACzE,CAAA,CAII,MAAA2B,EAAczO,EAAK,cAAc,oBAAoB,EACvDyO,IACFA,EAAY,YAAc9B,EAAeG,EAAO,QAASA,EAAO,IAAI,GAIhE,MAAA4B,EAAiB1O,EAAK,cAAc,6BAA6B,EACvE,GAAI0O,EAAgB,CAClB,MAAMC,EAAkBhC,EACtB,kBACA,qBACF,EACA+B,EAAe,YAAcC,EAAgB,QAC3C,YACA7B,EAAO,OACT,CAAA,CACF,CAIF,SAASuB,GAAqB,CACxB,GAAA,EAAE,yBAA0B,QAAS,CACvC,QAAQ,KAAK,wDAAwD,EACrE,SAAS,iBAAiB,cAAc,EAAE,QAAgBrO,GAAA,CACnDA,EAAA,UAAU,IAAI,YAAY,CAAA,CAChC,EACD,MAAA,CAGF,MAAMtB,EAAW,IAAI,qBACR9D,GAAA,CACTA,EAAQ,QAAiBC,GAAA,CACvB,GAAIA,EAAM,eAAgB,CAClB,MAAAgT,EAAKhT,EAAM,OAAO,QAAQ,GAC3BuR,EAAc,IAAIyB,CAAE,IACjBhT,EAAA,OAAO,UAAU,IAAI,YAAY,EACvCuR,EAAc,IAAIyB,CAAE,EACtB,CACF,CACD,CACH,EACA,CAAE,UAAW,EAAI,CACnB,EAEA,SAAS,iBAAiB,cAAc,EAAE,QAAgB7N,GAAA,CACxDtB,EAAS,QAAQsB,CAAI,CAAA,CACtB,CAAA,CAIH,SAAS5E,GAAe,CAIXkG,EAHS,OAAO,YAAc,KAMvByM,EAAA,EAGlB,SAAS,iBAAiB,cAAc,EAAE,QAAgB/N,GAAA,CACpDA,EAAK,UAAU,SAAS,aAAa,IAClCA,EAAA,MAAM,QAAUsB,EAAW,QAAU,OAC5C,CACD,CAAA,CAIH,SAASjJ,EAAqBrG,EAAO,SACnC,QAAQ,IAAI,qCAAqCuG,EAAAvG,GAAA,YAAAA,EAAO,SAAP,YAAAuG,EAAe,QAAQ,EAGtDwV,EAAA,EAGZ,MAAAa,EAAiB,SAAS,eAAe,SAAS,EACxD,GAAIA,EAAgB,CACZ,MAAAtW,EAAe,CAAC,IAAI,EACpBnH,IAAc0d,EAAA7c,GAAA,YAAAA,EAAO,SAAP,YAAA6c,EAAe,WAAY1Z,EAAQ,SAEnDmD,EAAa,SAASnH,CAAW,EACpByd,EAAA,UAAU,IAAI,KAAK,EAEnBA,EAAA,UAAU,OAAO,KAAK,CACvC,CACF,CAIF,SAASE,GAAO,CAEP,OAAA,iBAAiB,kBAAmBzW,CAAoB,EAG7C0V,EAAA,EAGlB1V,EAAqB,CAAE,OAAQ,CAAE,SAAUlD,EAAQ,QAAA,EAAY,EAG3D,IAAA8E,EACJ,MAAMwH,EAAkB,IAAM,CAC5B,aAAaxH,CAAa,EACVA,EAAA,WAAWmB,EAAc,GAAG,CAC9C,EAEO,OAAA,iBAAiB,SAAUqG,CAAe,EAG3C,MAAAsN,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,YAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWX,SAAA,KAAK,YAAYA,CAAK,EAG/B,WAAW3T,EAAc,GAAG,EAGtB,MAAAwT,EAAiB,SAAS,eAAe,SAAS,EACxD,GAAIA,GAAkB,CAACA,EAAe,aAAa,WAAW,EAAG,CAChDA,EAAA,aAAa,YAAa,EAAE,EAC5BA,EAAA,aAAa,WAAY,2BAA2B,EAG7D,MAAAI,EAAW,SAAS,cAAc,MAAM,EACrCA,EAAA,aAAa,WAAY,MAAM,EAC/BA,EAAA,aAAa,YAAa,0BAA0B,EACpDA,EAAA,aAAa,UAAW,4BAA4B,EAC7DJ,EAAe,QAAQI,CAAQ,EAEzB,MAAAtH,EAAW,SAAS,cAAc,MAAM,EACrCA,EAAA,aAAa,WAAY,aAAa,EACtCA,EAAA,aAAa,YAAa,iCAAiC,EAC3DA,EAAA,aACP,UACA,qEACF,EACAkH,EAAe,QAAQlH,CAAQ,CAAA,CACjC,CAIGoH,EAAA,EAGL,SAAS3T,GAAU,CASjB,GAPO,OAAA,oBAAoB,SAAUC,CAAY,EAC1C,OAAA,oBAAoB,SAAU,IAAM,CAAA,CAAE,EAGtC,OAAA,oBAAoB,kBAAmB/C,CAAoB,EAG9D,yBAA0B,OAAQ,CACpC,MAAM4W,EAAY,CAAC,EACF,IAAI,qBAAqB,IAAM,CAAA,CAAE,EACzC,WAAW,EACpBA,EAAU,QAAQC,GAAOA,EAAI,WAAA,CAAY,CAAA,CAI3C,SAAS,iBAAiB,cAAc,EAAE,QAAgBlP,GAAA,CACnDA,EAAA,oBAAoB,QAASyN,CAAiB,EAC9CzN,EAAA,oBAAoB,aAAc,IAAM,CAAA,CAAE,EAC1CA,EAAA,oBAAoB,aAAc2N,CAAgB,EAGvDxB,EAAQ,QAAkBW,GAAA,CACnB9M,EAAA,oBAAoB,aAAc,IACrC0N,EAAiBZ,EAAO,EAAE,CAC5B,CAAA,CACD,EAEK,MAAAc,EAAgB5N,EAAK,cAAc,uBAAuB,EAC5D4N,IACYA,EAAA,oBAAoB,aAAc,IAAM,CAAA,CAAE,EAC1CA,EAAA,oBAAoB,aAAc,IAAM,CAAA,CAAE,EAC1D,CACD,EAGD,QAAQ,IAAI,mCAAmC,CAAA,CAI1C,MAAA,CACL,QAAAzS,EACA,kBAAA4S,EAEA,YAAa,IACX1V,EAAqB,CAAE,OAAQ,CAAE,SAAUlD,EAAQ,SAAY,CAAA,CACnE,CACF,aCllBO,SAASga,IAAe,CAC7B,QAAQ,IAAI,kCAAkC,EAMxC,MAAAlD,EAHgB,CAAAmD,GAGW,IAAM,kBAGjCC,EAAgB,CACpB,KAAM,CACJ,IAAK,GAAGpD,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BACnB,EACA,GAAI,CACF,IAAK,GAAGA,CAAQ,0BAChB,KAAM,GAAGA,CAAQ,0BAAA,CAMrB,EAIMqD,EAAW,CACf,CACE,GAAI,kBACJ,MAAO,6BACP,QAAS,CACP,KAAM,4BACN,OAAQ,CACN,IAAKD,EAAc,KAAK,IACxB,KAAMA,EAAc,KAAK,IAAA,CAC3B,CAEJ,EACA,CACE,GAAI,kBACJ,MAAO,iCACP,QAAS,CACP,KAAM,gCACN,YAAa,CACX,CACE,GAAI,mBACJ,MACE,8DACF,QAAS,CACP,KAAM,6DACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CACF,CACF,CACF,CAEJ,EACA,CACE,GAAI,sBACJ,MAAO,qCACP,QAAS,CACP,KAAM,oCACN,YAAa,CACX,CACE,GAAI,gBACJ,MACE,+DACF,QAAS,CACP,KAAM,8DACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CAEJ,EACA,CACE,GAAI,eACJ,MACE,8DACF,QAAS,CACP,KAAM,6DACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CAEJ,EACA,CACE,GAAI,mBACJ,MACE,kEACF,QAAS,CACP,KAAM,iEACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CACF,CACF,CACF,CAEJ,EACA,CACE,GAAI,mBACJ,MAAO,kCACP,QAAS,CACP,KAAM,iCACN,YAAa,CACX,CACE,GAAI,eACJ,MAAO,2DACP,QAAS,CACP,KAAM,0DACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CAEJ,EACA,CACE,GAAI,iBACJ,MAAO,6DACP,QAAS,CACP,KAAM,4DACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CAEJ,EACA,CACE,GAAI,eACJ,MAAO,2DACP,QAAS,CACP,KAAM,0DACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CACF,CACF,CACF,CAEJ,EACA,CACE,GAAI,aACJ,MAAO,4BACP,QAAS,CACP,KAAM,2BACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CAEJ,EACA,CACE,GAAI,eACJ,MAAO,8BACP,QAAS,CACP,KAAM,6BACN,OAAQ,CACN,IAAKA,EAAc,GAAG,IACtB,KAAMA,EAAc,GAAG,IAAA,CACzB,CAEJ,EACA,CACE,GAAI,YACJ,MAAO,2BACP,QAAS,CACP,UAAW,CACT,CACE,KAAM,uBACN,KAAM,yEACN,KAAM,aACN,QAAS,QACX,EACA,CACE,KAAM,oBACN,KAAM,yEACN,KAAM,aACN,QAAS,QACX,EACA,CACE,KAAM,qBACN,KAAM,yEACN,KAAM,aACN,QAAS,QACX,EACA,CACE,KAAM,wBACN,KAAM,yEACN,KAAM,aACN,QAAS,QAAA,CACX,CACF,CACF,CAEJ,EAEA,IAAIE,EAAgB,YAChBjO,EAAW,GAGT,MAAAkO,EAAkB,SAAS,eAAe,mBAAmB,EAC7DC,EAAmB,SAAS,eAAe,mBAAmB,EAC9DC,EAAM,SAAS,eAAe,cAAc,EAGlD,SAASC,GAAc,CACrBrO,EAAW,OAAO,YAAc,KAC5BoO,IACEpO,EACEoO,EAAA,UAAU,IAAI,YAAY,EAE1BA,EAAA,UAAU,OAAO,YAAY,EAErC,CAIF,SAASE,EAAmB1F,EAAW,CACrBqF,EAAArF,EAGC,SAAS,iBAAiB,WAAW,EAC7C,QAAgBhZ,GAAA,CACnBA,EAAK,QAAQ,YAAcgZ,EACxBhZ,EAAA,UAAU,IAAI,iBAAiB,EAE/BA,EAAA,UAAU,OAAO,iBAAiB,CACzC,CACD,EAGuB,SAAS,iBAAiB,UAAU,EAC5C,QAAmBqC,GAAA,CAC7BA,EAAQ,KAAO2W,EACT3W,EAAA,UAAU,IAAI,gBAAgB,EAE9BA,EAAA,UAAU,OAAO,gBAAgB,CAC3C,CACD,EAGD,WAAW,IAAM,CACT,MAAAsB,EAAU,SAAS,eAAeqV,CAAS,EACjD,GAAIrV,EAAS,CACL,MAAAgb,EAASvO,EAAW,GAAK,GAEzBpJ,EADkBrD,EAAQ,sBAAA,EAAwB,IACf,OAAO,YAAcgb,EAE9D,OAAO,SAAS,CACd,IAAK3X,EACL,SAAU,QAAA,CACX,CAAA,GAEF,GAAG,CAAA,CAIR,SAAS4X,GAAmB,CAC1BN,EAAgB,UAAY,GAE5BF,EAAS,QAAmB/b,GAAA,CACpB,MAAAwc,EAAU,SAAS,cAAc,QAAQ,EAC/CA,EAAQ,UAAY,YAClBR,IAAkBhc,EAAQ,GAAK,kBAAoB,EACrD,GACQwc,EAAA,QAAQ,UAAYxc,EAAQ,GAGpCwc,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA,6BAIGxc,EAAQ,KAAK,KAAK4B,EAAQ,EAAE5B,EAAQ,KAAK,CAAC;AAAA,UAGjEwc,EAAQ,iBAAiB,QAAS,IAAMH,EAAmBrc,EAAQ,EAAE,CAAC,EACtEic,EAAgB,YAAYO,CAAO,CAAA,CACpC,CAAA,CAIH,SAASC,EAA8BpM,EAAS,CAEvC,OADgBzO,EAAQ,EAAEyO,CAAO,EAErC,MAAM;AAAA,CAAI,EACV,OAAoBqM,GAAAA,EAAU,KAAK,IAAM,EAAE,CAAA,CAIhD,SAASC,EAAqB3c,EAAS,CACjC,GAAAA,EAAQ,KAAO,YAAa,CAC9B,IAAIyN,EAAO,8BAEH,OAAAzN,EAAA,QAAQ,UAAU,QAAgBrC,GAAA,CACxC8P,GAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDAUiC9P,EAAK,IAAI;AAAA;AAAA,2FAEiCiE,EAAQ,EAC/E,iCACD,CAAA,YAAYjE,EAAK,IAAI,MAAMA,EAAK,OAAO;AAAA;AAAA;AAAA;AAAA,uBAInCA,EAAK,IAAI;AAAA;AAAA,4BAEJiE,EAAQ,EAAE,kCAAkC,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA,CASlE,EAED6L,GAAQ,SACDA,CAAA,CAGT,IAAIA,EAAO,0DAIX,OADmBgP,EAA8Bzc,EAAQ,QAAQ,IAAI,EAC1D,QAAqB0c,GAAA,CACtBjP,GAAA,MAAMiP,EAAU,KAAA,CAAM,MAAA,CAC/B,EAEOjP,GAAA,SAGJzN,EAAQ,QAAQ,SACVyN,GAAA;AAAA;AAAA;AAAA,gCAGkBzN,EAAQ,QAAQ,OAAO,IAAI;AAAA,0BACjCA,EAAQ,QAAQ,OAAO,GAAG,UAAU4B,EAAQ,EAC9D5B,EAAQ,KAAA,CACT;AAAA;AAAA;AAAA,WAOCA,EAAQ,QAAQ,cACVyN,GAAA,4BAEAzN,EAAA,QAAQ,YAAY,QAAsB4c,GAAA,CACxCnP,GAAA;AAAA;AAAA,wDAGAmP,EAAW,KACb,KAAKhb,EAAQ,EAAEgb,EAAW,KAAK,CAAC;AAAA;AAAA;AAAA,YAMhBH,EACpBG,EAAW,QAAQ,IACrB,EACc,QAAqBF,GAAA,CACzBjP,GAAA,MAAMiP,EAAU,KAAA,CAAM,MAAA,CAC/B,EAEOjP,GAAA,SAGJmP,EAAW,QAAQ,SACbnP,GAAA;AAAA;AAAA;AAAA,oCAIEmP,EAAW,QAAQ,OAAO,IAC5B;AAAA,8BACYA,EAAW,QAAQ,OAAO,GAAG,UAAUhb,EAAQ,EACjEgb,EAAW,KAAA,CACZ;AAAA;AAAA;AAAA,eAMKnP,GAAA,cAAA,CACT,EAEOA,GAAA,UAGFA,GAAA,SACDA,CAAA,CAIT,SAASoP,GAAiB,CACxBX,EAAiB,UAAY,GAE7BH,EAAS,QAAmB/b,GAAA,CACpB,MAAA8P,EAAiB,SAAS,cAAc,SAAS,EACvDA,EAAe,GAAK9P,EAAQ,GAC5B8P,EAAe,UAAY,WACzBkM,IAAkBhc,EAAQ,GAAK,iBAAmB,EACpD,GAEA8P,EAAe,UAAY;AAAA,iDACgB9P,EAAQ,KAAK,KAAK4B,EAAQ,EACnE5B,EAAQ,KAAA,CACT;AAAA,YACK2c,EAAqB3c,CAAO,CAAC;AAAA,UAGnCkc,EAAiB,YAAYpM,CAAc,CAAA,CAC5C,CAAA,CAGH,SAASgN,GAAgB,CACNP,EAAA,EACFM,EAAA,EAGf,SAAS,iBAAiB,eAAe,EAAE,QAAc3e,GAAA,CACnD,GAAAA,EAAG,aAAa,WAAW,EAAG,CAC1B,MAAAqD,EAAMrD,EAAG,aAAa,WAAW,EACpCA,EAAA,YAAc0D,EAAQ,EAAEL,CAAG,CAAA,CAChC,CACD,EAED,SAAS,iBAAiB,kBAAkB,EAAE,QAAcrD,GAAA,CACpD,MAAAqD,EAAMrD,EAAG,aAAa,gBAAgB,EAC5CA,EAAG,aAAa,aAAc0D,EAAQ,EAAEL,CAAG,CAAC,CAAA,CAC7C,CAAA,CAIH,SAASwb,GAAa,CACRX,EAAA,EACKG,EAAA,EACFM,EAAA,EAGT,MAAAG,EAAW,SAAS,cAAc,YAAY,EAChDA,IACOA,EAAA,aAAa,YAAa,0BAA0B,EAC7DA,EAAS,YAAcpb,EAAQ,EAAE,2BAA4B,OAAO,GAIhE,MAAAqb,EAAe,SAAS,cAAc,gBAAgB,EACxDA,IACWA,EAAA,aAAa,YAAa,wBAAwB,EAC/DA,EAAa,YAAcrb,EAAQ,EACjC,yBACA,UACF,GAII,MAAAsb,EAAa,SAAS,cAAc,QAAQ,EAC9CA,IACSA,EAAA,aAAa,YAAa,sBAAsB,EAC3DA,EAAW,YAActb,EAAQ,EAC/B,uBACA,0DACF,GAII,MAAAub,EAAa,SAAS,cAAc,gBAAgB,EACtDA,IACSA,EAAA,aAAa,YAAa,sBAAsB,EAChDA,EAAA,YAAcvb,EAAQ,EAAE,sBAAsB,GAI3D,MAAMwb,EAAwB,SAAS,cACrC,uBACF,EACIA,IACoBA,EAAA,aACpB,YACA,kCACF,EACAA,EAAsB,YAAcxb,EAAQ,EAC1C,mCACA,mBACF,GAII,MAAAyb,EAAe,SAAS,iBAAiB,sBAAsB,EAC/DC,EAAiB,CACrB,iDACA,8CACA,wCACA,sCACF,EAEaD,EAAA,QAAQ,CAAClY,EAAMlE,IAAU,CAChCA,EAAQqc,EAAe,SACzBnY,EAAK,aAAa,YAAamY,EAAerc,CAAK,CAAC,EACpDkE,EAAK,YAAcvD,EAAQ,EAAE0b,EAAerc,CAAK,CAAC,EACpD,CACD,EAGM,OAAA,iBAAiB,SAAUmb,CAAW,EAGtC,OAAA,iBAAiB,kBAAmBU,CAAa,EAExD,QAAQ,IAAI,qDAAqD,CAAA,CAI/Db,GAAmBC,GAAoBC,EAC9BY,EAAA,EAEX,QAAQ,MAAM,yDAAyD,EAIzE,SAASnV,GAAU,CAEV,OAAA,oBAAoB,SAAUwU,CAAW,EACzC,OAAA,oBAAoB,kBAAmBU,CAAa,EAC3D,QAAQ,IAAI,qCAAqC,CAAA,CAI5C,OAAAlV,CACT,CC/jBO,SAAS2V,IAAa,CAC3B,QAAQ,IAAI,sBAAsB,EAGlC,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/C,GAAI,CAACA,EAAQ,CACX,QAAQ,MAAM,0BAA0B,EACxC,MACJ,CAGE,MAAMC,EAAoBD,EAAO,cAAc,qBAAqB,EAEpE,OAAIC,GACFA,EAAkB,iBAAiB,QAAS,IAAM,CAEhD,MAAMC,EAAe,SAAS,cAAc,4BAA4B,EAExE,GAAIA,EAAc,CAEhBA,EAAa,UAAU,IAAI,QAAQ,EAGnC,MAAM7T,EAAe6T,EAAa,cAChC,4BACD,EACG7T,GACFA,EAAa,UAAU,IAAI,QAAQ,EAIrC,SAAS,KAAK,MAAM,SAAW,QACvC,CACA,CAAK,EAIH8T,GAAsB,EAGtB,OAAO,iBAAiB,kBAAmB7Y,EAAoB,EAGxD,UAAmB,CAExB,OAAO,oBAAoB,kBAAmBA,EAAoB,EAG9D2Y,GACFA,EAAkB,oBAAoB,QAASG,EAAS,CAE3D,CACH,CAMA,SAAS9Y,GAAqBrG,EAAO,CAEnC,GAAIA,EAAM,QAAUA,EAAM,OAAO,SAAU,CACzC,MAAM6E,EAAc7E,EAAM,OAAO,SACjC,QAAQ,IAAI,2BAA2B6E,CAAW,EAAE,EAIpD,MAAMoF,EADe,CAAC,IAAI,EACC,SAASpF,CAAW,EAGzCka,EAAS,SAAS,cAAc,SAAS,EAC3CA,IAEE9U,GACF8U,EAAO,UAAU,IAAI,KAAK,EAC1BA,EAAO,MAAM,UAAY,QAEzBA,EAAO,UAAU,OAAO,KAAK,EAC7BA,EAAO,MAAM,UAAY,QAK7B,MAAMK,EAAQ,SAAS,cAAc,4BAA4B,EAC7DA,IACEnV,GACFmV,EAAM,UAAU,IAAI,KAAK,EACzBA,EAAM,MAAM,UAAY,QAExBA,EAAM,UAAU,OAAO,KAAK,EAC5BA,EAAM,MAAM,UAAY,OAGhC,CACA,CAKA,SAASF,IAAuB,CAE9B,MAAMD,EAAe,SAAS,cAAc,4BAA4B,EAExE,GAAI,CAACA,EAAc,CACjB,QAAQ,KAAK,2BAA2B,EACxC,MACJ,CAGE,MAAMrY,EAAcqY,EAAa,cAAc,0BAA0B,EAErErY,GACFA,EAAY,iBAAiB,QAASyY,CAAU,EAIlDJ,EAAa,iBAAiB,QAASjf,GAAS,CAE1CA,EAAM,SAAWif,GACnBI,EAAY,CAElB,CAAG,EAGD,SAAS,iBAAiB,UAAWrf,GAAS,CACxCA,EAAM,MAAQ,UAAYif,EAAa,UAAU,SAAS,QAAQ,GACpEI,EAAY,CAElB,CAAG,CACH,CAKA,SAASF,IAAY,CACnB,MAAMF,EAAe,SAAS,cAAc,4BAA4B,EACxE,GAAIA,EAAc,CAEhBA,EAAa,UAAU,IAAI,QAAQ,EAGnC,MAAM7T,EAAe6T,EAAa,cAChC,4BACD,EACG7T,GACFA,EAAa,UAAU,IAAI,QAAQ,EAIrC,SAAS,KAAK,MAAM,SAAW,QACnC,CACA,CAKA,SAASiU,GAAa,CACpB,MAAMJ,EAAe,SAAS,cAAc,4BAA4B,EACxE,GAAI,CAACA,EAAc,OAEnB,MAAM7T,EAAe6T,EAAa,cAAc,4BAA4B,EAG5EA,EAAa,UAAU,OAAO,QAAQ,EAElC7T,GACFA,EAAa,UAAU,OAAO,QAAQ,EAIxC,SAAS,KAAK,MAAM,SAAW,EACjC,CCvJA,QAAQ,IAAI,yBAAyB,EAGrC,IAAIkU,EAAkB,OAAO,iBAAmB,KAC5CA,GACM,QAAA,IAAI,oCAAqCA,CAAe,EAIlE,IAAIC,EAAmB,CAAC,EAGxB,SAASC,IAA4B,CAEnC,MAAMC,EAA0B,yBAA0B,OAEpDC,EAAc,UAAY,CACxB,MAAAjgB,EAAK,SAAS,cAAc,KAAK,EACvC,OAAAA,EAAG,MAAM,QAAU,OACZA,EAAG,MAAM,UAAY,MAAA,EAC3B,EAEGkgB,EAAW,UAAY,CACrB,MAAAlgB,EAAK,SAAS,cAAc,KAAK,EACvC,OAAAA,EAAG,MAAM,QAAU,OACZA,EAAG,MAAM,UAAY,MAAA,EAC3B,EAEH,eAAQ,IAAI,qBAAqB,EACzB,QAAA,IAAI,0BAA2BggB,CAAuB,EACtD,QAAA,IAAI,aAAcC,CAAU,EAC5B,QAAA,IAAI,cAAeC,CAAO,EAE7BF,GACM,SAAA,KAAK,UAAU,IAAI,0BAA0B,EACnDC,GAAY,SAAS,KAAK,UAAU,IAAI,YAAY,EACpDC,GAAS,SAAS,KAAK,UAAU,IAAI,SAAS,EAC5C,CACL,wBAAAF,EACA,WAAAC,EACA,QAAAC,CACF,CACF,CAGA,SAASC,IAAgB,CACnB,GAAA,CAEFL,EAAiB,QAAqBM,GAAA,CAChC,OAAOA,GAAc,YACbA,EAAA,CACZ,CACD,EAEDN,EAAmB,CAAC,QACbtf,EAAO,CACN,QAAA,KAAK,+BAAgCA,CAAK,CAAA,CAEtD,CAGA,eAAe6f,IAAiB,CAC1B,GAAA,CAEI,MAAAC,EACJnf,GAAmBjD,CAAkB,GAAK2hB,EACpC,QAAA,IAAI,gCAAiCS,CAAW,EAIxD,MAAMvf,EACJ,aAAa,QAAQ,cAAc,GAAKuf,GAAe,KACnDzZ,EAAe,CAAC,IAAI,EACjB,SAAA,gBAAgB,aAAa,OAAQ9F,CAAa,EAC3D,SAAS,gBAAgB,IAAM8F,EAAa,SAAS9F,CAAa,EAC9D,MACA,MAGJ,MAAMwf,EAAkBrc,GAAU,CAAE,eAAgBoc,EAAa,EAG3DE,EAAiB,IAAI,QAAQ,CAACC,EAAGC,IAAW,CAChD,WAAW,IAAM,CACRA,EAAA,IAAI,MAAM,+CAA+C,CAAC,GAChE,GAAI,CAAA,CACR,EAGD,aAAM,QAAQ,KAAK,CAACH,EAAiBC,CAAc,CAAC,EAG9Btb,GAAA,EAGb,SAAA,gBAAgB,UAAU,IAAI,kBAAkB,EAElD,SACA1E,EAAO,CACN,QAAA,MAAM,2BAA4BA,CAAK,EAG3C,GAAA,CACO,SAAA,gBAAgB,aAAa,OAAQ,IAAI,EAClD,SAAS,gBAAgB,IAAM,MAGtB,SAAA,gBAAgB,UAAU,IAAI,aAAa,QAC7CiE,EAAe,CACd,QAAA,MACN,8CACAA,CACF,CAAA,CAGK,MAAA,EAAA,CAEX,CAGA,SAAS,iBAAiB,mBAAoB,SAAY,CACxD,QAAQ,IAAI,cAAc,EAEtB,GAAA,CAEO,SAAA,gBAAgB,UAAU,IAAI,cAAc,EAG/C,MAAAkc,EAAc,MAAMN,GAAe,EAGhC,SAAA,gBAAgB,UAAU,OAAO,cAAc,EAGnDM,GACH,QAAQ,KAAK,iDAAiD,EAKhE,MAAMC,EAAwB,CAAC,EAGTA,EAAA,MACnB,SAAY,CACP,GAAA,CACF,MAAMC,EAAgBxb,GAAW,EAC7B,OAAA,OAAOwb,GAAkB,YAC3Bf,EAAiB,KAAKe,CAAa,EAE9B,SACArgB,EAAO,CACN,eAAA,MAAM,+BAAgCA,CAAK,EAC5C,EAAA,CAER,GAAA,CACL,EAGsBogB,EAAA,MACnB,SAAY,CACP,GAAA,CACF,MAAME,EAAoB5Z,GAAe,EACrC,OAAA,OAAO4Z,GAAsB,YAC/BhB,EAAiB,KAAKgB,CAAiB,EAElC,SACAtgB,EAAO,CACN,eAAA,MAAM,oCAAqCA,CAAK,EACjD,EAAA,CAER,GAAA,CACL,EAGsBogB,EAAA,MACnB,SAAY,CACP,GAAA,CACQ,OAAA7H,GAAA,EACH,SACAvY,EAAO,CACN,eAAA,MAAM,8BAA+BA,CAAK,EAC3C,EAAA,CAER,GAAA,CACL,EAGsBogB,EAAA,MACnB,SAAY,CACP,GAAA,CACF,MAAMG,EAAgBhB,GAA0B,EACzC,MAAA,SACAvf,EAAO,CACN,eAAA,MAAM,yCAA0CA,CAAK,EACtD,EAAA,CAER,GAAA,CACL,EAGmB,CACjB,CAAE,KAAM,OAAQ,KAAMoH,EAAS,EAC/B,CAAE,KAAM,QAAS,KAAM4F,EAAU,EACjC,CAAE,KAAM,WAAY,KAAM4C,EAAa,EACvC,CAAE,KAAM,aAAc,KAAM2B,EAAe,EAC3C,CAAE,KAAM,WAAY,KAAMyD,EAAa,EACvC,CAAE,KAAM,cAAe,KAAM4B,EAAgB,EAC7C,CAAE,KAAM,UAAW,KAAM8B,EAAY,EACrC,CAAE,KAAM,UAAW,KAAMqB,EAAY,EACrC,CAAE,KAAM,WAAY,KAAMmD,EAAa,EACvC,CAAE,KAAM,SAAU,KAAM2B,EAAW,EACnC,CAAE,KAAM,cAAe,KAAMrhB,EAAgB,CAC/C,EAGW,QAAqBgjB,GAAA,CACRJ,EAAA,MACnB,SAAY,CACP,GAAA,CACI,MAAAlX,EAAUsX,EAAU,KAAK,EAC3B,OAAA,OAAOtX,GAAY,YACrBoW,EAAiB,KAAKpW,CAAO,EAExB,SACAlJ,EAAO,CACd,eAAQ,MAAM,wBAAwBwgB,EAAU,IAAI,IAAKxgB,CAAK,EACvD,EAAA,CAER,GAAA,CACL,CAAA,CACD,EAGD,MAAMoC,EAAU,MAAM,QAAQ,WAAWge,CAAqB,EAGxDK,EAAkBre,EAAQ,OAC1Bse,EAAuBte,EAAQ,OACzBE,GAAAA,EAAO,SAAW,aAAeA,EAAO,QAAU,EAAA,EAC5D,OAEM,QAAA,IACN,4BAA4Boe,CAAoB,IAAID,CAAe,gCACrE,EAGM,MAAAE,EAAW,YAAY,IAAI,EACjC,QAAQ,IAAI,yBAAyBA,EAAS,QAAQ,CAAC,CAAC,IAAI,EAGnD,SAAA,gBAAgB,UAAU,OAAO,SAAS,EAC1C,SAAA,gBAAgB,UAAU,IAAI,QAAQ,EAGxC,OAAA,iBAAiB,eAAgBhB,EAAa,QAC9C3f,EAAO,CACN,QAAA,MAAM,iDAAkDA,CAAK,EAG5D,SAAA,gBAAgB,UAAU,OAAO,SAAS,EAC1C,SAAA,gBAAgB,UAAU,IAAI,OAAO,CAc9C,CAEJ,CAAC,EAGD,OAAO,QAAU,SAAUsZ,EAASrH,EAAQ2O,EAAQC,EAAO7gB,EAAO,CAChE,eAAQ,MAAM,qBAAsB,CAClC,QAAAsZ,EACA,OAAArH,EACA,OAAA2O,EACA,MAAAC,EACA,MAAA7gB,CAAA,CACD,EACM,EACT,EAGA,OAAO,iBAAiB,qBAAsB,SAAUD,EAAO,CACrD,QAAA,KACN,gEACAA,EAAM,MACR,CACF,CAAC,EAGD,OAAO,WAAa,CAClB,QAAS,QACT,UAAW,IAAI,KAAK,EAAE,YAAY,EAClC,YAAa,aACb,SAAsC,yBACxC,EASA,QAAQ,IAAI,8BAA8B"}