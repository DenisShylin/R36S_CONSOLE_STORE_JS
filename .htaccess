# Базовые настройки
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

# Добавляем правильные MIME-типы (важно для CSS)
<IfModule mod_mime.c>
  AddType text/css .css
  AddType application/javascript .js
  AddType image/svg+xml .svg
  AddType application/json .json
</IfModule>

# Кэширование статических ресурсов
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType text/css "access plus 1 year"
  ExpiresByType application/javascript "access plus 1 year"
  ExpiresByType image/svg+xml "access plus 1 year"
  ExpiresByType image/jpeg "access plus 1 year"
  ExpiresByType image/png "access plus 1 year"
  ExpiresByType image/gif "access plus 1 year"
  ExpiresByType image/webp "access plus 1 year"
</IfModule>

# Компрессия содержимого
<IfModule mod_deflate.c>
  <IfModule mod_filter.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css application/javascript application/json 
  </IfModule>
</IfModule>

# Простое правило для статических файлов
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# Для CSS и JS файлов в assets
RewriteCond %{REQUEST_URI} \.(css|js)$ [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^r36s\.pro/assets/(.+)\.(css|js)$ /r36s.pro/assets/$1.$2 [L]

# Для URL языковых версий
RewriteRule ^r36s\.pro/(en|ru|ar|be|de|es|fr|it|ja|ko|nl|pt|tr|uk)/(.*)$ /r36s.pro/$1/index.html [L]

# Для корневого URL
RewriteRule ^r36s\.pro/?$ /r36s.pro/index.html [L]

# Для всех остальных путей - перенаправление на 404.html
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^r36s\.pro/(.*)$ /r36s.pro/404.html [L]

# End of .htaccess